!function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","khoaijs","khoaijs-event-emitter","khoaijs-pre-options","khoaijs-template"];define(n,function(n,i,o,s,a){var l=e(n,i,o,s,a);return i.DialogButton=l,t.DialogButton=l,l})}else{var i=e(t._,t.Khoai,t.Khoai.EventEmitter||t.EventEmitter,t.Khoai.PreOptions||t.PreOptions,t.Khoai.Template||t.Template);t.Khoai.DialogButton=i,t.DialogButton=i}}(this,function(t,e,n,i,o){function s(t){return t.isVisible()&&t.isEnable()&&t.getDialog().isClickable()}function a(t){t.addListener("listen",l),t.addListener("unlisten",r),t.addListener("dialog.toggle_enable",u),t.addListener("dialog.toggle_pending",p)}function l(t){_[this.id].dialog=t}function r(t){_[this.id].dialog=null}function u(t){this.toggleEnable(t)}function p(t){this.options.disable_on_pending&&this.toggleEnable(!t)}function c(t){this.type_prefix="dialog_button",n.call(this),this.options=i.get(h.PRE_OPTIONS_NAME,{name:this.id}),_[this.id]={dialog:null,enabled:!0,visible:!0,template_instance:null},this.option(this.options),t&&(t.hasOwnProperty("events")&&(this.addListeners(t.events),delete t.events),this.option(t)),a(this)}var h={PRE_OPTIONS_NAME:"Khoai.DialogButton",TEMPLATE_TYPE:"DialogButton",TYPE_INFO:"info",TYPE_PRIMARY:"primary",TYPE_SUCCESS:"success",TYPE_WARNING:"warning",TYPE_DANGER:"danger",OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",RETRY:"retry",BUTTONS_OK_ONLY:["ok"],BUTTONS_OK_CANCEL:["ok","cancel"],BUTTONS_YES_NO:["yes","no"],BUTTONS_YES_NO_CANCEL:["yes","no","cancel"],BUTTONS_RETRY_CANCEL:["retry","cancel"]},_={};i.define(h.PRE_OPTIONS_NAME,{label:"Untitled",icon:"",type:h.TYPE_INFO,size:1,handler:null,disable_on_pending:!0,clickable:s,template_name:"",template:{}}),e.util.inherit(c,n),e.util.defineConstant(c,"version","0.0.1"),e.util.defineConstant(c,h),c.globalOption=function(t){i.update(c.PRE_OPTIONS_NAME,t)},c.prototype.setTemplate=function(t){if(!(t instanceof o))throw new Error("Invalid Template instance");_[this.id].template_instance&&(_[this.id].template_instance.disconnect(),_[this.id].template_instance=null),t.option(this.options.template),_[this.id].template_instance=t,t.connect(this)},c.prototype.getTemplate=function(){if(!_[this.id].template_instance){if(!this.options.template_name){var t=i.get(c.PRE_OPTIONS_NAME);if(t.template_name&&o.hasTemplate(c.TEMPLATE_TYPE,t.template_name))this.options.template_name=t.template_name;else{var e=o.defaultTemplate(c.TEMPLATE_TYPE);if(!1===e)throw new Error("Dialog button default template not found");this.options.template_name=e,i.update(c.PRE_OPTIONS_NAME,{template_name:e})}}this.setTemplate(o.templateInstance(c.TEMPLATE_TYPE,this.options.template_name))}return _[this.id].template_instance},c.prototype.option=function(n,i){var s=e.util.beObject.apply(e,t.toArray(arguments));return s.template_name&&this.setTemplate(o.templateInstance(c.TEMPLATE_TYPE,s.template_name)),s.template&&this.getTemplate().option(s.template),t.extend(this.options,t.omit(s,["template_name"])),this},c.prototype.setHandler=function(t){this.option("handler",t)},c.prototype.getDialog=function(){return!!_[this.id].dialog&&_[this.id].dialog},c.prototype.isClickable=function(){return t.isFunction(this.options.clickable)?this.options.clickable.call(this,this):Boolean(this.options.clickable)},c.prototype.isVisible=function(){return Boolean(_[this.id].visible)},c.prototype.isEnable=function(){return Boolean(_[this.id].enabled)},c.prototype.click=function(){return!!this.isClickable()&&(this.emitEvent("click"),this.options.handler&&e.util.callFunc(this.options.handler,this,this),this.emitEvent("clicked"),!0)},c.prototype.toggle=function(e){t.isUndefined(e)&&(e=!_[this.id].visible),_[this.id].visible!==e&&(_[this.id].visible=e,e?this.emitEvent("show"):this.emitEvent("hide"),this.emitEvent("toggle",e))},c.prototype.show=function(){this.toggle(!0)},c.prototype.hide=function(){this.toggle(!1)},c.prototype.toggleEnable=function(e){t.isUndefined(e)&&(e=!_[this.id].enabled),_[this.id].enabled!==e&&(_[this.id].enabled=e,this.emitEvent(e?"enabled":"disabled"),this.emitEvent("toggle_enable",e))},c.prototype.disable=function(){this.toggleEnable(!1)},c.prototype.enable=function(){this.toggleEnable(!0)},c.prototype.render=function(){return this.getTemplate().render()},c.prototype.reDraw=function(){return!!_[this.id].template_instance&&_[this.id].template_instance.reDraw()},c.prototype.getDOM=function(){return!!(_[this.id].template_instance&&_[this.id].template_instance instanceof o)&&_[this.id].template_instance.getDOM()},c.prototype.getOtherButton=function(t){return this.getDialog().getButton(t)},c.prototype.getCloseKey=function(){return this.options.name},c.prototype.closeDialog=function(t){var e=this.getDialog();return!!e&&(e.close(t,this.getCloseKey()),!0)},c.prototype.wasCloseDialog=function(){var t=this.getDialog();return!!t&&t.setClosedBy(this)};var d={};return c.isDefined=function(t){return d.hasOwnProperty(t)},c.define=function(e,n,i){d[e]={options:t.isObject(n)?n:{},freeze_options:t.isObject(i)?i:{}},d[e].freeze_options.name=e},c.updateOptions=function(e,n){return!!c.isDefined(e)&&(t.extend(d[e].options,n),!0)},c.factory=function(e,n,i){t.isObject(n)||(n={}),t.isObject(i)||(i={});var o=t.castArray(e).map(function(e){var o,s;if(!c.isDefined(e))throw new Error("Dialog Button type is unregistered");return s=d[e],o=t.extend({},s.options,t.clone(n),i.hasOwnProperty(e)?i[e]:{},s.freeze_options),new c(o)});return 1===o.length?o.shift():o},c.defaultClickable=s,t.each(["Ok","Yes","No","Retry","Ignore"],function(t){c.define(t.toLowerCase(),{label:t})}),c.define("cancel",{label:"Cancel",disable_on_pending:!1}),function(){function t(t){t.getDialog()&&t.closeDialog(Boolean(t.options.force))}e.util.defineConstant(c,{CLOSE:"close"}),c.define(c.CLOSE,{label:"Close",type:c.TYPE_INFO,force:!1},{handler:t})}(),c}),function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","jquery","khoaijs","khoaijs-event-emitter","khoaijs-pre-options","khoaijs-template","dialog_button"];define(n,function(n,i,o,s,a,l,r){var u=e(n,i,o,s,a,l,r);return o.Dialog=u,t.Dialog=u,u})}else{var i=e(t._,t.jQuery,t.Khoai,t.Khoai&&t.Khoai.EventEmitter||t.EventEmitter,t.Khoai&&t.Khoai.PreOptions||t.PreOptions,t.Khoai&&t.Khoai.Template||t.Template,t.Khoai&&t.Khoai.DialogButton||t.DialogButton);t.Khoai.Dialog=i,t.Dialog=i}}(this,function(t,e,n,i,o,s,a){function l(t){return t.isEnable()}function r(t){return t.isEnable()}function u(t){var e={status:h.STATUS_INITIAL,enabled:!0,pending:!1,loading:!1,ajax_worker:null,template_instance:null};_.hasOwnProperty(t)&&(e.template_instance=_[t].template_instance),_[t]=e}function p(e){if(this.type_prefix="dialog",i.call(this),this.options=o.get(h.PRE_OPTIONS_NAME),this.closed_by="",this.data={},this.buttons={},u(this.id),this.option(this.options),e){if(e.hasOwnProperty("events")&&e.events&&(this.addListeners(e.events),delete e.events),e.hasOwnProperty("buttons")&&e.buttons){var n=this;t.each(e.buttons,function(t){n.attachButton(t)}),e.buttons=null,delete e.buttons}this.option(e)}}function c(e){t.isFunction(this.options.content_handler)&&(e=this.options.content_handler(e,this)),this.emitEvent("content_loaded",e),this.updateContent(e)}var h={PRE_OPTIONS_NAME:"Khoai.Dialog",TEMPLATE_TYPE:"Dialog",STATUS_INITIAL:"initial",STATUS_OPENED:"opened",STATUS_HIDING:"hiding",STATUS_CLOSED:"removed",TYPE_INFO:"info",TYPE_SUCCESS:"success",TYPE_PRIMARY:"primary",TYPE_WARNING:"warning",TYPE_DANGER:"danger",SIZE_SMALL:"small",SIZE_NORMAL:"normal",SIZE_LARGE:"large"},_={};return o.define(h.PRE_OPTIONS_NAME,{title:"Dialog",type:h.TYPE_INFO,content:"",content_handler:null,template_name:"",template:{},size:h.SIZE_NORMAL,classes:"",closable:l,clickable:r}),n.util.inherit(p,i),n.util.defineConstant(p,"version","0.0.1"),n.util.defineConstant(p,h),p.globalOption=function(t){o.update(p.PRE_OPTIONS_NAME,t)},p.prototype.getContent=function(){return t.isFunction(this.options.content)&&(this.emitEvent("load_content"),this.options.content=this.options.content(c.bind(this),this)),t.isFunction(this.options.content_handler)?this.options.content_handler(this.options.content,this):this.options.content},p.prototype.updateContent=function(t){this.options.content=t||this.options.content,t=this.getContent(),this.isOpened()&&this.emitEvent("update_content",t)},p.prototype.setTemplate=function(t){if(!this.isIniting())throw new Error("Dialog is opened");if(!(t instanceof s))throw new Error("Invalid Template instance");_[this.id].template_instance&&(_[this.id].template_instance.disconnect(),_[this.id].template_instance=null),t.option(this.options.template),_[this.id].template_instance=t,t.connect(this)},p.prototype.getTemplate=function(){if(!_[this.id].template_instance){if(!this.options.template_name){var t=o.get(p.PRE_OPTIONS_NAME);if(t.template_name&&s.hasTemplate(p.TEMPLATE_TYPE,t.template_name))this.options.template_name=t.template_name;else{var e=s.defaultTemplate(p.TEMPLATE_TYPE);if(!1===e)throw new Error("Dialog default template not found");this.options.template_name=e,o.update(p.PRE_OPTIONS_NAME,{template_name:e})}}this.setTemplate(s.templateInstance(p.TEMPLATE_TYPE,this.options.template_name))}return _[this.id].template_instance},p.prototype.option=function(e,i){var o=n.util.beObject.apply(n,t.toArray(arguments));return o.template_name&&this.setTemplate(s.templateInstance(p.TEMPLATE_TYPE,o.template_name)),o.template&&this.getTemplate().option(o.template),t.extend(this.options,o),this},p.prototype.status=function(){return!!_.hasOwnProperty(this.id)&&_[this.id].status},p.prototype.isIniting=function(){return this.status()===p.STATUS_INITIAL},p.prototype.isOpened=function(){return-1!==[p.STATUS_OPENED,p.STATUS_HIDING].indexOf(this.status())},p.prototype.isVisibling=function(){return this.status()===p.STATUS_OPENED},p.prototype.isHiding=function(){return this.status()===p.STATUS_HIDING},p.prototype.isClosed=function(){return this.status()===p.STATUS_CLOSED},p.prototype.isEnable=function(){return Boolean(_[this.id].enabled)},p.prototype.isPending=function(){return Boolean(_[this.id].pending)},p.prototype.enable=function(){return!this.isEnable()&&(_[this.id].enabled=!0,this.emitEvent("enabled"),this.emitEvent("toggle_enable",!0),!0)},p.prototype.disable=function(){return!!this.isEnable()&&(_[this.id].enabled=!1,this.emitEvent("disabled"),this.emitEvent("toggle_enable",!1),!0)},p.prototype.pending=function(){return!this.isPending()&&(_[this.id].pending=!0,this.emitEvent("pending"),this.emitEvent("toggle_pending",!0),!0)},p.prototype.resolved=function(){return!!this.isPending()&&(_[this.id].pending=!1,this.emitEvent("resolved"),this.emitEvent("toggle_pending",!1),!0)},p.prototype.attachButton=function(e){if(!(e instanceof a))if(t.isObject(e))e=new a(e);else{if(!t.isString(e)&&!t.isNumber(e)||!a.has(e))throw new Error("Invalid button");e=a.factory(e)}return this.buttons[e.options.name]=e,e.listen(this,"dialog"),e},p.prototype.attachMultiButtons=function(e){var n=this;t.each(e,function(t){n.attachButton(t)})},p.prototype.hasButton=function(t){return this.buttons.hasOwnProperty(t)},p.prototype.getButton=function(t){if(!this.hasButton(t))throw new Error("Get unattached button");return this.buttons[t]},p.prototype.removeButton=function(t){if(!this.hasButton(t))throw new Error("Remove unattached button");this.buttons[t].unlisten(this),delete this.buttons[t]},p.prototype.isClickable=function(){return!this.options.clickable||(t.isFunction(this.options.clickable)?this.options.clickable(this):Boolean(this.options.clickable))},p.prototype.click=function(t){if(this.isClickable()&&this.hasButton(t)){this.getButton(t).click(),this.emitEvent("clicked",t)}return!1},p.prototype.isCloseable=function(){return!!this.isOpened()&&(!this.options.closable||(t.isFunction(this.options.closable)?this.options.closable(this):Boolean(this.options.closable)))},p.prototype.open=function(){return this.status()===p.STATUS_INITIAL&&(_[this.id].template_instance||this.getTemplate(),this.closed_by="",_[this.id].status=p.STATUS_OPENED,this.emitEvent("open"),!0)},p.prototype.hide=function(){return!!this.isVisibling()&&(this.emitEvent("hide"),_[this.id].status=p.STATUS_HIDING,!0)},p.prototype.show=function(){return!!this.isHiding()&&(this.emitEvent("show"),_[this.id].status=p.STATUS_OPENED,!0)},p.prototype.close=function(t,e){return!(this.isClosed()||!t&&!this.isCloseable())&&(e=e||"",this.emitEvent("close",t,e),u(this.id),_[this.id].status=p.STATUS_CLOSED,this.closed_by=e,this.emitEvent("closed",t,e),this.reset(),!0)},p.prototype.setClosedBy=function(e){return!!this.isClosed()&&(e||(e=""),e instanceof a&&(e=e.getCloseKey()),t.isString(e)||(e+=""),this.closed_by=e,!0)},p.prototype.isClosedBy=function(e){return!!this.isClosed()&&(e||(e=""),e instanceof a&&(e=e.getCloseKey()),t.isString(e)||(e+=""),this.closed_by===e)},p.prototype.getDOM=function(){return!!(_[this.id].template_instance&&_[this.id].template_instance instanceof s)&&_[this.id].template_instance.getDOM()},p}),function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","jquery","khoaijs","khoaijs-pre-options","khoaijs-ajax","../dialog-button","../dialog"];require(n,e)}else e(t._,t.jQuery||t.$,t.Khoai,t.Khoai&&t.Khoai.PreOptions||t.PreOptions,t.Khoai&&t.Khoai.Ajax||t.Ajax,t.Khoai&&t.Khoai.DialogButton||t.DialogButton,t.Khoai&&t.Khoai.Dialog||t.Dialog)}(this,function(t,e,n,i,o,s,a){function l(t){return function(e){var i=e.getDialog();e.closeDialog(!0),n.util.callFunc(t,[e.options.name,null,e,i],i)}}function r(i,o){return function(s){var a=this.getDialog(),l=e(a.data.form_selector),r=!0;if(c(a,!1),o.validator&&(r=o.validator(l,a)),!0!==r)return void(t.isString(r)&&c(a,r));n.util.callFunc(i,[s.options.name,l,s,a],a)}}function u(t){return['<form><div class="dialog_form_message"></div>',t,'<input type="submit" style="display: none;"/></form>'].join("")}function p(e){return t.isArray(e)||(e+"").split(" "),e=t.flatten(t.castArray(e)),t.isEmpty(e)?"":t.map(e,function(t){return t.trim()?"."+t:""}).join("")}function c(t,n){var i=e(t.data.form_selector+" "+t.data.form_message_selector);i.length&&(n?i.html(n).show():i.html("").hide())}function h(t,e){var n="#"+t.getTemplate().getDOMID(),i=n+" form"+p(e.form_classes),o=i+" "+e.message_classes?p(e.message_classes):".dialog_form_message";t.data.form_selector=i,t.data.form_message_selector=o}function _(t){t.getFormDOM=function(){return e(t.data.form_selector)},t.updateFormMessage=function(e){c(t,e)},t.clearFormMessage=function(){c(t,!1)},t.getFormData=function(){return n.jForm?n.jForm.getFormData(this.getFormDOM()):(console.warn("Method getFormData require module jForm"),{})}}function d(t,n){function i(e){return e.preventDefault(),n.submit_button_name&&t.click(n.submit_button_name),!1}t.on("open",function(){e("body").on("submit",this.data.form_selector,i)}),t.on("closed",function(){if(!this.closed_by&&n.cancel_button_name){if(!this.hasButton(n.cancel_button_name))throw new Error("Invalid default button");this.buttons[n.cancel_button_name].click()}},{key:"default_close_button"}),t.on("closed",function(){e("body").off("submit",this.data.form_selector,i)})}n.util.defineConstant(a,{DYNAMIC_CONTENT_PRE_OPTIONS_NAME:"Khoai.Dialog.DynamicContent"}),i.define(a.DYNAMIC_CONTENT_PRE_OPTIONS_NAME,{loading:"Loading content..."}),a.dynamicContent=function(e){var n=null;return t.isString(e)&&(e={url:e}),e=i.get(a.DYNAMIC_CONTENT_PRE_OPTIONS_NAME,e),function(i,s){if(!t.isNull(n))return n;var a=new o(t.omit(e,"loading"));return a.done(function(t){n=t+"",i(n)}),a.fail(function(){s.emitEvent("load_content_failed"),i(e.error_content||"Get dynamic content failed")}),a.option("before_send",function(){return s.emitEvent("load_content"),s.pending(),!0}),a.always(function(){s.emitEvent("load_content_complete"),s.resolved()}),s.addListener("close",function(){a.abort()}),a.request(),e.loading}},a.box=function(e,n){n=n||{},t.isString(n)&&(n={title:n+""}),n.content=e,n.template||(n.template={}),n.template=t.defaults(n.template,{has_footer:!1,has_header:!1,close_manual:!1});var i=new a(n);return i.open(),i},n.util.defineConstant(a,{DIALOG_ALERT_PRE_OPTIONS_NAME:"Khoai.Dialog.Alert"}),i.define(a.DIALOG_ALERT_PRE_OPTIONS_NAME,{title:"Alert",close_button_options:{}}),a.alert=function(e,n){t.isString(n)&&(n={title:n+""}),n=t.extend({title:"Alert"},i.get(a.DIALOG_ALERT_PRE_OPTIONS_NAME,n),{content:e});var o=new a(t.omit(n,"close_button_options"));return o.attachButton(s.factory(s.CLOSE,n.close_button_options)),o.open(),o},n.util.defineConstant(a,{DIALOG_CONFIRM_PRE_OPTIONS_NAME:"Khoai.Dialog.Confirm"}),i.define(a.DIALOG_CONFIRM_PRE_OPTIONS_NAME,{title:"Confirm",default_button:null,buttons:[]}),a.confirm=function(e,o,l){var r;return t.isObject(l)||(l={title:l+""}),t.isFunction(o)||(o=t.noop),l=t.extend(i.get(a.DIALOG_CONFIRM_PRE_OPTIONS_NAME,l),{content:e}),t.isEmpty(l.buttons)&&(l.buttons=s.factory(s.BUTTONS_YES_NO)),r=new a(t.omit(l,"default_button")),t.each(r.buttons,function(t){t.setHandler(function(){this.closeDialog(),o(this.options.name)})}),l.default_button||(l.default_button=t.last(Object.keys(r.buttons))),r.on("closed",function(){this.closed_by||n.util.callFunc(o,l.default_button,null)},{key:"default_button"}),r.open(),r},n.util.defineConstant(a,{DIALOG_IFRAME_PRE_OPTIONS_NAME:"Khoai.Dialog.iFrame"}),i.define(a.DIALOG_IFRAME_PRE_OPTIONS_NAME,{title:"iFrame",attributes:{}}),a.iFrame=function(e,n){var o,s=[],l=[];return t.isObject(n)||(n={title:n+""}),n=i.get(a.DIALOG_IFRAME_PRE_OPTIONS_NAME,n),t.each(n.attributes,function(e,n){t.isBoolean(e)?e&&s.push(n+'="'+n+'"'):s.push(n+'="'+e+'"')}),l.push('<div class="embed-responsive embed-responsive-16by9">'),l.push('<iframe class="embed-responsive-item" src="'+e+'" '+s.join(" ")+"></iframe>"),l.push("</div>"),n.content=l.join("\n"),o=new a(n),o.open(),o},s.define("submit",{label:"Submit"}),n.util.defineConstant(s,{SUBMIT:"submit",SUBMIT_CANCEL:["submit","cancel"]}),n.util.defineConstant(a,{DIALOG_FORM_PRE_OPTIONS_NAME:"Khoai.Dialog.Form"}),i.define(a.DIALOG_FORM_PRE_OPTIONS_NAME,{title:"Form",form_classes:"",message_classes:"dialog_form_message",validator:null,auto_focus:!0,submit_button_name:"submit",cancel_button_name:"cancel",buttons:[],buttons_extend_options:{}}),a.form=function(e,n,o){var p=new a;return t.isFunction(n)||(n=t.noop),o=t.extend(i.get(a.DIALOG_FORM_PRE_OPTIONS_NAME,o),{content:e,content_handler:u}),t.isEmpty(o.buttons)&&(o.buttons=s.factory(s.SUBMIT_CANCEL,{},{cancel:{handler:l(n)},submit:{handler:r(n,o)}})),p.option(t.omit(o,["form_classes","message_classes","validator","submit_button_name","cancel_button_name","buttons","buttons_extend_options"])),t.each(o.buttons,function(e){var n=p.attachButton(e);o.buttons_extend_options.hasOwnProperty(n.options.name)&&n.option(t.clone(o.buttons_extend_options[n.options.name]))}),h(p,o),_(p),d(p,o),p.open(),o.auto_focus&&setTimeout(function(){p.getDOM().find("input:visible, textarea:visible").first().focus()},500),p},n.util.defineConstant(a,{DIALOG_PROMPT_PRE_OPTIONS_NAME:"Khoai.Dialog.prompt"}),i.define(a.DIALOG_PROMPT_PRE_OPTIONS_NAME,{title:"Prompt",default_value:"",placeholder:"",input_type:"text",input_classes:"form-control",buttons_extend_options:{submit:{label:"Ok"}}}),a.prompt=function(e,n,o){function s(t,e,i){if(!e)return void n(!1);var s=o.default_value;"submit"===t&&(s=e.find('input[name="prompt_data"]').val(),i.closeDialog()),n(s)}var l=[];return t.isObject(o)||(o={title:o+""}),t.isFunction(n)||(n=t.noop),o=i.get(a.DIALOG_PROMPT_PRE_OPTIONS_NAME,o),l.push("<p>",e,"</p>"),l.push('<input name="prompt_data" type="',o.input_type+'" ','class="',o.input_classes+'" ','value="',o.default_value+'"','placeholder="',o.placeholder+'"',"/>"),a.form(l.join(""),s,t.omit(o,"default_value","placeholder","input_type","input_classes"))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpYWxvZy5taW4uanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJkZXBlbmRlbmNpZXMiLCJfIiwiS2hvYWkiLCJFdmVudEVtaXR0ZXIiLCJQcmVPcHRpb25zIiwiVGVtcGxhdGUiLCJtb2R1bGUiLCJEaWFsb2dCdXR0b24iLCJ0aGlzIiwiX2RlZmF1bHRfY2xpY2thYmxlX2NiIiwiYnV0dG9uIiwiaXNWaXNpYmxlIiwiaXNFbmFibGUiLCJnZXREaWFsb2ciLCJpc0NsaWNrYWJsZSIsIl9pbml0X2J0biIsImluc3RhbmNlIiwiYWRkTGlzdGVuZXIiLCJfYnRuX2V2ZW50X2F0dGFjaGVkIiwiX2J0bl9ldmVudF9kZXRhY2hlZCIsIl9idG5fZXZlbnRfZGlhbG9nX3RvZ2dsZV9lbmFibGUiLCJfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfcGVuZGluZyIsImRpYWxvZyIsIl9idXR0b25zIiwiaWQiLCJub3RpY2VfZGF0YSIsInRvZ2dsZUVuYWJsZSIsIm9wdGlvbnMiLCJkaXNhYmxlX29uX3BlbmRpbmciLCJvcHRpb24iLCJ0eXBlX3ByZWZpeCIsImNhbGwiLCJnZXQiLCJjb25zdGFudCIsIlBSRV9PUFRJT05TX05BTUUiLCJuYW1lIiwiZW5hYmxlZCIsInZpc2libGUiLCJ0ZW1wbGF0ZV9pbnN0YW5jZSIsImhhc093blByb3BlcnR5IiwiYWRkTGlzdGVuZXJzIiwiZXZlbnRzIiwiVEVNUExBVEVfVFlQRSIsIlRZUEVfSU5GTyIsIlRZUEVfUFJJTUFSWSIsIlRZUEVfU1VDQ0VTUyIsIlRZUEVfV0FSTklORyIsIlRZUEVfREFOR0VSIiwiT0siLCJDQU5DRUwiLCJZRVMiLCJOTyIsIlJFVFJZIiwiQlVUVE9OU19PS19PTkxZIiwiQlVUVE9OU19PS19DQU5DRUwiLCJCVVRUT05TX1lFU19OTyIsIkJVVFRPTlNfWUVTX05PX0NBTkNFTCIsIkJVVFRPTlNfUkVUUllfQ0FOQ0VMIiwibGFiZWwiLCJpY29uIiwidHlwZSIsInNpemUiLCJoYW5kbGVyIiwiY2xpY2thYmxlIiwidGVtcGxhdGVfbmFtZSIsInRlbXBsYXRlIiwidXRpbCIsImluaGVyaXQiLCJkZWZpbmVDb25zdGFudCIsImdsb2JhbE9wdGlvbiIsInVwZGF0ZSIsInByb3RvdHlwZSIsInNldFRlbXBsYXRlIiwiRXJyb3IiLCJkaXNjb25uZWN0IiwiY29ubmVjdCIsImdldFRlbXBsYXRlIiwiZGVmYXVsdF9vcHRpb25zIiwiaGFzVGVtcGxhdGUiLCJkZWZhdWx0X3RlbXBsYXRlIiwiZGVmYXVsdFRlbXBsYXRlIiwidGVtcGxhdGVJbnN0YW5jZSIsInZhbHVlIiwiYmVPYmplY3QiLCJhcHBseSIsInRvQXJyYXkiLCJhcmd1bWVudHMiLCJleHRlbmQiLCJvbWl0Iiwic2V0SGFuZGxlciIsImNhbGxiYWNrIiwiaXNGdW5jdGlvbiIsIkJvb2xlYW4iLCJjbGljayIsImVtaXRFdmVudCIsImNhbGxGdW5jIiwidG9nZ2xlIiwic2hvdyIsImlzVW5kZWZpbmVkIiwiaGlkZSIsImlzX2VuYWJsZSIsImRpc2FibGUiLCJlbmFibGUiLCJyZW5kZXIiLCJyZURyYXciLCJnZXRET00iLCJnZXRPdGhlckJ1dHRvbiIsImdldEJ1dHRvbiIsImdldENsb3NlS2V5IiwiY2xvc2VEaWFsb2ciLCJmb3JjZSIsImNsb3NlIiwid2FzQ2xvc2VEaWFsb2ciLCJzZXRDbG9zZWRCeSIsImJ1dHRvbl9wcmVfb3B0aW9ucyIsImlzRGVmaW5lZCIsImZyZWV6ZV9vcHRpb25zIiwiaXNPYmplY3QiLCJ1cGRhdGVPcHRpb25zIiwidHlwZXMiLCJhbGxfYnV0dG9uX29wdGlvbnMiLCJidXR0b25fb3B0aW9ucyIsImJ1dHRvbnMiLCJjYXN0QXJyYXkiLCJtYXAiLCJ0eXBlX29wdGlvbnMiLCJjbG9uZSIsImxlbmd0aCIsInNoaWZ0IiwiZGVmYXVsdENsaWNrYWJsZSIsImVhY2giLCJ0b0xvd2VyQ2FzZSIsIl9jbG9zZV9kaWFsb2dfaGFuZGxlciIsIkNMT1NFIiwialF1ZXJ5IiwiRGlhbG9nIiwiX2RlZmF1bHRfY2xvc2FibGVfZnVuYyIsImRpYWxvZ19pbnN0YW5jZSIsIl9kZWZhdWx0X2NsaWNrYWJsZV9mdW5jIiwicmVzZXREaWFsb2ciLCJkYXRhIiwic3RhdHVzIiwiU1RBVFVTX0lOSVRJQUwiLCJwZW5kaW5nIiwibG9hZGluZyIsImFqYXhfd29ya2VyIiwiX2RpYWxvZ3MiLCJjbG9zZWRfYnkiLCJzZWxmIiwiYXR0YWNoQnV0dG9uIiwidXBkYXRlRGlhbG9nQ29udGVudENhbGxiYWNrIiwiY29udGVudCIsImNvbnRlbnRfaGFuZGxlciIsInVwZGF0ZUNvbnRlbnQiLCJTVEFUVVNfT1BFTkVEIiwiU1RBVFVTX0hJRElORyIsIlNUQVRVU19DTE9TRUQiLCJTSVpFX1NNQUxMIiwiU0laRV9OT1JNQUwiLCJTSVpFX0xBUkdFIiwidGl0bGUiLCJjbGFzc2VzIiwiY2xvc2FibGUiLCJnZXRDb250ZW50IiwiYmluZCIsIm5ld19jb250ZW50IiwiaXNPcGVuZWQiLCJpc0luaXRpbmciLCJpbmRleE9mIiwiaXNWaXNpYmxpbmciLCJpc0hpZGluZyIsImlzQ2xvc2VkIiwiaXNQZW5kaW5nIiwicmVzb2x2ZWQiLCJpc1N0cmluZyIsImlzTnVtYmVyIiwiaGFzIiwibGlzdGVuIiwiYXR0YWNoTXVsdGlCdXR0b25zIiwiaGFzQnV0dG9uIiwicmVtb3ZlQnV0dG9uIiwidW5saXN0ZW4iLCJidXR0b25fbmFtZSIsImlzQ2xvc2VhYmxlIiwib3BlbiIsImJ5IiwicmVzZXQiLCJpc0Nsb3NlZEJ5IiwicmVxdWlyZSIsIiQiLCJBamF4IiwiY3JlYXRlQ2FuY2VsQnV0dG9uSGFuZGxlciIsImNyZWF0ZUJ1dHRvbnNIYW5kbGVyIiwiZm9ybSIsInZhbGlkYXRlX3Jlc3VsdCIsInVwZGF0ZUZvcm1NZXNzYWdlIiwidmFsaWRhdG9yIiwiZGlhbG9nRm9ybUNvbnRlbnRIYW5kbGVyIiwiam9pbiIsImNsYXNzZXNUb1NlbGVjdG9yIiwiaXNBcnJheSIsInNwbGl0IiwiZmxhdHRlbiIsImlzRW1wdHkiLCJjbGFzc19uYW1lIiwidHJpbSIsIm1lc3NhZ2UiLCJtZXNzYWdlX2RvbSIsImh0bWwiLCJhZGREaWFsb2dEYXRhIiwiZGlhbG9nX2RvbV9pZCIsImdldERPTUlEIiwiZm9ybV9zZWxlY3RvciIsImZvcm1fY2xhc3NlcyIsImZvcm1fbWVzc2FnZV9zZWxlY3RvciIsIm1lc3NhZ2VfY2xhc3NlcyIsImFkZERpYWxvZ01ldGhvZHMiLCJnZXRGb3JtRE9NIiwiY2xlYXJGb3JtTWVzc2FnZSIsImdldEZvcm1EYXRhIiwiakZvcm0iLCJjb25zb2xlIiwid2FybiIsImFkZERpYWxvZ0V2ZW50cyIsImZvcm1fc3VibWl0X2V2ZW50X2xpc3RlbmVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdF9idXR0b25fbmFtZSIsIm9uIiwiY2FuY2VsX2J1dHRvbl9uYW1lIiwia2V5Iiwib2ZmIiwiRFlOQU1JQ19DT05URU5UX1BSRV9PUFRJT05TX05BTUUiLCJkeW5hbWljQ29udGVudCIsInVybCIsInVwZGF0ZV9jb250ZW50X2NiIiwiaXNOdWxsIiwiYXciLCJkb25lIiwicmVzcG9uc2UiLCJmYWlsIiwiZXJyb3JfY29udGVudCIsImFsd2F5cyIsImFib3J0IiwicmVxdWVzdCIsImJveCIsImRlZmF1bHRzIiwiaGFzX2Zvb3RlciIsImhhc19oZWFkZXIiLCJjbG9zZV9tYW51YWwiLCJESUFMT0dfQUxFUlRfUFJFX09QVElPTlNfTkFNRSIsImNsb3NlX2J1dHRvbl9vcHRpb25zIiwiYWxlcnQiLCJESUFMT0dfQ09ORklSTV9QUkVfT1BUSU9OU19OQU1FIiwiZGVmYXVsdF9idXR0b24iLCJjb25maXJtIiwibm9vcCIsImxhc3QiLCJPYmplY3QiLCJrZXlzIiwiRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FIiwiYXR0cmlidXRlcyIsImlGcmFtZSIsImF0dHJzIiwidmFsIiwiaXNCb29sZWFuIiwicHVzaCIsIlNVQk1JVCIsIlNVQk1JVF9DQU5DRUwiLCJESUFMT0dfRk9STV9QUkVfT1BUSU9OU19OQU1FIiwiYXV0b19mb2N1cyIsImJ1dHRvbnNfZXh0ZW5kX29wdGlvbnMiLCJjYW5jZWwiLCJzdWJtaXQiLCJhdHRhY2hlZF9idXR0b24iLCJzZXRUaW1lb3V0IiwiZmluZCIsImZpcnN0IiwiZm9jdXMiLCJESUFMT0dfUFJPTVBUX1BSRV9PUFRJT05TX05BTUUiLCJkZWZhdWx0X3ZhbHVlIiwicGxhY2Vob2xkZXIiLCJpbnB1dF90eXBlIiwiaW5wdXRfY2xhc3NlcyIsInByb21wdCIsInByb21wdF9jYiIsImJ0bl9uYW1lIiwiYnRuIl0sIm1hcHBpbmdzIjoiQ0FBQyxTQUFVQSxFQUFNQyxHQUNiLEdBQXNCLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFBSyxDQUM1QyxHQUFJQyxJQUNBLFNBQ0EsVUFDQSx3QkFDQSxzQkFDQSxtQkFFSkYsUUFBT0UsRUFBYyxTQUFVQyxFQUFHQyxFQUFPQyxFQUFjQyxFQUFZQyxHQUMvRCxHQUFJQyxHQUFTVCxFQUFRSSxFQUFHQyxFQUFPQyxFQUFjQyxFQUFZQyxFQUt6RCxPQUhBSCxHQUFNSyxhQUFlRCxFQUNyQlYsRUFBS1csYUFBZUQsRUFFYkEsUUFFUixDQUNILEdBQUlBLEdBQVNULEVBQ1RELEVBQUtLLEVBQ0xMLEVBQUtNLE1BQ0xOLEVBQUtNLE1BQU1DLGNBQWdCUCxFQUFLTyxhQUNoQ1AsRUFBS00sTUFBTUUsWUFBY1IsRUFBS1EsV0FDOUJSLEVBQUtNLE1BQU1HLFVBQVlULEVBQUtTLFNBR2hDVCxHQUFLTSxNQUFNSyxhQUFlRCxFQUMxQlYsRUFBS1csYUFBZUQsSUFFMUJFLEtBQU0sU0FBVVAsRUFBR0MsRUFBT0MsRUFBY0MsRUFBWUMsR0FvQ2xELFFBQVNJLEdBQXNCQyxHQUMzQixNQUFPQSxHQUFPQyxhQUFlRCxFQUFPRSxZQUFjRixFQUFPRyxZQUFZQyxjQUd6RSxRQUFTQyxHQUFVQyxHQUNmQSxFQUFTQyxZQUFZLFNBQVVDLEdBQy9CRixFQUFTQyxZQUFZLFdBQVlFLEdBQ2pDSCxFQUFTQyxZQUFZLHVCQUF3QkcsR0FDN0NKLEVBQVNDLFlBQVksd0JBQXlCSSxHQUdsRCxRQUFTSCxHQUFv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YkMsV0FBWSxPQUNaQyxjQUFlLGVBQ2ZaLHdCQUNJRSxRQUNJdk4sTUFBTyxTQUluQjZFLEVBQU9xSixPQUFTLFNBQVU5RSxFQUFTcEgsRUFBVS9ELEdBc0J6QyxRQUFTa1EsR0FBVUMsRUFBVTdGLEVBQU04RixHQUMvQixJQUFLOUYsRUFFRCxXQURBdkcsSUFBUyxFQUliLElBQUlSLEdBQVF2RCxFQUFRNlAsYUFFaEIsWUFBYU0sSUFDYjVNLEVBQVErRyxFQUFLbUYsS0FBSyw2QkFBNkJaLE1BQy9DdUIsRUFBSWxMLGVBR1JuQixFQUFTUixHQWxDYixHQUFJcUUsS0F1Q0osT0FwQ0t0SixHQUFFb0gsU0FBUzFGLEtBQ1pBLEdBQ0lxSSxNQUFPckksRUFBVSxLQUdwQjFCLEVBQUUwRixXQUFXRCxLQUNkQSxFQUFXekYsRUFBRStQLE1BR2pCck8sRUFBVXZCLEVBQVc0QixJQUFJdUcsRUFBT2dKLCtCQUFnQzVQLEdBRWhFNEgsRUFBUW1ILEtBQUssTUFBTzVELEVBQVMsUUFDN0J2RCxFQUFRbUgsS0FBSyxtQ0FBb0MvTyxFQUFRK1AsV0FBYSxLQUNsRSxVQUFXL1AsRUFBUWdRLGNBQWdCLEtBQ25DLFVBQVdoUSxFQUFRNlAsY0FBZ0IsSUFDbkMsZ0JBQWlCN1AsRUFBUThQLFlBQWMsSUFDdkMsTUFrQktsSixFQUFPMEQsS0FBSzFDLEVBQVErQyxLQUFLLElBQUt1RixFQUFXNVIsRUFBRXVGLEtBQUs3RCxFQUFTLGdCQUFpQixjQUFlLGFBQWMiLCJmaWxlIjoiZGlhbG9nLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgICAgICdsb2Rhc2gnLFxuICAgICAgICAgICAgJ2tob2FpanMnLFxuICAgICAgICAgICAgJ2tob2FpanMtZXZlbnQtZW1pdHRlcicsXG4gICAgICAgICAgICAna2hvYWlqcy1wcmUtb3B0aW9ucycsXG4gICAgICAgICAgICAna2hvYWlqcy10ZW1wbGF0ZSdcbiAgICAgICAgXTtcbiAgICAgICAgZGVmaW5lKGRlcGVuZGVuY2llcywgZnVuY3Rpb24gKF8sIEtob2FpLCBFdmVudEVtaXR0ZXIsIFByZU9wdGlvbnMsIFRlbXBsYXRlKSB7XG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gZmFjdG9yeShfLCBLaG9haSwgRXZlbnRFbWl0dGVyLCBQcmVPcHRpb25zLCBUZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIEtob2FpLkRpYWxvZ0J1dHRvbiA9IG1vZHVsZTtcbiAgICAgICAgICAgIHJvb3QuRGlhbG9nQnV0dG9uID0gbW9kdWxlO1xuXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbW9kdWxlID0gZmFjdG9yeShcbiAgICAgICAgICAgIHJvb3QuXyxcbiAgICAgICAgICAgIHJvb3QuS2hvYWksXG4gICAgICAgICAgICByb290Lktob2FpLkV2ZW50RW1pdHRlciB8fCByb290LkV2ZW50RW1pdHRlcixcbiAgICAgICAgICAgIHJvb3QuS2hvYWkuUHJlT3B0aW9ucyB8fCByb290LlByZU9wdGlvbnMsXG4gICAgICAgICAgICByb290Lktob2FpLlRlbXBsYXRlIHx8IHJvb3QuVGVtcGxhdGVcbiAgICAgICAgKTtcblxuICAgICAgICByb290Lktob2FpLkRpYWxvZ0J1dHRvbiA9IG1vZHVsZTtcbiAgICAgICAgcm9vdC5EaWFsb2dCdXR0b24gPSBtb2R1bGU7XG4gICAgfVxufSh0aGlzLCBmdW5jdGlvbiAoXywgS2hvYWksIEV2ZW50RW1pdHRlciwgUHJlT3B0aW9ucywgVGVtcGxhdGUpIHtcbiAgICB2YXIgdmVyc2lvbiA9ICcwLjAuMSc7XG4gICAgdmFyIGNvbnN0YW50ID0ge1xuICAgICAgICBQUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nQnV0dG9uJyxcbiAgICAgICAgVEVNUExBVEVfVFlQRTogJ0RpYWxvZ0J1dHRvbicsXG4gICAgICAgIFRZUEVfSU5GTzogJ2luZm8nLFxuICAgICAgICBUWVBFX1BSSU1BUlk6ICdwcmltYXJ5JyxcbiAgICAgICAgVFlQRV9TVUNDRVNTOiAnc3VjY2VzcycsXG4gICAgICAgIFRZUEVfV0FSTklORzogJ3dhcm5pbmcnLFxuICAgICAgICBUWVBFX0RBTkdFUjogJ2RhbmdlcicsXG5cbiAgICAgICAgT0s6ICdvaycsXG4gICAgICAgIENBTkNFTDogJ2NhbmNlbCcsXG4gICAgICAgIFlFUzogJ3llcycsXG4gICAgICAgIE5POiAnbm8nLFxuICAgICAgICBSRVRSWTogJ3JldHJ5JyxcblxuICAgICAgICBCVVRUT05TX09LX09OTFk6IFsnb2snXSxcbiAgICAgICAgQlVUVE9OU19PS19DQU5DRUw6IFsnb2snLCAnY2FuY2VsJ10sXG4gICAgICAgIEJVVFRPTlNfWUVTX05POiBbJ3llcycsICdubyddLFxuICAgICAgICBCVVRUT05TX1lFU19OT19DQU5DRUw6IFsneWVzJywgJ25vJywgJ2NhbmNlbCddLFxuICAgICAgICBCVVRUT05TX1JFVFJZX0NBTkNFTDogWydyZXRyeScsICdjYW5jZWwnXVxuICAgIH07XG4gICAgdmFyIF9idXR0b25zID0ge307XG5cbiAgICBQcmVPcHRpb25zLmRlZmluZShjb25zdGFudC5QUkVfT1BUSU9OU19OQU1FLCB7XG4gICAgICAgIGxhYmVsOiAnVW50aXRsZWQnLFxuICAgICAgICBpY29uOiAnJyxcbiAgICAgICAgdHlwZTogY29uc3RhbnQuVFlQRV9JTkZPLFxuICAgICAgICBzaXplOiAxLFxuICAgICAgICBoYW5kbGVyOiBudWxsLFxuICAgICAgICBkaXNhYmxlX29uX3BlbmRpbmc6IHRydWUsXG4gICAgICAgIGNsaWNrYWJsZTogX2RlZmF1bHRfY2xpY2thYmxlX2NiLFxuICAgICAgICB0ZW1wbGF0ZV9uYW1lOiAnJyxcbiAgICAgICAgdGVtcGxhdGU6IHt9XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gX2RlZmF1bHRfY2xpY2thYmxlX2NiKGJ1dHRvbikge1xuICAgICAgICByZXR1cm4gYnV0dG9uLmlzVmlzaWJsZSgpICYmIGJ1dHRvbi5pc0VuYWJsZSgpICYmIGJ1dHRvbi5nZXREaWFsb2coKS5pc0NsaWNrYWJsZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9pbml0X2J0bihpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZS5hZGRMaXN0ZW5lcignbGlzdGVuJywgX2J0bl9ldmVudF9hdHRhY2hlZCk7XG4gICAgICAgIGluc3RhbmNlLmFkZExpc3RlbmVyKCd1bmxpc3RlbicsIF9idG5fZXZlbnRfZGV0YWNoZWQpO1xuICAgICAgICBpbnN0YW5jZS5hZGRMaXN0ZW5lcignZGlhbG9nLnRvZ2dsZV9lbmFibGUnLCBfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfZW5hYmxlKTtcbiAgICAgICAgaW5zdGFuY2UuYWRkTGlzdGVuZXIoJ2RpYWxvZy50b2dnbGVfcGVuZGluZycsIF9idG5fZXZlbnRfZGlhbG9nX3RvZ2dsZV9wZW5kaW5nKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYnRuX2V2ZW50X2F0dGFjaGVkKGRpYWxvZykge1xuICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXS5kaWFsb2cgPSBkaWFsb2c7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2J0bl9ldmVudF9kZXRhY2hlZChkaWFsb2cpIHtcbiAgICAgICAgX2J1dHRvbnNbdGhpcy5pZF0uZGlhbG9nID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfZW5hYmxlKG5vdGljZV9kYXRhKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKG5vdGljZV9kYXRhKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfcGVuZGluZyhub3RpY2VfZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVfb25fcGVuZGluZykge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVFbmFibGUoIW5vdGljZV9kYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIERpYWxvZ0J1dHRvbihvcHRpb24pIHtcbiAgICAgICAgdGhpcy50eXBlX3ByZWZpeCA9ICdkaWFsb2dfYnV0dG9uJztcbiAgICAgICAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zID0gUHJlT3B0aW9ucy5nZXQoY29uc3RhbnQuUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5pZFxuICAgICAgICB9KTtcblxuICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXSA9IHtcbiAgICAgICAgICAgIGRpYWxvZzogbnVsbCxcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGVfaW5zdGFuY2U6IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9wdGlvbih0aGlzLm9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChvcHRpb24pIHtcbiAgICAgICAgICAgIGlmIChvcHRpb24uaGFzT3duUHJvcGVydHkoJ2V2ZW50cycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcnMob3B0aW9uLmV2ZW50cyk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvblsnZXZlbnRzJ107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMub3B0aW9uKG9wdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBfaW5pdF9idG4odGhpcyk7XG4gICAgfVxuXG4gICAgS2hvYWkudXRpbC5pbmhlcml0KERpYWxvZ0J1dHRvbiwgRXZlbnRFbWl0dGVyKTtcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZ0J1dHRvbiwgJ3ZlcnNpb24nLCB2ZXJzaW9uKTtcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZ0J1dHRvbiwgY29uc3RhbnQpO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3t9fSBvcHRpb25zXG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLmdsb2JhbE9wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIFByZU9wdGlvbnMudXBkYXRlKERpYWxvZ0J1dHRvbi5QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5zZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZV9pbnN0YW5jZSkge1xuICAgICAgICBpZiAoISh0ZW1wbGF0ZV9pbnN0YW5jZSBpbnN0YW5jZW9mIFRlbXBsYXRlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFRlbXBsYXRlIGluc3RhbmNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2J1dHRvbnNbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRlbXBsYXRlX2luc3RhbmNlLm9wdGlvbih0aGlzLm9wdGlvbnMudGVtcGxhdGUpO1xuICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSA9IHRlbXBsYXRlX2luc3RhbmNlO1xuICAgICAgICB0ZW1wbGF0ZV9pbnN0YW5jZS5jb25uZWN0KHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRlbXBsYXRlIGluc3RhbmNlXG4gICAgICogQHJldHVybnMge251bGx8Kn1cbiAgICAgKi9cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIV9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy50ZW1wbGF0ZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRfb3B0aW9ucyA9IFByZU9wdGlvbnMuZ2V0KERpYWxvZ0J1dHRvbi5QUkVfT1BUSU9OU19OQU1FKTtcblxuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0X29wdGlvbnMudGVtcGxhdGVfbmFtZSAmJiBUZW1wbGF0ZS5oYXNUZW1wbGF0ZShEaWFsb2dCdXR0b24uVEVNUExBVEVfVFlQRSwgZGVmYXVsdF9vcHRpb25zLnRlbXBsYXRlX25hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy50ZW1wbGF0ZV9uYW1lID0gZGVmYXVsdF9vcHRpb25zLnRlbXBsYXRlX25hbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRfdGVtcGxhdGUgPSBUZW1wbGF0ZS5kZWZhdWx0VGVtcGxhdGUoRGlhbG9nQnV0dG9uLlRFTVBMQVRFX1RZUEUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWxzZSAhPT0gZGVmYXVsdF90ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnRlbXBsYXRlX25hbWUgPSBkZWZhdWx0X3RlbXBsYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgUHJlT3B0aW9ucy51cGRhdGUoRGlhbG9nQnV0dG9uLlBSRV9PUFRJT05TX05BTUUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZV9uYW1lOiBkZWZhdWx0X3RlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGlhbG9nIGJ1dHRvbiBkZWZhdWx0IHRlbXBsYXRlIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIHRoaXMuc2V0VGVtcGxhdGUoVGVtcGxhdGUudGVtcGxhdGVJbnN0YW5jZShEaWFsb2dCdXR0b24uVEVNUExBVEVfVFlQRSwgdGhpcy5vcHRpb25zLnRlbXBsYXRlX25hbWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZTtcbiAgICB9O1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUub3B0aW9uID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHZhciBvcHRpb24gPSBLaG9haS51dGlsLmJlT2JqZWN0LmFwcGx5KEtob2FpLCBfLnRvQXJyYXkoYXJndW1lbnRzKSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbi50ZW1wbGF0ZV9uYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnNldFRlbXBsYXRlKFRlbXBsYXRlLnRlbXBsYXRlSW5zdGFuY2UoRGlhbG9nQnV0dG9uLlRFTVBMQVRFX1RZUEUsIG9wdGlvbi50ZW1wbGF0ZV9uYW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbi50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUZW1wbGF0ZSgpLm9wdGlvbihvcHRpb24udGVtcGxhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgXy5leHRlbmQodGhpcy5vcHRpb25zLCBfLm9taXQob3B0aW9uLCBbJ3RlbXBsYXRlX25hbWUnXSkpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLnNldEhhbmRsZXIgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5vcHRpb24oJ2hhbmRsZXInLCBjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldCBkaWFsb2cgaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyB7KERpYWxvZ3xib29sZWFuKX0gRmFsc2UgaWYgbm90IGF0dGFjaCB0byBkaWFsb2cgeWV0XG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5nZXREaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfYnV0dG9uc1t0aGlzLmlkXS5kaWFsb2cpIHtcbiAgICAgICAgICAgIHJldHVybiBfYnV0dG9uc1t0aGlzLmlkXS5kaWFsb2c7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuaXNDbGlja2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLmNsaWNrYWJsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xpY2thYmxlLmNhbGwodGhpcywgdGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLm9wdGlvbnMuY2xpY2thYmxlKTtcbiAgICB9O1xuXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5pc1Zpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKF9idXR0b25zW3RoaXMuaWRdLnZpc2libGUpO1xuICAgIH07XG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5pc0VuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oX2J1dHRvbnNbdGhpcy5pZF0uZW5hYmxlZCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENsaWNrIGJ1dHRvblxuICAgICAqIEVtaXQgZXZlbnRzOlxuICAgICAqIC0gY2xpY2s6IHJ1biBiZWZvcmUgYnV0dG9uIGhhbmRsZXIgcnVuXG4gICAgICogLSBjbGlja2VkOiBydW5nIGFmdGVyIGJ1dHRvbiBoYW5kbGVyIHJ1blxuICAgICAqXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDbGlja2FibGUoKSkge1xuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2NsaWNrJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBLaG9haS51dGlsLmNhbGxGdW5jKHRoaXMub3B0aW9ucy5oYW5kbGVyLCB0aGlzLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdjbGlja2VkJyk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2hvdyBvciBoaWRlIGJ1dHRvblxuICAgICAqIEVtaXQgZXZlbnRzOlxuICAgICAqIC0gc2hvdy9oaWRlXG4gICAgICogLSB0b2dnbGU6IFtpcyBzaG93P11cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3cgVHJ1ZSBvciBtaXNzaW5nOiBzaG93LCBGYWxzZTogaGlkZVxuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKHNob3cpIHtcbiAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQoc2hvdykpIHtcbiAgICAgICAgICAgIHNob3cgPSAhX2J1dHRvbnNbdGhpcy5pZF0udmlzaWJsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfYnV0dG9uc1t0aGlzLmlkXS52aXNpYmxlICE9PSBzaG93KSB7XG4gICAgICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXS52aXNpYmxlID0gc2hvdztcbiAgICAgICAgICAgIGlmIChzaG93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3Nob3cnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2hpZGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3RvZ2dsZScsIHNob3cpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlKHRydWUpO1xuICAgIH07XG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZShmYWxzZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBlbmFibGVkIHN0YXR1c1xuICAgICAqIEVtaXQgZXZlbnRzOlxuICAgICAqIC0gZW5hYmxlZC9kaXNhYmxlZFxuICAgICAqIC0gdG9nZ2xlX2VuYWJsZWQ6IFtpcyBlbmFibGVkP11cbiAgICAgKiBAcGFyYW0gaXNfZW5hYmxlXG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS50b2dnbGVFbmFibGUgPSBmdW5jdGlvbiAoaXNfZW5hYmxlKSB7XG4gICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKGlzX2VuYWJsZSkpIHtcbiAgICAgICAgICAgIGlzX2VuYWJsZSA9ICFfYnV0dG9uc1t0aGlzLmlkXS5lbmFibGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9idXR0b25zW3RoaXMuaWRdLmVuYWJsZWQgIT09IGlzX2VuYWJsZSkge1xuICAgICAgICAgICAgX2J1dHRvbnNbdGhpcy5pZF0uZW5hYmxlZCA9IGlzX2VuYWJsZTtcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KGlzX2VuYWJsZSA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3RvZ2dsZV9lbmFibGUnLCBpc19lbmFibGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVFbmFibGUoZmFsc2UpO1xuICAgIH07XG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKHRydWUpO1xuICAgIH07XG5cblxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUZW1wbGF0ZSgpLnJlbmRlcigpO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2ggYnV0dG9uIERPTVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUucmVEcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX2J1dHRvbnNbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZS5yZURyYXcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmdldERPTSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlICYmIChfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSBpbnN0YW5jZW9mIFRlbXBsYXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlLmdldERPTSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZVxuICAgICAqIEByZXR1cm5zIHtEaWFsb2dCdXR0b258bnVsbHwqfE9iamVjdHxFdmVudEVtaXR0ZXJ8RGlhbG9nfVxuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuZ2V0T3RoZXJCdXR0b24gPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXREaWFsb2coKS5nZXRCdXR0b24obmFtZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERpYWxvZyBjbG9zZSBcImJ5XCIga2V5XG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmdldENsb3NlS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm5hbWU7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgZGlhbG9nXG4gICAgICogQHBhcmFtIGZvcmNlXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5jbG9zZURpYWxvZyA9IGZ1bmN0aW9uIChmb3JjZSkge1xuICAgICAgICB2YXIgZGlhbG9nID0gdGhpcy5nZXREaWFsb2coKTtcblxuICAgICAgICBpZiAoZGlhbG9nKSB7XG4gICAgICAgICAgICBkaWFsb2cuY2xvc2UoZm9yY2UsIHRoaXMuZ2V0Q2xvc2VLZXkoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBkaWFsb2cgY2xvc2VkIGJ5IHRoaXMgYnV0dG9uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS53YXNDbG9zZURpYWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRpYWxvZyA9IHRoaXMuZ2V0RGlhbG9nKCk7XG5cbiAgICAgICAgaWYgKGRpYWxvZykge1xuICAgICAgICAgICAgcmV0dXJuIGRpYWxvZy5zZXRDbG9zZWRCeSh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLypcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHwgU3RhdGljIG1ldGhvZHNcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgIHxcbiAgICAgKi9cblxuICAgIHZhciBidXR0b25fcHJlX29wdGlvbnMgPSB7fTtcblxuICAgIERpYWxvZ0J1dHRvbi5pc0RlZmluZWQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gYnV0dG9uX3ByZV9vcHRpb25zLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgIH07XG5cbiAgICBEaWFsb2dCdXR0b24uZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMsIGZyZWV6ZV9vcHRpb25zKSB7XG4gICAgICAgIGJ1dHRvbl9wcmVfb3B0aW9uc1tuYW1lXSA9IHtcbiAgICAgICAgICAgIG9wdGlvbnM6IF8uaXNPYmplY3Qob3B0aW9ucykgPyBvcHRpb25zIDoge30sXG4gICAgICAgICAgICBmcmVlemVfb3B0aW9uczogXy5pc09iamVjdChmcmVlemVfb3B0aW9ucykgPyBmcmVlemVfb3B0aW9ucyA6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGJ1dHRvbl9wcmVfb3B0aW9uc1tuYW1lXS5mcmVlemVfb3B0aW9ucy5uYW1lID0gbmFtZTtcbiAgICB9O1xuXG4gICAgRGlhbG9nQnV0dG9uLnVwZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbiAobmFtZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoRGlhbG9nQnV0dG9uLmlzRGVmaW5lZChuYW1lKSkge1xuICAgICAgICAgICAgXy5leHRlbmQoYnV0dG9uX3ByZV9vcHRpb25zW25hbWVdLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuXG4gICAgRGlhbG9nQnV0dG9uLmZhY3RvcnkgPSBmdW5jdGlvbiAodHlwZXMsIGFsbF9idXR0b25fb3B0aW9ucywgYnV0dG9uX29wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFfLmlzT2JqZWN0KGFsbF9idXR0b25fb3B0aW9ucykpIHtcbiAgICAgICAgICAgIGFsbF9idXR0b25fb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghXy5pc09iamVjdChidXR0b25fb3B0aW9ucykpIHtcbiAgICAgICAgICAgIGJ1dHRvbl9vcHRpb25zID0ge307XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYnV0dG9ucyA9IF8uY2FzdEFycmF5KHR5cGVzKS5tYXAoZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zLCB0eXBlX29wdGlvbnM7XG5cbiAgICAgICAgICAgIGlmICghRGlhbG9nQnV0dG9uLmlzRGVmaW5lZCh0eXBlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGlhbG9nIEJ1dHRvbiB0eXBlIGlzIHVucmVnaXN0ZXJlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0eXBlX29wdGlvbnMgPSBidXR0b25fcHJlX29wdGlvbnNbdHlwZV07XG4gICAgICAgICAgICBvcHRpb25zID0gXy5leHRlbmQoe30sXG4gICAgICAgICAgICAgICAgdHlwZV9vcHRpb25zLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgXy5jbG9uZShhbGxfYnV0dG9uX29wdGlvbnMpLFxuICAgICAgICAgICAgICAgIGJ1dHRvbl9vcHRpb25zLmhhc093blByb3BlcnR5KHR5cGUpID8gYnV0dG9uX29wdGlvbnNbdHlwZV0gOiB7fSxcbiAgICAgICAgICAgICAgICB0eXBlX29wdGlvbnMuZnJlZXplX29wdGlvbnMpO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IERpYWxvZ0J1dHRvbihvcHRpb25zKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGJ1dHRvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gYnV0dG9ucy5zaGlmdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbnM7XG4gICAgfTtcblxuICAgIERpYWxvZ0J1dHRvbi5kZWZhdWx0Q2xpY2thYmxlID0gX2RlZmF1bHRfY2xpY2thYmxlX2NiO1xuXG4gICAgLypcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHwgUHJlZGVmaW5lIGJ1dHRvbiB0eXBlc1xuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfFxuICAgICB8XG4gICAgIHxcbiAgICAgfFxuICAgICAqL1xuXG4gICAgXy5lYWNoKFsnT2snLCAnWWVzJywgJ05vJywgJ1JldHJ5JywgJ0lnbm9yZSddLCBmdW5jdGlvbiAobGFiZWwpIHtcbiAgICAgICAgRGlhbG9nQnV0dG9uLmRlZmluZShsYWJlbC50b0xvd2VyQ2FzZSgpLCB7XG4gICAgICAgICAgICBsYWJlbDogbGFiZWxcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBEaWFsb2dCdXR0b24uZGVmaW5lKCdjYW5jZWwnLCB7XG4gICAgICAgIGxhYmVsOiAnQ2FuY2VsJyxcbiAgICAgICAgZGlzYWJsZV9vbl9wZW5kaW5nOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2dCdXR0b24sIHtcbiAgICAgICAgICAgIENMT1NFOiAnY2xvc2UnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIF9jbG9zZV9kaWFsb2dfaGFuZGxlcihidXR0b24pIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2cgPSBidXR0b24uZ2V0RGlhbG9nKCk7XG5cbiAgICAgICAgICAgIGlmIChkaWFsb2cpIHtcbiAgICAgICAgICAgICAgICBidXR0b24uY2xvc2VEaWFsb2coQm9vbGVhbihidXR0b24ub3B0aW9ucy5mb3JjZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgRGlhbG9nQnV0dG9uLmRlZmluZShEaWFsb2dCdXR0b24uQ0xPU0UsIHtcbiAgICAgICAgICAgIGxhYmVsOiAnQ2xvc2UnLFxuICAgICAgICAgICAgdHlwZTogRGlhbG9nQnV0dG9uLlRZUEVfSU5GTyxcbiAgICAgICAgICAgIGZvcmNlOiBmYWxzZVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBoYW5kbGVyOiBfY2xvc2VfZGlhbG9nX2hhbmRsZXJcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuXG4gICAgcmV0dXJuIERpYWxvZ0J1dHRvbjtcbn0pKTtcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXHJcbiAgICAgICAgICAgICdsb2Rhc2gnLFxyXG4gICAgICAgICAgICAnanF1ZXJ5JyxcclxuICAgICAgICAgICAgJ2tob2FpanMnLFxyXG4gICAgICAgICAgICAna2hvYWlqcy1ldmVudC1lbWl0dGVyJyxcclxuICAgICAgICAgICAgJ2tob2FpanMtcHJlLW9wdGlvbnMnLFxyXG4gICAgICAgICAgICAna2hvYWlqcy10ZW1wbGF0ZScsXHJcbiAgICAgICAgICAgICdkaWFsb2dfYnV0dG9uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgZGVmaW5lKGRlcGVuZGVuY2llcywgZnVuY3Rpb24gKF8sIGpRdWVyeSwgS2hvYWksIEV2ZW50RW1pdHRlciwgUHJlT3B0aW9ucywgVGVtcGxhdGUsIERpYWxvZ0J1dHRvbikge1xyXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gZmFjdG9yeShfLCBqUXVlcnksIEtob2FpLCBFdmVudEVtaXR0ZXIsIFByZU9wdGlvbnMsIFRlbXBsYXRlLCBEaWFsb2dCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgS2hvYWkuRGlhbG9nID0gbW9kdWxlO1xyXG4gICAgICAgICAgICByb290LkRpYWxvZyA9IG1vZHVsZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xyXG4gICAgICAgIHZhciBtb2R1bGUgPSBmYWN0b3J5KFxyXG4gICAgICAgICAgICByb290Ll8sXHJcbiAgICAgICAgICAgIHJvb3QualF1ZXJ5LFxyXG4gICAgICAgICAgICByb290Lktob2FpLFxyXG4gICAgICAgICAgICAocm9vdC5LaG9haSAmJiByb290Lktob2FpLkV2ZW50RW1pdHRlcikgfHwgcm9vdC5FdmVudEVtaXR0ZXIsXHJcbiAgICAgICAgICAgIChyb290Lktob2FpICYmIHJvb3QuS2hvYWkuUHJlT3B0aW9ucykgfHwgcm9vdC5QcmVPcHRpb25zLFxyXG4gICAgICAgICAgICAocm9vdC5LaG9haSAmJiByb290Lktob2FpLlRlbXBsYXRlKSB8fCByb290LlRlbXBsYXRlLFxyXG4gICAgICAgICAgICAocm9vdC5LaG9haSAmJiByb290Lktob2FpLkRpYWxvZ0J1dHRvbikgfHwgcm9vdC5EaWFsb2dCdXR0b25cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByb290Lktob2FpLkRpYWxvZyA9IG1vZHVsZTtcclxuICAgICAgICByb290LkRpYWxvZyA9IG1vZHVsZTtcclxuICAgIH1cclxufSh0aGlzLCBmdW5jdGlvbiAoXywgalF1ZXJ5LCBLaG9haSwgRXZlbnRFbWl0dGVyLCBQcmVPcHRpb25zLCBUZW1wbGF0ZSwgRGlhbG9nQnV0dG9uKSB7XHJcbiAgICB2YXIgdmVyc2lvbiA9ICcwLjAuMSc7XHJcbiAgICB2YXIgY29uc3RhbnQgPSB7XHJcbiAgICAgICAgUFJFX09QVElPTlNfTkFNRTogJ0tob2FpLkRpYWxvZycsXHJcbiAgICAgICAgVEVNUExBVEVfVFlQRTogJ0RpYWxvZycsXHJcbiAgICAgICAgU1RBVFVTX0lOSVRJQUw6ICdpbml0aWFsJyxcclxuICAgICAgICBTVEFUVVNfT1BFTkVEOiAnb3BlbmVkJyxcclxuICAgICAgICBTVEFUVVNfSElESU5HOiAnaGlkaW5nJyxcclxuICAgICAgICBTVEFUVVNfQ0xPU0VEOiAncmVtb3ZlZCcsXHJcblxyXG4gICAgICAgIFRZUEVfSU5GTzogJ2luZm8nLFxyXG4gICAgICAgIFRZUEVfU1VDQ0VTUzogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIFRZUEVfUFJJTUFSWTogJ3ByaW1hcnknLFxyXG4gICAgICAgIFRZUEVfV0FSTklORzogJ3dhcm5pbmcnLFxyXG4gICAgICAgIFRZUEVfREFOR0VSOiAnZGFuZ2VyJyxcclxuXHJcbiAgICAgICAgU0laRV9TTUFMTDogJ3NtYWxsJyxcclxuICAgICAgICBTSVpFX05PUk1BTDogJ25vcm1hbCcsXHJcbiAgICAgICAgU0laRV9MQVJHRTogJ2xhcmdlJ1xyXG4gICAgfTtcclxuICAgIHZhciBfZGlhbG9ncyA9IHt9O1xyXG5cclxuICAgIGZ1bmN0aW9uIF9kZWZhdWx0X2Nsb3NhYmxlX2Z1bmMoZGlhbG9nX2luc3RhbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGRpYWxvZ19pbnN0YW5jZS5pc0VuYWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9kZWZhdWx0X2NsaWNrYWJsZV9mdW5jKGRpYWxvZ19pbnN0YW5jZSkge1xyXG4gICAgICAgIHJldHVybiBkaWFsb2dfaW5zdGFuY2UuaXNFbmFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBQcmVPcHRpb25zLmRlZmluZShjb25zdGFudC5QUkVfT1BUSU9OU19OQU1FLCB7XHJcbiAgICAgICAgdGl0bGU6ICdEaWFsb2cnLFxyXG4gICAgICAgIHR5cGU6IGNvbnN0YW50LlRZUEVfSU5GTyxcclxuICAgICAgICBjb250ZW50OiAnJyxcclxuICAgICAgICBjb250ZW50X2hhbmRsZXI6IG51bGwsXHJcbiAgICAgICAgdGVtcGxhdGVfbmFtZTogJycsXHJcbiAgICAgICAgdGVtcGxhdGU6IHt9LFxyXG4gICAgICAgIHNpemU6IGNvbnN0YW50LlNJWkVfTk9STUFMLFxyXG4gICAgICAgIGNsYXNzZXM6ICcnLFxyXG4gICAgICAgIGNsb3NhYmxlOiBfZGVmYXVsdF9jbG9zYWJsZV9mdW5jLFxyXG4gICAgICAgIGNsaWNrYWJsZTogX2RlZmF1bHRfY2xpY2thYmxlX2Z1bmNcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlc2V0RGlhbG9nKGlkKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHN0YXR1czogY29uc3RhbnQuU1RBVFVTX0lOSVRJQUwsXHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHBlbmRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgYWpheF93b3JrZXI6IG51bGwsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlX2luc3RhbmNlOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoX2RpYWxvZ3MuaGFzT3duUHJvcGVydHkoaWQpKSB7XHJcbiAgICAgICAgICAgIGRhdGEudGVtcGxhdGVfaW5zdGFuY2UgPSBfZGlhbG9nc1tpZF0udGVtcGxhdGVfaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfZGlhbG9nc1tpZF0gPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FuIGFkZCBldmVudHMgdG8gZGlhbG9nIGJ5IGFkZCBldmVudHMgdG8gb3B0aW9uIHBhcmFtZXRlciBmaWVsZCBhcyAnZXZlbnRzJ1xyXG4gICAgICogQWRkIGJ1dHRvbnMgdmlhIG9wdGlvbnMgcGFyYW1ldGVyIGZpZWxkIGFzICdidXR0b25zJ1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBEaWFsb2cgb3B0aW9uc1xyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAZXh0ZW5kIEV2ZW50RW1pdHRlclxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBEaWFsb2cob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMudHlwZV9wcmVmaXggPSAnZGlhbG9nJztcclxuXHJcbiAgICAgICAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IFByZU9wdGlvbnMuZ2V0KGNvbnN0YW50LlBSRV9PUFRJT05TX05BTUUpO1xyXG5cclxuICAgICAgICB0aGlzLmNsb3NlZF9ieSA9ICcnO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xyXG5cclxuICAgICAgICByZXNldERpYWxvZyh0aGlzLmlkKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcHRpb24odGhpcy5vcHRpb25zKTtcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2V2ZW50cycpICYmIG9wdGlvbnMuZXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVycyhvcHRpb25zLmV2ZW50cyk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9uc1snZXZlbnRzJ107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdidXR0b25zJykgJiYgb3B0aW9ucy5idXR0b25zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5lYWNoKG9wdGlvbnMuYnV0dG9ucywgZnVuY3Rpb24gKGJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYXR0YWNoQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zWydidXR0b25zJ10gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnNbJ2J1dHRvbnMnXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vcHRpb24ob3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEtob2FpLnV0aWwuaW5oZXJpdChEaWFsb2csIEV2ZW50RW1pdHRlcik7XHJcblxyXG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2csICd2ZXJzaW9uJywgdmVyc2lvbik7XHJcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZywgY29uc3RhbnQpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0dXAgZGVmYXVsdCBvcHRpb25zXHJcbiAgICAgKiBAcGFyYW0ge3t9fSBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5nbG9iYWxPcHRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIFByZU9wdGlvbnMudXBkYXRlKERpYWxvZy5QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlRGlhbG9nQ29udGVudENhbGxiYWNrKGNvbnRlbnQpIHtcclxuICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5jb250ZW50X2hhbmRsZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLm9wdGlvbnMuY29udGVudF9oYW5kbGVyKGNvbnRlbnQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXRFdmVudCgnY29udGVudF9sb2FkZWQnLCBjb250ZW50KTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnQoY29udGVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLmNvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdsb2FkX2NvbnRlbnQnKTtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRlbnQgPSB0aGlzLm9wdGlvbnMuY29udGVudCh1cGRhdGVEaWFsb2dDb250ZW50Q2FsbGJhY2suYmluZCh0aGlzKSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5jb250ZW50X2hhbmRsZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY29udGVudF9oYW5kbGVyKHRoaXMub3B0aW9ucy5jb250ZW50LCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY29udGVudDtcclxuICAgIH07XHJcbiAgICBEaWFsb2cucHJvdG90eXBlLnVwZGF0ZUNvbnRlbnQgPSBmdW5jdGlvbiAobmV3X2NvbnRlbnQpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMuY29udGVudCA9IG5ld19jb250ZW50IHx8IHRoaXMub3B0aW9ucy5jb250ZW50O1xyXG4gICAgICAgIG5ld19jb250ZW50ID0gdGhpcy5nZXRDb250ZW50KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3VwZGF0ZV9jb250ZW50JywgbmV3X2NvbnRlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEaWFsb2cucHJvdG90eXBlLnNldFRlbXBsYXRlID0gZnVuY3Rpb24gKHRlbXBsYXRlX2luc3RhbmNlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGluZygpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGlhbG9nIGlzIG9wZW5lZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISh0ZW1wbGF0ZV9pbnN0YW5jZSBpbnN0YW5jZW9mIFRlbXBsYXRlKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVGVtcGxhdGUgaW5zdGFuY2UnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRlbXBsYXRlX2luc3RhbmNlLm9wdGlvbih0aGlzLm9wdGlvbnMudGVtcGxhdGUpO1xyXG4gICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlID0gdGVtcGxhdGVfaW5zdGFuY2U7XHJcbiAgICAgICAgdGVtcGxhdGVfaW5zdGFuY2UuY29ubmVjdCh0aGlzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGVtcGxhdGUgaW5zdGFuY2VcclxuICAgICAqIEByZXR1cm5zIHtudWxsfFRlbXBsYXRlfVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudGVtcGxhdGVfbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRfb3B0aW9ucyA9IFByZU9wdGlvbnMuZ2V0KERpYWxvZy5QUkVfT1BUSU9OU19OQU1FKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdF9vcHRpb25zLnRlbXBsYXRlX25hbWUgJiYgVGVtcGxhdGUuaGFzVGVtcGxhdGUoRGlhbG9nLlRFTVBMQVRFX1RZUEUsIGRlZmF1bHRfb3B0aW9ucy50ZW1wbGF0ZV9uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy50ZW1wbGF0ZV9uYW1lID0gZGVmYXVsdF9vcHRpb25zLnRlbXBsYXRlX25hbWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0X3RlbXBsYXRlID0gVGVtcGxhdGUuZGVmYXVsdFRlbXBsYXRlKERpYWxvZy5URU1QTEFURV9UWVBFKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbHNlICE9PSBkZWZhdWx0X3RlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy50ZW1wbGF0ZV9uYW1lID0gZGVmYXVsdF90ZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJlT3B0aW9ucy51cGRhdGUoRGlhbG9nLlBSRV9PUFRJT05TX05BTUUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlX25hbWU6IGRlZmF1bHRfdGVtcGxhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEaWFsb2cgZGVmYXVsdCB0ZW1wbGF0ZSBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFRlbXBsYXRlKFRlbXBsYXRlLnRlbXBsYXRlSW5zdGFuY2UoRGlhbG9nLlRFTVBMQVRFX1RZUEUsIHRoaXMub3B0aW9ucy50ZW1wbGF0ZV9uYW1lKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2U7XHJcbiAgICB9O1xyXG5cclxuICAgIERpYWxvZy5wcm90b3R5cGUub3B0aW9uID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbiA9IEtob2FpLnV0aWwuYmVPYmplY3QuYXBwbHkoS2hvYWksIF8udG9BcnJheShhcmd1bWVudHMpKTtcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbi50ZW1wbGF0ZV9uYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGVtcGxhdGUoVGVtcGxhdGUudGVtcGxhdGVJbnN0YW5jZShEaWFsb2cuVEVNUExBVEVfVFlQRSwgb3B0aW9uLnRlbXBsYXRlX25hbWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbi50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmdldFRlbXBsYXRlKCkub3B0aW9uKG9wdGlvbi50ZW1wbGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLmV4dGVuZCh0aGlzLm9wdGlvbnMsIG9wdGlvbik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgZGlhbG9nIHN0YXR1c1xyXG4gICAgICogQHJldHVybnMge3N0cmluZ3xib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLnN0YXR1cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoX2RpYWxvZ3MuaGFzT3duUHJvcGVydHkodGhpcy5pZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9kaWFsb2dzW3RoaXMuaWRdLnN0YXR1cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzSW5pdGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMoKSA9PT0gRGlhbG9nLlNUQVRVU19JTklUSUFMO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBzdGF0dXMgaXM6IG9wZW5lZCwgc2hvd2luZyBvciBoaWRpbmdcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzT3BlbmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAtMSAhPT0gW0RpYWxvZy5TVEFUVVNfT1BFTkVELCBEaWFsb2cuU1RBVFVTX0hJRElOR10uaW5kZXhPZih0aGlzLnN0YXR1cygpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBzaG93aW5nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pc1Zpc2libGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMoKSA9PT0gRGlhbG9nLlNUQVRVU19PUEVORUQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIGlzIGhpZGluZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNIaWRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzKCkgPT09IERpYWxvZy5TVEFUVVNfSElESU5HO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIGlzIGNsb3NlZFxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNDbG9zZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzKCkgPT09IERpYWxvZy5TVEFUVVNfQ0xPU0VEO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIGlzIGVuYWJsZWRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzRW5hYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBCb29sZWFuKF9kaWFsb2dzW3RoaXMuaWRdLmVuYWJsZWQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIGlzIHBlbmRpbmdcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gQm9vbGVhbihfZGlhbG9nc1t0aGlzLmlkXS5wZW5kaW5nKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEVuYWJsZSBkaWFsb2cgd2hlbiBpdCBpcyBkaXNhYmxlZFxyXG4gICAgICogRW1pdCBldmVudHMgd2hlbiBlbmFibGVkIHN1Y2Nlc3M6XHJcbiAgICAgKiAtIGVuYWJsZWQ6XHJcbiAgICAgKiAtIHRvZ2dsZV9lbmFibGU6XHJcbiAgICAgKiAgICsgMDogdHJ1ZSBpZiBjaGFuZ2UgZXZlbnQgaXMgZW5hYmxlXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgb24gZW5hYmxlIHN1Y2Nlc3MsIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzRW5hYmxlKCkpIHtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0uZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnZW5hYmxlZCcpO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgndG9nZ2xlX2VuYWJsZScsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzYWJsZSBkaWFsb2cgd2hlbiBpdCBpcyBlbmFibGluZ1xyXG4gICAgICogRW1pdCBldmVudHMgd2hlbiBkaXNhYmxlIHN1Y2Nlc3M6XHJcbiAgICAgKiAtIGRpc2FibGVkOlxyXG4gICAgICogLSB0b2dnbGVfZW5hYmxlOlxyXG4gICAgICogICArIDA6IGZhbHNlIGlmIGNoYW5nZSBldmVudCBpcyBkaXNhYmxlXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgb24gZGlzYWJsZSBzdWNjZXNzLCBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLmVuYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgndG9nZ2xlX2VuYWJsZScsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBwZW5kaW5nIHN0YXR1cyBpcyBwZW5kaW5nXHJcbiAgICAgKiBFbWl0IGV2ZW50cyB3aGVuIGNoYW5nZSBzdWNjZXNzOlxyXG4gICAgICogLSBwZW5kaW5nOlxyXG4gICAgICogLSB0b2dnbGVfcGVuZGluZzpcclxuICAgICAqICAgKyAwOiB0cnVlIGlmIGNoYW5nZSB0byBwZW5kaW5nXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgb24gY2hhbmdlIHN1Y2Nlc3MsIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5wZW5kaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1BlbmRpbmcoKSkge1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS5wZW5kaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdwZW5kaW5nJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd0b2dnbGVfcGVuZGluZycsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHBlbmRpbmcgc3RhdHVzIGlzIHJlc29sdmVkXHJcbiAgICAgKiBFbWl0IGV2ZW50cyB3aGVuIGNoYW5nZSBzdWNjZXNzOlxyXG4gICAgICogLSByZXNvbHZlZDpcclxuICAgICAqIC0gdG9nZ2xlX3BlbmRpbmc6XHJcbiAgICAgKiAgICsgMDogZmFsc2UgaWYgY2hhbmdlIHRvIHJlc29sdmVkXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgb24gY2hhbmdlIHN1Y2Nlc3MsIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5yZXNvbHZlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1BlbmRpbmcoKSkge1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS5wZW5kaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgncmVzb2x2ZWQnKTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3RvZ2dsZV9wZW5kaW5nJywgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RGlhbG9nQnV0dG9ufG9iamVjdH0gYnV0dG9uIERpYWxvZ0J1dHRvbiBpbnN0YW5jZSBvciBidXR0b24gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmF0dGFjaEJ1dHRvbiA9IGZ1bmN0aW9uIChidXR0b24pIHtcclxuICAgICAgICBpZiAoIShidXR0b24gaW5zdGFuY2VvZiBEaWFsb2dCdXR0b24pKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmlzT2JqZWN0KGJ1dHRvbikpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbiA9IG5ldyBEaWFsb2dCdXR0b24oYnV0dG9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgoXy5pc1N0cmluZyhidXR0b24pIHx8IF8uaXNOdW1iZXIoYnV0dG9uKSkgJiYgRGlhbG9nQnV0dG9uLmhhcyhidXR0b24pKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24gPSBEaWFsb2dCdXR0b24uZmFjdG9yeShidXR0b24pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGJ1dHRvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJ1dHRvbnNbYnV0dG9uLm9wdGlvbnMubmFtZV0gPSBidXR0b247XHJcbiAgICAgICAgYnV0dG9uLmxpc3Rlbih0aGlzLCAnZGlhbG9nJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBidXR0b247XHJcbiAgICB9O1xyXG5cclxuICAgIERpYWxvZy5wcm90b3R5cGUuYXR0YWNoTXVsdGlCdXR0b25zID0gZnVuY3Rpb24gKGJ1dHRvbnMpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uZWFjaChidXR0b25zLCBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNoQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYnV0dG9uIGV4aXN0c1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmhhc0J1dHRvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldCBidXR0b24gaW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEJ1dHRvbiBuYW1lXHJcbiAgICAgKiBAcmV0dXJucyB7RGlhbG9nQnV0dG9ufVxyXG4gICAgICogQHRocm93IEdldCB1bmF0dGFjaGVkIGJ1dHRvblxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmdldEJ1dHRvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0J1dHRvbihuYW1lKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dldCB1bmF0dGFjaGVkIGJ1dHRvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uc1tuYW1lXTtcclxuICAgIH07XHJcbiAgICBEaWFsb2cucHJvdG90eXBlLnJlbW92ZUJ1dHRvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0J1dHRvbihuYW1lKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlbW92ZSB1bmF0dGFjaGVkIGJ1dHRvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJ1dHRvbnNbbmFtZV0udW5saXN0ZW4odGhpcyk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuYnV0dG9uc1tuYW1lXTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBjbGlja2FibGVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzQ2xpY2thYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xpY2thYmxlKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLmNsaWNrYWJsZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xpY2thYmxlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMub3B0aW9ucy5jbGlja2FibGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uIChidXR0b25fbmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ2xpY2thYmxlKCkgJiYgdGhpcy5oYXNCdXR0b24oYnV0dG9uX25hbWUpKSB7XHJcbiAgICAgICAgICAgIHZhciBidXR0b24gPSB0aGlzLmdldEJ1dHRvbihidXR0b25fbmFtZSk7XHJcblxyXG4gICAgICAgICAgICBidXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2NsaWNrZWQnLCBidXR0b25fbmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBjbG9zZWFibGVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzQ2xvc2VhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jbG9zYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuY2xvc2FibGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbG9zYWJsZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLm9wdGlvbnMuY2xvc2FibGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXR1cygpID09PSBEaWFsb2cuU1RBVFVTX0lOSVRJQUwpIHtcclxuICAgICAgICAgICAgaWYgKCFfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlZF9ieSA9ICcnO1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS5zdGF0dXMgPSBEaWFsb2cuU1RBVFVTX09QRU5FRDtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ29wZW4nKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZGUgZGlhbG9nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsaW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2hpZGUnKTtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0uc3RhdHVzID0gRGlhbG9nLlNUQVRVU19ISURJTkc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IGRpYWxvZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0hpZGluZygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdzaG93Jyk7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLnN0YXR1cyA9IERpYWxvZy5TVEFUVVNfT1BFTkVEO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2UgZGlhbG9nXHJcbiAgICAgKiBFbWl0IGV2ZW50OlxyXG4gICAgICogLSBjbG9zZVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VdIEZvcmNlIGNsb3NlIGRpYWxvZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtieV0gY2xvc2UgY2FsbGVyXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZm9yY2UsIGJ5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2xvc2VkKCkgJiYgKGZvcmNlIHx8IHRoaXMuaXNDbG9zZWFibGUoKSkpIHtcclxuICAgICAgICAgICAgYnkgPSBieSB8fCAnJztcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2Nsb3NlJywgZm9yY2UsIGJ5KTtcclxuXHJcbiAgICAgICAgICAgIHJlc2V0RGlhbG9nKHRoaXMuaWQpO1xyXG5cclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0uc3RhdHVzID0gRGlhbG9nLlNUQVRVU19DTE9TRUQ7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkX2J5ID0gYnk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnY2xvc2VkJywgZm9yY2UsIGJ5KTtcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgY2xvc2VkIGJ5IHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xEaWFsb2dCdXR0b259IGJ1dHRvblxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuc2V0Q2xvc2VkQnkgPSBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDbG9zZWQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChidXR0b24gaW5zdGFuY2VvZiBEaWFsb2dCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbi5nZXRDbG9zZUtleSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcoYnV0dG9uKSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uICs9ICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlZF9ieSA9IGJ1dHRvbjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBidXR0b24gd2FzIGNsb3NlIGRpYWxvZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8RGlhbG9nQnV0dG9ufSBidXR0b25cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzQ2xvc2VkQnkgPSBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDbG9zZWQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChidXR0b24gaW5zdGFuY2VvZiBEaWFsb2dCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbi5nZXRDbG9zZUtleSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcoYnV0dG9uKSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uICs9ICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZWRfYnkgPT09IGJ1dHRvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXRET00gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKF9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlICYmIChfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSBpbnN0YW5jZW9mIFRlbXBsYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UuZ2V0RE9NKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gRGlhbG9nO1xyXG59KSk7XG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICAgICAnbG9kYXNoJyxcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJ2tob2FpanMnLFxuICAgICAgICAgICAgJ2tob2FpanMtcHJlLW9wdGlvbnMnLFxuICAgICAgICAgICAgJ2tob2FpanMtYWpheCcsXG4gICAgICAgICAgICAnLi4vZGlhbG9nLWJ1dHRvbicsXG4gICAgICAgICAgICAnLi4vZGlhbG9nJ1xuICAgICAgICBdO1xuICAgICAgICByZXF1aXJlKGRlcGVuZGVuY2llcywgZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeShcbiAgICAgICAgICAgIHJvb3QuXyxcbiAgICAgICAgICAgIHJvb3QualF1ZXJ5IHx8IHJvb3QuJCxcbiAgICAgICAgICAgIHJvb3QuS2hvYWksXG4gICAgICAgICAgICAocm9vdC5LaG9haSAmJiByb290Lktob2FpLlByZU9wdGlvbnMpIHx8IHJvb3QuUHJlT3B0aW9ucyxcbiAgICAgICAgICAgIChyb290Lktob2FpICYmIHJvb3QuS2hvYWkuQWpheCkgfHwgcm9vdC5BamF4LFxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5EaWFsb2dCdXR0b24pIHx8IHJvb3QuRGlhbG9nQnV0dG9uLFxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5EaWFsb2cpIHx8IHJvb3QuRGlhbG9nXG4gICAgICAgICk7XG4gICAgfVxufSh0aGlzLCBmdW5jdGlvbiAoXywgalF1ZXJ5LCBLaG9haSwgUHJlT3B0aW9ucywgQWpheCwgRGlhbG9nQnV0dG9uLCBEaWFsb2cpIHtcbiAgICAvKlxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfCBEeW5hbWljIGNvbnRlbnRcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgIHxcbiAgICAgKi9cblxuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XG4gICAgICAgIERZTkFNSUNfQ09OVEVOVF9QUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nLkR5bmFtaWNDb250ZW50J1xuICAgIH0pO1xuICAgIFByZU9wdGlvbnMuZGVmaW5lKERpYWxvZy5EWU5BTUlDX0NPTlRFTlRfUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICBsb2FkaW5nOiAnTG9hZGluZyBjb250ZW50Li4uJ1xuICAgIH0pO1xuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gY29udGVudCBhcyBmdW5jdGlvbiB3aGljaCBwcm92aWRlIGR5bmFtaWMgY29udGVudCB2aWEgQWpheC5cbiAgICAgKiBDaGFuZ2UgZGlhbG9nJ3MgcGVuZGluZyBzdGF0dXMgb24gc3RhcnQgY29tcGxldGUgcmVxdWVzdFxuICAgICAqIERpYWxvZyB3aWxsIGVtaXQgZXZlbnRzOlxuICAgICAqIC0gbG9hZF9jb250ZW50OiBBamF4IGJlZ2luIHJlcXVlc3RcbiAgICAgKiAtIGxvYWRfY29udGVudF9mYWlsZWQ6IEFqYXggZXJyb3JcbiAgICAgKiAtIGxvYWRfY29udGVudF9jb21wbGV0ZTogQWpheCBjb21wbGV0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQWpheCBvcHRpb25zLiBEZWZhdWx0IG9wdGlvbnM6XG4gICAgICogLSBlcnJvcl9jb250ZW50OiBkZWZhdWx0IGVycm9yIGNvbnRlbnQgaWYgQWpheCBlcnJvci4gJ0dldCBkeW5hbWljIGNvbnRlbnQgZmFpbGVkJ1xuICAgICAqIC0gbG9hZGluZzogZGVmYXVsdCBsb2FkaW5nIGNvbnRlbnQuICdMb2FkaW5nIGNvbnRlbnQuLi4nLlxuICAgICAqXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIERpYWxvZy5keW5hbWljQ29udGVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gbnVsbDtcblxuICAgICAgICBpZiAoXy5pc1N0cmluZyhvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuRFlOQU1JQ19DT05URU5UX1BSRV9PUFRJT05TX05BTUUsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodXBkYXRlX2NvbnRlbnRfY2IsIGRpYWxvZykge1xuICAgICAgICAgICAgaWYgKCFfLmlzTnVsbChjb250ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYXcgPSBuZXcgQWpheChfLm9taXQob3B0aW9ucywgJ2xvYWRpbmcnKSk7XG5cbiAgICAgICAgICAgIGF3LmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IHJlc3BvbnNlICsgJyc7XG4gICAgICAgICAgICAgICAgdXBkYXRlX2NvbnRlbnRfY2IoY29udGVudCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXcuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZGlhbG9nLmVtaXRFdmVudCgnbG9hZF9jb250ZW50X2ZhaWxlZCcpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZV9jb250ZW50X2NiKG9wdGlvbnMuZXJyb3JfY29udGVudCB8fCAnR2V0IGR5bmFtaWMgY29udGVudCBmYWlsZWQnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhdy5vcHRpb24oJ2JlZm9yZV9zZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRpYWxvZy5lbWl0RXZlbnQoJ2xvYWRfY29udGVudCcpO1xuICAgICAgICAgICAgICAgIGRpYWxvZy5wZW5kaW5nKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhdy5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRpYWxvZy5lbWl0RXZlbnQoJ2xvYWRfY29udGVudF9jb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgIGRpYWxvZy5yZXNvbHZlZCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRpYWxvZy5hZGRMaXN0ZW5lcignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYXcuYWJvcnQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhdy5yZXF1ZXN0KCk7XG5cbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmxvYWRpbmc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLypcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHwgRGlhbG9nIEJveFxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfFxuICAgICB8IFNob3cgb25seSBkaWFsb2cgYm9keSwgbm8gaGVhZGVyLCBubyBmb290ZXJcbiAgICAgfFxuICAgICB8XG4gICAgICovXG5cbiAgICBEaWFsb2cuYm94ID0gZnVuY3Rpb24gKGNvbnRlbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKF8uaXNTdHJpbmcob3B0aW9ucykpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IG9wdGlvbnMgKyAnJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy5jb250ZW50ID0gY29udGVudDtcblxuICAgICAgICBpZiAoIW9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSBfLmRlZmF1bHRzKG9wdGlvbnMudGVtcGxhdGUsIHtcbiAgICAgICAgICAgIGhhc19mb290ZXI6IGZhbHNlLFxuICAgICAgICAgICAgaGFzX2hlYWRlcjogZmFsc2UsXG4gICAgICAgICAgICBjbG9zZV9tYW51YWw6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaWFsb2cgPSBuZXcgRGlhbG9nKG9wdGlvbnMpO1xuXG4gICAgICAgIGRpYWxvZy5vcGVuKCk7XG5cbiAgICAgICAgcmV0dXJuIGRpYWxvZztcbiAgICB9O1xuXG4gICAgLypcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHwgRGlhbG9nIEFsZXJ0XG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8XG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgICovXG5cbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZywge1xuICAgICAgICBESUFMT0dfQUxFUlRfUFJFX09QVElPTlNfTkFNRTogJ0tob2FpLkRpYWxvZy5BbGVydCdcbiAgICB9KTtcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0FMRVJUX1BSRV9PUFRJT05TX05BTUUsIHtcbiAgICAgICAgdGl0bGU6ICdBbGVydCcsXG4gICAgICAgIGNsb3NlX2J1dHRvbl9vcHRpb25zOiB7fVxuICAgIH0pO1xuXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBvcHRpb25zIFN0cmluZzogdGl0bGUsIG9iamVjdDogb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2cuYWxlcnQgPSBmdW5jdGlvbiAobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoXy5pc1N0cmluZyhvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogb3B0aW9ucyArICcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zID0gXy5leHRlbmQoe1xuICAgICAgICAgICAgdGl0bGU6ICdBbGVydCdcbiAgICAgICAgfSwgUHJlT3B0aW9ucy5nZXQoRGlhbG9nLkRJQUxPR19BTEVSVF9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKSwge1xuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlhbG9nID0gbmV3IERpYWxvZyhfLm9taXQob3B0aW9ucywgJ2Nsb3NlX2J1dHRvbl9vcHRpb25zJykpO1xuXG4gICAgICAgIGRpYWxvZy5hdHRhY2hCdXR0b24oRGlhbG9nQnV0dG9uLmZhY3RvcnkoRGlhbG9nQnV0dG9uLkNMT1NFLCBvcHRpb25zLmNsb3NlX2J1dHRvbl9vcHRpb25zKSk7XG5cbiAgICAgICAgZGlhbG9nLm9wZW4oKTtcblxuICAgICAgICByZXR1cm4gZGlhbG9nO1xuICAgIH07XG5cblxuICAgIC8qXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8IERpYWxvZyBDb25maXJtXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8XG4gICAgIHxcbiAgICAgfFxuICAgICAqL1xuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XG4gICAgICAgIERJQUxPR19DT05GSVJNX1BSRV9PUFRJT05TX05BTUU6ICdLaG9haS5EaWFsb2cuQ29uZmlybSdcbiAgICB9KTtcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0NPTkZJUk1fUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICB0aXRsZTogJ0NvbmZpcm0nLFxuICAgICAgICBkZWZhdWx0X2J1dHRvbjogbnVsbCxcbiAgICAgICAgYnV0dG9uczogW11cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2cuY29uZmlybSA9IGZ1bmN0aW9uIChtZXNzYWdlLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGlhbG9nO1xuXG4gICAgICAgIGlmICghXy5pc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogb3B0aW9ucyArICcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IF8ubm9vcDtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZChQcmVPcHRpb25zLmdldChEaWFsb2cuRElBTE9HX0NPTkZJUk1fUFJFX09QVElPTlNfTkFNRSwgb3B0aW9ucyksIHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKF8uaXNFbXB0eShvcHRpb25zLmJ1dHRvbnMpKSB7XG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMgPSBEaWFsb2dCdXR0b24uZmFjdG9yeShEaWFsb2dCdXR0b24uQlVUVE9OU19ZRVNfTk8pO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nID0gbmV3IERpYWxvZyhfLm9taXQob3B0aW9ucywgJ2RlZmF1bHRfYnV0dG9uJykpO1xuXG4gICAgICAgIF8uZWFjaChkaWFsb2cuYnV0dG9ucywgZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICAgICAgYnV0dG9uLnNldEhhbmRsZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLm9wdGlvbnMubmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFvcHRpb25zLmRlZmF1bHRfYnV0dG9uKSB7XG4gICAgICAgICAgICBvcHRpb25zLmRlZmF1bHRfYnV0dG9uID0gXy5sYXN0KE9iamVjdC5rZXlzKGRpYWxvZy5idXR0b25zKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL0RlZmF1bHQgYnV0dG9uXG4gICAgICAgIGRpYWxvZy5vbignY2xvc2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NlZF9ieSkge1xuICAgICAgICAgICAgICAgIEtob2FpLnV0aWwuY2FsbEZ1bmMoY2FsbGJhY2ssIG9wdGlvbnMuZGVmYXVsdF9idXR0b24sIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkZWZhdWx0X2J1dHRvbidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlhbG9nLm9wZW4oKTtcblxuICAgICAgICByZXR1cm4gZGlhbG9nO1xuICAgIH07XG5cblxuICAgIC8qXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8IERpYWxvZyBpRnJhbWVcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgICovXG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2csIHtcbiAgICAgICAgRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nLmlGcmFtZSdcbiAgICB9KTtcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FLCB7XG4gICAgICAgIHRpdGxlOiAnaUZyYW1lJyxcbiAgICAgICAgYXR0cmlidXRlczoge31cbiAgICB9KTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2cuaUZyYW1lID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGlhbG9nLFxuICAgICAgICAgICAgYXR0cnMgPSBbXSxcbiAgICAgICAgICAgIHRlbXBsYXRlID0gW107XG5cbiAgICAgICAgaWYgKCFfLmlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb25zICsgJydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKTtcblxuICAgICAgICBfLmVhY2gob3B0aW9ucy5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChfLmlzQm9vbGVhbih2YWwpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBhdHRycy5wdXNoKGtleSArICc9XCInICsga2V5ICsgJ1wiJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhdHRycy5wdXNoKGtleSArICc9XCInICsgdmFsICsgJ1wiJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlbXBsYXRlLnB1c2goJzxkaXYgY2xhc3M9XCJlbWJlZC1yZXNwb25zaXZlIGVtYmVkLXJlc3BvbnNpdmUtMTZieTlcIj4nKTtcbiAgICAgICAgdGVtcGxhdGUucHVzaCgnPGlmcmFtZSBjbGFzcz1cImVtYmVkLXJlc3BvbnNpdmUtaXRlbVwiIHNyYz1cIicgKyB1cmwgKyAnXCIgJyArIGF0dHJzLmpvaW4oJyAnKSArICc+PC9pZnJhbWU+Jyk7XG4gICAgICAgIHRlbXBsYXRlLnB1c2goJzwvZGl2PicpO1xuXG4gICAgICAgIG9wdGlvbnMuY29udGVudCA9IHRlbXBsYXRlLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIGRpYWxvZyA9IG5ldyBEaWFsb2cob3B0aW9ucyk7XG5cbiAgICAgICAgZGlhbG9nLm9wZW4oKTtcblxuICAgICAgICByZXR1cm4gZGlhbG9nO1xuICAgIH07XG5cbiAgICAvKlxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfCBEaWFsb2cgRm9ybVxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfCAtIEJ1dHRvbnM6IHN1Ym1pdCwgY2xvc2VcbiAgICAgfCAtIE9wdGlvbnM6XG4gICAgIHwgICsgZm9ybV9jbGFzc2VzOiBmb3JtIGNsYXNzZXMsIHN0cmluZyBvciBhcnJheSBvZiBzdHJpbmdcbiAgICAgfCAgKyBtZXNzYWdlX2NsYXNzZXM6IGZvcm0gbWVzc2FnZSBkaXYgY2xhc3Nlcywgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZy4gRGVmYXVsdCBpcyBcImRpYWxvZ19mb3JtX21lc3NhZ2VcIlxuICAgICB8ICArIGJ1dHRvbnM6IGFkZCBvdGhlciBidXR0b25zXG4gICAgIHwgICsgYnV0dG9uc19vcHRpb246IG9iamVjdCB3aXRoIGJ1dHRvbidzIG5hbWUgYW5kIGJ1dHRvbiBvcHRpb25zXG4gICAgIHwgICsgc3VibWl0X2J1dHRvbjogZGVmYXVsdCBzdWJtaXQgYnV0dG9uIG5hbWUuIERpYWxvZyB3aWxsIHRyaWdnZXIgY2FsbGJhY2sgd2l0aCB0aGlzIGJ1dHRvbiB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdCB3aXRob3V0IGJ1dHRvbiBjbGlja1xuICAgICB8ICArIGNsb3NlX2J1dHRvbjogZGVmYXVsdCBjbG9zZSBidXR0b24gbmFtZS4gRGlhbG9nIHdpbGwgdHJpZ2dlciBjYWxsYmFjayB3aXRoIGRpYWxvZyBjbG9zZSB3aXRob3V0IGJ1dHRvbiBjbGlja1xuICAgICB8ICArIHZhbGlkYXRvcjogZm9ybSB2YWxpZGF0b3IgY2FsbGJhY2suIFJldHVybiB0cnVlIG9uIHZhbGlkIG9yIHN0cmluZyBmb3IgZXJyb3JzLiBJZiByZXR1cm4gc3RyaW5nIHRoZW4gZGlhbG9nIHdpbGwgc2hvdyBlcnJvciBvbiBtZXNzYWdlIGRpdi5cbiAgICAgfCAgICAgIEFyZ3VtZW50czpcbiAgICAgfCAgICAgIC0gZm9ybSBET01cbiAgICAgfCAgICAgIC0gYnV0dG9uIGluc3RhbmNlXG4gICAgIHwgICAgICAtIGRpYWxvZyBpbnN0YW5jZVxuICAgICB8XG4gICAgIHxcbiAgICAgfC0gRGlhbG9nIGRhdGE6XG4gICAgIHwgICsgZm9ybV9zZWxlY3RvcjogZm9ybSBzZWxlY3RvclxuICAgICB8ICArIGZvcm1fbWVzc2FnZV9zZWxlY3RvcjogZm9ybSBtZXNzYWdlIGRpdiBzZWxlY3RvclxuICAgICB8ICArIHVwZGF0ZV9tZXNzYWdlOiB1cGRhdGUgZm9ybSBtZXNzYWdlLiBBcmd1bWVudHM6IG1lc3NhZ2UuIElmIGFyZyBtZXNzYWdlIGZhaWwgdGhlbiBoaWRlIG1lc3NhZ2VcbiAgICAgfCAgKyBidG5faGFuZGxlcjogZGVmYXVsdCBidXR0b24gY2xpY2sgaGFuZGxlciwgdGhhdCB2YWxpZCBmb3JtLCBzaG93IG1lc3NhZ2Ugb24gZXJyb3IgYW5kIGNhbGwgY2FsbGJhY2suXG4gICAgIHwgICAgICBJZiBidXR0b24gaXMgY2xvc2UgYnV0dG9uIHRoZW4gY2xvc2UgZGlhbG9nIGJlZm9yZSBjYWxsIGNhbGxiYWNrLiBVc2VmdWwgZm9yIGN1c3RvbSBidXR0b25cbiAgICAgfCAgICAgIEFyZ3VtZW50czpcbiAgICAgfCAgICAgIC0gYnRuOiBidXR0b24gaW5zdGFuY2VcbiAgICAgfFxuICAgICB8LSBGb3JtIGNhbGxiYWNrOlxuICAgICB8ICAgICAgQXJndW1lbnRzOlxuICAgICB8ICAgICAgLSBidXR0b24gbmFtZTpcbiAgICAgfCAgICAgIC0gZm9ybSBET006XG4gICAgIHwgICAgICAtIGJ1dHRvbiBpbnN0YW5jZTpcbiAgICAgfCAgICAgIC0gZGlhbG9nIGluc3RhbmNlOlxuICAgICB8XG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgIHxcbiAgICAgKi9cbiAgICBEaWFsb2dCdXR0b24uZGVmaW5lKCdzdWJtaXQnLCB7XG4gICAgICAgIGxhYmVsOiAnU3VibWl0J1xuICAgIH0pO1xuXG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2dCdXR0b24sIHtcbiAgICAgICAgU1VCTUlUOiAnc3VibWl0JyxcbiAgICAgICAgU1VCTUlUX0NBTkNFTDogWydzdWJtaXQnLCAnY2FuY2VsJ11cbiAgICB9KTtcblxuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XG4gICAgICAgIERJQUxPR19GT1JNX1BSRV9PUFRJT05TX05BTUU6ICdLaG9haS5EaWFsb2cuRm9ybSdcbiAgICB9KTtcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0ZPUk1fUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICB0aXRsZTogJ0Zvcm0nLFxuICAgICAgICBmb3JtX2NsYXNzZXM6ICcnLFxuICAgICAgICBtZXNzYWdlX2NsYXNzZXM6ICdkaWFsb2dfZm9ybV9tZXNzYWdlJyxcbiAgICAgICAgdmFsaWRhdG9yOiBudWxsLFxuICAgICAgICBhdXRvX2ZvY3VzOiB0cnVlLFxuICAgICAgICBzdWJtaXRfYnV0dG9uX25hbWU6ICdzdWJtaXQnLFxuICAgICAgICBjYW5jZWxfYnV0dG9uX25hbWU6ICdjYW5jZWwnLFxuICAgICAgICBidXR0b25zOiBbXSxcbiAgICAgICAgYnV0dG9uc19leHRlbmRfb3B0aW9uczoge31cbiAgICB9KTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbil9IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBhcmd1bWVudHM6IGJ1dHRvbiBuYW1lLCBmb3JtIERPTSwgYnV0dG9uIGluc3RhbmNlLCBkaWFsb2cgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2cuZm9ybSA9IGZ1bmN0aW9uIChjb250ZW50LCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGlhbG9nID0gbmV3IERpYWxvZygpO1xuXG4gICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBfLm5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKFByZU9wdGlvbnMuZ2V0KERpYWxvZy5ESUFMT0dfRk9STV9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKSwge1xuICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnRfaGFuZGxlcjogZGlhbG9nRm9ybUNvbnRlbnRIYW5kbGVyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChfLmlzRW1wdHkob3B0aW9ucy5idXR0b25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5idXR0b25zID0gRGlhbG9nQnV0dG9uLmZhY3RvcnkoRGlhbG9nQnV0dG9uLlNVQk1JVF9DQU5DRUwsIHt9LCB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IGNyZWF0ZUNhbmNlbEJ1dHRvbkhhbmRsZXIoY2FsbGJhY2spXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWJtaXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogY3JlYXRlQnV0dG9uc0hhbmRsZXIoY2FsbGJhY2ssIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBkaWFsb2cub3B0aW9uKFxuICAgICAgICAgICAgXy5vbWl0KG9wdGlvbnMsIFsnZm9ybV9jbGFzc2VzJywgJ21lc3NhZ2VfY2xhc3NlcycsICd2YWxpZGF0b3InLCAnc3VibWl0X2J1dHRvbl9uYW1lJyxcbiAgICAgICAgICAgICAgICAnY2FuY2VsX2J1dHRvbl9uYW1lJywgJ2J1dHRvbnMnLCAnYnV0dG9uc19leHRlbmRfb3B0aW9ucyddKVxuICAgICAgICApO1xuXG4gICAgICAgIF8uZWFjaChvcHRpb25zLmJ1dHRvbnMsIGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgICAgICAgIHZhciBhdHRhY2hlZF9idXR0b24gPSBkaWFsb2cuYXR0YWNoQnV0dG9uKGJ1dHRvbik7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmJ1dHRvbnNfZXh0ZW5kX29wdGlvbnMuaGFzT3duUHJvcGVydHkoYXR0YWNoZWRfYnV0dG9uLm9wdGlvbnMubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBhdHRhY2hlZF9idXR0b24ub3B0aW9uKF8uY2xvbmUob3B0aW9ucy5idXR0b25zX2V4dGVuZF9vcHRpb25zW2F0dGFjaGVkX2J1dHRvbi5vcHRpb25zLm5hbWVdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFkZERpYWxvZ0RhdGEoZGlhbG9nLCBvcHRpb25zKTtcbiAgICAgICAgYWRkRGlhbG9nTWV0aG9kcyhkaWFsb2csIG9wdGlvbnMpO1xuICAgICAgICBhZGREaWFsb2dFdmVudHMoZGlhbG9nLCBvcHRpb25zKTtcblxuICAgICAgICBkaWFsb2cub3BlbigpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmF1dG9fZm9jdXMpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRpYWxvZy5nZXRET00oKS5maW5kKCdpbnB1dDp2aXNpYmxlLCB0ZXh0YXJlYTp2aXNpYmxlJykuZmlyc3QoKS5mb2N1cygpO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkaWFsb2c7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhbmNlbEJ1dHRvbkhhbmRsZXIoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2cgPSBidXR0b24uZ2V0RGlhbG9nKCk7XG5cbiAgICAgICAgICAgIGJ1dHRvbi5jbG9zZURpYWxvZyh0cnVlKTtcbiAgICAgICAgICAgIEtob2FpLnV0aWwuY2FsbEZ1bmMoY2FsbGJhY2ssIFtidXR0b24ub3B0aW9ucy5uYW1lLCBudWxsLCBidXR0b24sIGRpYWxvZ10sIGRpYWxvZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCdXR0b25zSGFuZGxlcihjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICAgICAgdmFyIGRpYWxvZ19pbnN0YW5jZSA9IHRoaXMuZ2V0RGlhbG9nKCksXG4gICAgICAgICAgICAgICAgZm9ybSA9IGpRdWVyeShkaWFsb2dfaW5zdGFuY2UuZGF0YVsnZm9ybV9zZWxlY3RvciddKSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZV9yZXN1bHQgPSB0cnVlO1xuXG4gICAgICAgICAgICB1cGRhdGVGb3JtTWVzc2FnZShkaWFsb2dfaW5zdGFuY2UsIGZhbHNlKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVfcmVzdWx0ID0gb3B0aW9ucy52YWxpZGF0b3IoZm9ybSwgZGlhbG9nX2luc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cnVlICE9PSB2YWxpZGF0ZV9yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXy5pc1N0cmluZyh2YWxpZGF0ZV9yZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZvcm1NZXNzYWdlKGRpYWxvZ19pbnN0YW5jZSwgdmFsaWRhdGVfcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEtob2FpLnV0aWwuY2FsbEZ1bmMoY2FsbGJhY2ssIFtidXR0b24ub3B0aW9ucy5uYW1lLCBmb3JtLCBidXR0b24sIGRpYWxvZ19pbnN0YW5jZV0sIGRpYWxvZ19pbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaWFsb2dGb3JtQ29udGVudEhhbmRsZXIoY29udGVudCkge1xuICAgICAgICByZXR1cm4gWyc8Zm9ybT48ZGl2IGNsYXNzPVwiZGlhbG9nX2Zvcm1fbWVzc2FnZVwiPjwvZGl2PicsIGNvbnRlbnQsICc8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIi8+PC9mb3JtPiddLmpvaW4oJycpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsYXNzZXNUb1NlbGVjdG9yKGNsYXNzZXMpIHtcbiAgICAgICAgaWYgKCFfLmlzQXJyYXkoY2xhc3NlcykpIHtcbiAgICAgICAgICAgIChjbGFzc2VzICsgJycpLnNwbGl0KCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2xhc3NlcyA9IF8uZmxhdHRlbihfLmNhc3RBcnJheShjbGFzc2VzKSk7XG5cbiAgICAgICAgaWYgKCFfLmlzRW1wdHkoY2xhc3NlcykpIHtcbiAgICAgICAgICAgIHJldHVybiBfLm1hcChjbGFzc2VzLCBmdW5jdGlvbiAoY2xhc3NfbmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc19uYW1lLnRyaW0oKSA/ICcuJyArIGNsYXNzX25hbWUgOiAnJztcbiAgICAgICAgICAgIH0pLmpvaW4oJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUZvcm1NZXNzYWdlKGRpYWxvZywgbWVzc2FnZSkge1xuICAgICAgICB2YXIgbWVzc2FnZV9kb20gPSBqUXVlcnkoZGlhbG9nLmRhdGFbJ2Zvcm1fc2VsZWN0b3InXSArICcgJyArIGRpYWxvZy5kYXRhWydmb3JtX21lc3NhZ2Vfc2VsZWN0b3InXSk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2VfZG9tLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2RvbS5odG1sKG1lc3NhZ2UpLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZV9kb20uaHRtbCgnJykuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkRGlhbG9nRGF0YShkaWFsb2csIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRpYWxvZ19kb21faWQgPSAnIycgKyBkaWFsb2cuZ2V0VGVtcGxhdGUoKS5nZXRET01JRCgpO1xuICAgICAgICB2YXIgZm9ybV9zZWxlY3RvciA9IGRpYWxvZ19kb21faWQgKyAnIGZvcm0nICsgY2xhc3Nlc1RvU2VsZWN0b3Iob3B0aW9ucy5mb3JtX2NsYXNzZXMpO1xuICAgICAgICB2YXIgZm9ybV9tZXNzYWdlX3NlbGVjdG9yID0gZm9ybV9zZWxlY3RvciArICcgJyArIG9wdGlvbnMubWVzc2FnZV9jbGFzc2VzID8gY2xhc3Nlc1RvU2VsZWN0b3Iob3B0aW9ucy5tZXNzYWdlX2NsYXNzZXMpIDogJy5kaWFsb2dfZm9ybV9tZXNzYWdlJztcblxuICAgICAgICBkaWFsb2cuZGF0YVsnZm9ybV9zZWxlY3RvciddID0gZm9ybV9zZWxlY3RvcjtcbiAgICAgICAgZGlhbG9nLmRhdGFbJ2Zvcm1fbWVzc2FnZV9zZWxlY3RvciddID0gZm9ybV9tZXNzYWdlX3NlbGVjdG9yO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZERpYWxvZ01ldGhvZHMoZGlhbG9nKSB7XG4gICAgICAgIGRpYWxvZy5nZXRGb3JtRE9NID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeShkaWFsb2cuZGF0YVsnZm9ybV9zZWxlY3RvciddKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkaWFsb2cudXBkYXRlRm9ybU1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdXBkYXRlRm9ybU1lc3NhZ2UoZGlhbG9nLCBtZXNzYWdlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkaWFsb2cuY2xlYXJGb3JtTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHVwZGF0ZUZvcm1NZXNzYWdlKGRpYWxvZywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBkaWFsb2cuZ2V0Rm9ybURhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBUT0RPOiBGaXggS2hvYWkuakZvcm1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCFLaG9haS5qRm9ybSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWV0aG9kIGdldEZvcm1EYXRhIHJlcXVpcmUgbW9kdWxlIGpGb3JtJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gS2hvYWkuakZvcm0uZ2V0Rm9ybURhdGEodGhpcy5nZXRGb3JtRE9NKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkRGlhbG9nRXZlbnRzKGRpYWxvZywgb3B0aW9ucykge1xuICAgICAgICBmdW5jdGlvbiBmb3JtX3N1Ym1pdF9ldmVudF9saXN0ZW5lcihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VibWl0X2J1dHRvbl9uYW1lKSB7XG4gICAgICAgICAgICAgICAgZGlhbG9nLmNsaWNrKG9wdGlvbnMuc3VibWl0X2J1dHRvbl9uYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nLm9uKCdvcGVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCdib2R5Jykub24oJ3N1Ym1pdCcsIHRoaXMuZGF0YVsnZm9ybV9zZWxlY3RvciddLCBmb3JtX3N1Ym1pdF9ldmVudF9saXN0ZW5lcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpYWxvZy5vbignY2xvc2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NlZF9ieSAmJiBvcHRpb25zLmNhbmNlbF9idXR0b25fbmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNCdXR0b24ob3B0aW9ucy5jYW5jZWxfYnV0dG9uX25hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkZWZhdWx0IGJ1dHRvbicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uc1tvcHRpb25zLmNhbmNlbF9idXR0b25fbmFtZV0uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZGVmYXVsdF9jbG9zZV9idXR0b24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpYWxvZy5vbignY2xvc2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCdib2R5Jykub2ZmKCdzdWJtaXQnLCB0aGlzLmRhdGFbJ2Zvcm1fc2VsZWN0b3InXSwgZm9ybV9zdWJtaXRfZXZlbnRfbGlzdGVuZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8qXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8IERpYWxvZyBQcm9tcHRcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHwgLSBvcHRpb25zOlxuICAgICB8ICAgICAgKyB2YWx1ZTogY3VycmVudCB2YWx1ZVxuICAgICB8ICAgICAgKyBpbnB1dF90eXBlOiB0ZXh0LCBwYXNzd29yZCwuLi5cbiAgICAgfCAgICAgICsgaW5wdXRfY2xhc3NlczogY2xhc3Mgb2YgaW5wdXRcbiAgICAgfFxuICAgICB8IC0gY2FsbGJhY2s6IGNhbGxiYWNrIGhhdmUgMSBhcmd1bWVudCBpcyB2YWx1ZSBvZiBwcm9tcHRcbiAgICAgfFxuICAgICAqL1xuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XG4gICAgICAgIERJQUxPR19QUk9NUFRfUFJFX09QVElPTlNfTkFNRTogJ0tob2FpLkRpYWxvZy5wcm9tcHQnXG4gICAgfSk7XG4gICAgUHJlT3B0aW9ucy5kZWZpbmUoRGlhbG9nLkRJQUxPR19QUk9NUFRfUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICB0aXRsZTogJ1Byb21wdCcsXG4gICAgICAgIGRlZmF1bHRfdmFsdWU6ICcnLFxuICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgIGlucHV0X3R5cGU6ICd0ZXh0JyxcbiAgICAgICAgaW5wdXRfY2xhc3NlczogJ2Zvcm0tY29udHJvbCcsXG4gICAgICAgIGJ1dHRvbnNfZXh0ZW5kX29wdGlvbnM6IHtcbiAgICAgICAgICAgIHN1Ym1pdDoge1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnT2snXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBEaWFsb2cucHJvbXB0ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gW10sXG4gICAgICAgICAgICBkaWFsb2c7XG5cbiAgICAgICAgaWYgKCFfLmlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb25zICsgJydcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IF8ubm9vcDtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuRElBTE9HX1BST01QVF9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKTtcblxuICAgICAgICBjb250ZW50LnB1c2goJzxwPicsIG1lc3NhZ2UsICc8L3A+Jyk7XG4gICAgICAgIGNvbnRlbnQucHVzaCgnPGlucHV0IG5hbWU9XCJwcm9tcHRfZGF0YVwiIHR5cGU9XCInLCBvcHRpb25zLmlucHV0X3R5cGUgKyAnXCIgJyxcbiAgICAgICAgICAgICdjbGFzcz1cIicsIG9wdGlvbnMuaW5wdXRfY2xhc3NlcyArICdcIiAnLFxuICAgICAgICAgICAgJ3ZhbHVlPVwiJywgb3B0aW9ucy5kZWZhdWx0X3ZhbHVlICsgJ1wiJyxcbiAgICAgICAgICAgICdwbGFjZWhvbGRlcj1cIicsIG9wdGlvbnMucGxhY2Vob2xkZXIgKyAnXCInLFxuICAgICAgICAgICAgJy8+Jyk7XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvbXB0X2NiKGJ0bl9uYW1lLCBmb3JtLCBidG4pIHtcbiAgICAgICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9wdGlvbnMuZGVmYXVsdF92YWx1ZTtcblxuICAgICAgICAgICAgaWYgKCdzdWJtaXQnID09PSBidG5fbmFtZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZm9ybS5maW5kKCdpbnB1dFtuYW1lPVwicHJvbXB0X2RhdGFcIl0nKS52YWwoKTtcbiAgICAgICAgICAgICAgICBidG4uY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FsbGJhY2sodmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nID0gRGlhbG9nLmZvcm0oY29udGVudC5qb2luKCcnKSwgcHJvbXB0X2NiLCBfLm9taXQob3B0aW9ucywgJ2RlZmF1bHRfdmFsdWUnLCAncGxhY2Vob2xkZXInLCAnaW5wdXRfdHlwZScsICdpbnB1dF9jbGFzc2VzJykpO1xuXG4gICAgICAgIHJldHVybiBkaWFsb2c7XG4gICAgfTtcbn0pKTsiXX0=
