!function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","khoaijs","khoaijs-event-emitter","khoaijs-pre-options","khoaijs-template"];define(n,function(n,i,o,s,a){var l=e(n,i,o,s,a);return i.DialogButton=l,t.DialogButton=l,l})}else{var i=e(t._,t.Khoai,t.Khoai.EventEmitter||t.EventEmitter,t.Khoai.PreOptions||t.PreOptions,t.Khoai.Template||t.Template);t.Khoai.DialogButton=i,t.DialogButton=i}}(this,function(t,e,n,i,o){function s(t){return t.isVisible()&&t.isEnable()&&t.getDialog().isClickable()}function a(t){t.addListener("listen",l),t.addListener("unlisten",r),t.addListener("dialog.toggle_enable",u),t.addListener("dialog.toggle_pending",p)}function l(t){_[this.id].dialog=t}function r(t){_[this.id].dialog=null}function u(t){this.toggleEnable(t.data)}function p(t){t.data?this.options.disable_on_pending&&this.toggleEnable(!1):this.toggleEnable(!0)}function c(t){this.type_prefix="dialog_button",n.call(this),this.options=i.get(h.PRE_OPTIONS_NAME,{name:this.id}),_[this.id]={dialog:null,enabled:!0,visible:!0,template_instance:null},this.option(this.options),t&&(t.hasOwnProperty("events")&&(this.addListeners(t.events),delete t.events),this.option(t)),a(this)}var h={PRE_OPTIONS_NAME:"Khoai.DialogButton",TEMPLATE_TYPE:"DialogButton",TYPE_INFO:"info",TYPE_PRIMARY:"primary",TYPE_SUCCESS:"success",TYPE_WARNING:"warning",TYPE_DANGER:"danger",OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",RETRY:"retry",BUTTONS_OK_ONLY:["ok"],BUTTONS_OK_CANCEL:["ok","cancel"],BUTTONS_YES_NO:["yes","no"],BUTTONS_YES_NO_CANCEL:["yes","no","cancel"],BUTTONS_RETRY_CANCEL:["retry","cancel"]},_={};i.define(h.PRE_OPTIONS_NAME,{label:"Untitled",icon:"",type:h.TYPE_INFO,size:1,handler:null,disable_on_pending:!0,clickable:s,template_name:"",template:{}}),e.util.inherit(c,n),e.util.defineConstant(c,"version","0.0.1"),e.util.defineConstant(c,h),c.globalOption=function(t){i.update(c.PRE_OPTIONS_NAME,t)},c.prototype.setTemplate=function(t){if(!(t instanceof o))throw new Error("Invalid Template instance");_[this.id].template_instance&&(_[this.id].template_instance.disconnect(),_[this.id].template_instance=null),t.option(this.options.template),_[this.id].template_instance=t,t.connect(this)},c.prototype.getTemplate=function(){if(!_[this.id].template_instance){if(!this.options.template_name){var t=i.get(c.PRE_OPTIONS_NAME);if(t.template_name&&o.hasTemplate(c.TEMPLATE_TYPE,t.template_name))this.options.template_name=t.template_name;else{var e=o.defaultTemplate(c.TEMPLATE_TYPE);if(!1===e)throw new Error("Dialog button default template not found");this.options.template_name=e,i.update(c.PRE_OPTIONS_NAME,{template_name:e})}}this.setTemplate(o.templateInstance(c.TEMPLATE_TYPE,this.options.template_name))}return _[this.id].template_instance},c.prototype.option=function(n,i){var s=e.util.beObject.apply(e,t.toArray(arguments));return s.template_name&&this.setTemplate(o.templateInstance(c.TEMPLATE_TYPE,s.template_name)),s.template&&this.getTemplate().option(s.template),t.extend(this.options,t.omit(s,["template_name"])),this},c.prototype.setHandler=function(t){this.option("handler",t)},c.prototype.getDialog=function(){return!!_[this.id].dialog&&_[this.id].dialog},c.prototype.isClickable=function(){return t.isFunction(this.options.clickable)?this.options.clickable.call(this,this):Boolean(this.options.clickable)},c.prototype.isVisible=function(){return Boolean(_[this.id].visible)},c.prototype.isEnable=function(){return Boolean(_[this.id].enabled)},c.prototype.click=function(){return!!this.isClickable()&&(this.emitEvent("click"),this.options.handler&&e.util.callFunc(this.options.handler,this,this),this.emitEvent("clicked"),!0)},c.prototype.toggle=function(e){t.isUndefined(e)&&(e=!_[this.id].visible),_[this.id].visible!==e&&(_[this.id].visible=e,e?this.emitEvent("show"):this.emitEvent("hide"),this.emitEvent("toggle",e))},c.prototype.show=function(){this.toggle(!0)},c.prototype.hide=function(){this.toggle(!1)},c.prototype.toggleEnable=function(e){t.isUndefined(e)&&(e=!_[this.id].enabled),_[this.id].enabled!==e&&(_[this.id].enabled=e,this.emitEvent(e?"enabled":"disabled"),this.emitEvent("toggle_enable",e))},c.prototype.disable=function(){this.toggleEnable(!1)},c.prototype.enable=function(){this.toggleEnable(!0)},c.prototype.render=function(){return this.getTemplate().render()},c.prototype.reDraw=function(){return!!_[this.id].template_instance&&_[this.id].template_instance.reDraw()},c.prototype.getDOM=function(){return!!(_[this.id].template_instance&&_[this.id].template_instance instanceof o)&&_[this.id].template_instance.getDOM()},c.prototype.getOtherButton=function(t){return this.getDialog().getButton(t)},c.prototype.getCloseKey=function(){return this.options.name},c.prototype.closeDialog=function(t){var e=this.getDialog();return!!e&&(e.close(t,this.getCloseKey()),!0)},c.prototype.wasCloseDialog=function(){var t=this.getDialog();return!!t&&t.setClosedBy(this)};var d={};return c.isDefined=function(t){return d.hasOwnProperty(t)},c.define=function(e,n,i){d[e]={options:t.isObject(n)?n:{},freeze_options:t.isObject(i)?i:{}},d[e].freeze_options.name=e},c.updateOptions=function(e,n){return!!c.isDefined(e)&&(t.extend(d[e].options,n),!0)},c.factory=function(e,n,i){t.isObject(n)||(n={}),t.isObject(i)||(i={});var o=t.castArray(e).map(function(e){var o,s;if(!c.isDefined(e))throw new Error("Dialog Button type is unregistered");return s=d[e],o=t.extend({},s.options,t.clone(n),i.hasOwnProperty(e)?i[e]:{},s.freeze_options),new c(o)});return 1===o.length?o.shift():o},c.defaultClickable=s,t.each(["Ok","Yes","No","Retry","Ignore"],function(t){c.define(t.toLowerCase(),{label:t})}),c.define("cancel",{label:"Cancel",disable_on_pending:!1}),function(){function t(t){t.getDialog()&&t.closeDialog(Boolean(t.options.force))}e.util.defineConstant(c,{CLOSE:"close"}),c.define(c.CLOSE,{label:"Close",type:c.TYPE_INFO,force:!1},{handler:t})}(),c}),function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","jquery","khoaijs","khoaijs-event-emitter","khoaijs-pre-options","khoaijs-template","dialog_button"];define(n,function(n,i,o,s,a,l,r){var u=e(n,i,o,s,a,l,r);return o.Dialog=u,t.Dialog=u,u})}else{var i=e(t._,t.jQuery,t.Khoai,t.Khoai&&t.Khoai.EventEmitter||t.EventEmitter,t.Khoai&&t.Khoai.PreOptions||t.PreOptions,t.Khoai&&t.Khoai.Template||t.Template,t.Khoai&&t.Khoai.DialogButton||t.DialogButton);t.Khoai.Dialog=i,t.Dialog=i}}(this,function(t,e,n,i,o,s,a){function l(t){return t.isEnable()}function r(t){return t.isEnable()}function u(t){var e={status:h.STATUS_INITIAL,enabled:!0,pending:!1,loading:!1,ajax_worker:null,template_instance:null};_.hasOwnProperty(t)&&(e.template_instance=_[t].template_instance),_[t]=e}function p(e){if(this.type_prefix="dialog",i.call(this),this.options=o.get(h.PRE_OPTIONS_NAME),this.closed_by="",this.data={},this.buttons={},u(this.id),this.option(this.options),e){if(e.hasOwnProperty("events")&&e.events&&(this.addListeners(e.events),delete e.events),e.hasOwnProperty("buttons")&&e.buttons){var n=this;t.each(e.buttons,function(t){n.attachButton(t)}),e.buttons=null,delete e.buttons}this.option(e)}}function c(e){t.isFunction(this.options.content_handler)&&(e=this.options.content_handler(e,this)),this.emitEvent("content_loaded",e),this.updateContent(e)}var h={PRE_OPTIONS_NAME:"Khoai.Dialog",TEMPLATE_TYPE:"Dialog",STATUS_INITIAL:"initial",STATUS_OPENED:"opened",STATUS_HIDING:"hiding",STATUS_CLOSED:"removed",TYPE_INFO:"info",TYPE_SUCCESS:"success",TYPE_PRIMARY:"primary",TYPE_WARNING:"warning",TYPE_DANGER:"danger",SIZE_SMALL:"small",SIZE_NORMAL:"normal",SIZE_LARGE:"large"},_={};return o.define(h.PRE_OPTIONS_NAME,{title:"Dialog",type:h.TYPE_INFO,content:"",content_handler:null,template_name:"",template:{},size:h.SIZE_NORMAL,classes:"",closable:l,clickable:r}),n.util.inherit(p,i),n.util.defineConstant(p,"version","0.0.1"),n.util.defineConstant(p,h),p.globalOption=function(t){o.update(p.PRE_OPTIONS_NAME,t)},p.prototype.getContent=function(){return t.isFunction(this.options.content)&&(this.emitEvent("load_content"),this.options.content=this.options.content(c.bind(this),this)),t.isFunction(this.options.content_handler)?this.options.content_handler(this.options.content,this):this.options.content},p.prototype.updateContent=function(t){this.options.content=t||this.options.content,t=this.getContent(),this.isOpened()&&this.emitEvent("update_content",t)},p.prototype.setTemplate=function(t){if(!this.isIniting())throw new Error("Dialog is opened");if(!(t instanceof s))throw new Error("Invalid Template instance");_[this.id].template_instance&&(_[this.id].template_instance.disconnect(),_[this.id].template_instance=null),t.option(this.options.template),_[this.id].template_instance=t,t.connect(this)},p.prototype.getTemplate=function(){if(!_[this.id].template_instance){if(!this.options.template_name){var t=o.get(p.PRE_OPTIONS_NAME);if(t.template_name&&s.hasTemplate(p.TEMPLATE_TYPE,t.template_name))this.options.template_name=t.template_name;else{var e=s.defaultTemplate(p.TEMPLATE_TYPE);if(!1===e)throw new Error("Dialog default template not found");this.options.template_name=e,o.update(p.PRE_OPTIONS_NAME,{template_name:e})}}this.setTemplate(s.templateInstance(p.TEMPLATE_TYPE,this.options.template_name))}return _[this.id].template_instance},p.prototype.option=function(e,i){var o=n.util.beObject.apply(n,t.toArray(arguments));return o.template_name&&this.setTemplate(s.templateInstance(p.TEMPLATE_TYPE,o.template_name)),o.template&&this.getTemplate().option(o.template),t.extend(this.options,o),this},p.prototype.status=function(){return!!_.hasOwnProperty(this.id)&&_[this.id].status},p.prototype.isIniting=function(){return this.status()===p.STATUS_INITIAL},p.prototype.isOpened=function(){return-1!==[p.STATUS_OPENED,p.STATUS_HIDING].indexOf(this.status())},p.prototype.isVisibling=function(){return this.status()===p.STATUS_OPENED},p.prototype.isHiding=function(){return this.status()===p.STATUS_HIDING},p.prototype.isClosed=function(){return this.status()===p.STATUS_CLOSED},p.prototype.isEnable=function(){return Boolean(_[this.id].enabled)},p.prototype.isPending=function(){return Boolean(_[this.id].pending)},p.prototype.enable=function(){return!this.isEnable()&&(_[this.id].enabled=!0,this.emitEvent("enabled"),this.emitEvent("toggle_enable",!0),!0)},p.prototype.disable=function(){return!!this.isEnable()&&(_[this.id].enabled=!1,this.emitEvent("disabled"),this.emitEvent("toggle_enable",!1),!0)},p.prototype.pending=function(){return!this.isPending()&&(_[this.id].pending=!0,this.emitEvent("pending"),this.emitEvent("toggle_pending",!0),!0)},p.prototype.resolved=function(){return!!this.isPending()&&(_[this.id].pending=!1,this.emitEvent("resolved"),this.emitEvent("toggle_pending",!1),!0)},p.prototype.attachButton=function(e){if(!(e instanceof a))if(t.isObject(e))e=new a(e);else{if(!t.isString(e)&&!t.isNumber(e)||!a.has(e))throw new Error("Invalid button");e=a.factory(e)}return this.buttons[e.options.name]=e,e.listen(this),e},p.prototype.attachMultiButtons=function(e){var n=this;t.each(e,function(t){n.attachButton(t)})},p.prototype.hasButton=function(t){return this.buttons.hasOwnProperty(t)},p.prototype.getButton=function(t){if(!this.hasButton(t))throw new Error("Get unattached button");return this.buttons[t]},p.prototype.removeButton=function(t){if(!this.hasButton(t))throw new Error("Remove unattached button");this.buttons[t].unlisten(this),delete this.buttons[t]},p.prototype.isClickable=function(){return!this.options.clickable||(t.isFunction(this.options.clickable)?this.options.clickable(this):Boolean(this.options.clickable))},p.prototype.click=function(t){if(this.isClickable()&&this.hasButton(t)){this.getButton(t).click(),this.emitEvent("clicked",t)}return!1},p.prototype.isCloseable=function(){return!!this.isOpened()&&(!this.options.closable||(t.isFunction(this.options.closable)?this.options.closable(this):Boolean(this.options.closable)))},p.prototype.open=function(){return this.status()===p.STATUS_INITIAL&&(_[this.id].template_instance||this.getTemplate(),this.closed_by="",_[this.id].status=p.STATUS_OPENED,this.emitEvent("open"),!0)},p.prototype.hide=function(){return!!this.isVisibling()&&(this.emitEvent("hide"),_[this.id].status=p.STATUS_HIDING,!0)},p.prototype.show=function(){return!!this.isHiding()&&(this.emitEvent("show"),_[this.id].status=p.STATUS_OPENED,!0)},p.prototype.close=function(t,e){return!(this.isClosed()||!t&&!this.isCloseable())&&(e=e||"",this.emitEvent("close",t,e),u(this.id),_[this.id].status=p.STATUS_CLOSED,this.closed_by=e,this.emitEvent("closed",t,e),this.reset(),!0)},p.prototype.setClosedBy=function(e){return!!this.isClosed()&&(e||(e=""),e instanceof a&&(e=e.getCloseKey()),t.isString(e)||(e+=""),this.closed_by=e,!0)},p.prototype.isClosedBy=function(e){return!!this.isClosed()&&(e||(e=""),e instanceof a&&(e=e.getCloseKey()),t.isString(e)||(e+=""),this.closed_by===e)},p.prototype.getDOM=function(){return!!(_[this.id].template_instance&&_[this.id].template_instance instanceof s)&&_[this.id].template_instance.getDOM()},p}),function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","jquery","khoaijs","khoaijs-pre-options","khoaijs-ajax","../dialog-button","../dialog"];require(n,e)}else e(t._,t.jQuery||t.$,t.Khoai,t.Khoai&&t.Khoai.PreOptions||t.PreOptions,t.Khoai&&t.Khoai.Ajax||t.Ajax,t.Khoai&&t.Khoai.DialogButton||t.DialogButton,t.Khoai&&t.Khoai.Dialog||t.Dialog)}(this,function(t,e,n,i,o,s,a){function l(t){return function(e){var i=e.getDialog();e.closeDialog(!0),n.util.callFunc(t,[e.options.name,null,e,i],i)}}function r(i,o){return function(s){var a=this.getDialog(),l=e(a.data.form_selector),r=!0;if(c(a,!1),o.validator&&(r=o.validator(l,a)),!0!==r)return void(t.isString(r)&&c(a,r));n.util.callFunc(i,[s.options.name,l,s,a],a)}}function u(t){return['<form><div class="dialog_form_message"></div>',t,'<input type="submit" style="display: none;"/></form>'].join("")}function p(e){return t.isArray(e)||(e+"").split(" "),e=t.flatten(t.castArray(e)),t.isEmpty(e)?"":t.map(e,function(t){return t.trim()?"."+t:""}).join("")}function c(t,n){var i=e(t.data.form_selector+" "+t.data.form_message_selector);i.length&&(n?i.html(n).show():i.html("").hide())}function h(t,e){var n="#"+t.getTemplate().getDOMID(),i=n+" form"+p(e.form_classes),o=i+" "+e.message_classes?p(e.message_classes):".dialog_form_message";t.data.form_selector=i,t.data.form_message_selector=o}function _(t){t.getFormDOM=function(){return e(t.data.form_selector)},t.updateFormMessage=function(e){c(t,e)},t.clearFormMessage=function(){c(t,!1)},t.getFormData=function(){return n.jForm?n.jForm.getFormData(this.getFormDOM()):(console.warn("Method getFormData require module jForm"),{})}}function d(t,n){function i(e){return e.preventDefault(),n.submit_button_name&&t.click(n.submit_button_name),!1}t.on("open",function(){e("body").on("submit",this.data.form_selector,i)}),t.on("closed",function(){if(!this.closed_by&&n.cancel_button_name){if(!this.hasButton(n.cancel_button_name))throw new Error("Invalid default button");this.buttons[n.cancel_button_name].click()}},{key:"default_close_button"}),t.on("closed",function(){e("body").off("submit",this.data.form_selector,i)})}n.util.defineConstant(a,{DYNAMIC_CONTENT_PRE_OPTIONS_NAME:"Khoai.Dialog.DynamicContent"}),i.define(a.DYNAMIC_CONTENT_PRE_OPTIONS_NAME,{loading:"Loading content..."}),a.dynamicContent=function(e){var n=null;return t.isString(e)&&(e={url:e}),e=i.get(a.DYNAMIC_CONTENT_PRE_OPTIONS_NAME,e),function(i,s){if(!t.isNull(n))return n;var a=new o(t.omit(e,"loading"));return a.done(function(t){n=t+"",i(n)}),a.fail(function(){s.emitEvent("load_content_failed"),i(e.error_content||"Get dynamic content failed")}),a.option("before_send",function(){return s.emitEvent("load_content"),s.pending(),!0}),a.always(function(){s.emitEvent("load_content_complete"),s.resolved()}),s.addListener("close",function(){a.abort()}),a.request(),e.loading}},a.box=function(e,n){n=n||{},t.isString(n)&&(n={title:n+""}),n.content=e,n.template||(n.template={}),n.template=t.defaults(n.template,{has_footer:!1,has_header:!1,close_manual:!1});var i=new a(n);return i.open(),i},n.util.defineConstant(a,{DIALOG_ALERT_PRE_OPTIONS_NAME:"Khoai.Dialog.Alert"}),i.define(a.DIALOG_ALERT_PRE_OPTIONS_NAME,{title:"Alert",close_button_options:{}}),a.alert=function(e,n){t.isString(n)&&(n={title:n+""}),n=t.extend({title:"Alert"},i.get(a.DIALOG_ALERT_PRE_OPTIONS_NAME,n),{content:e});var o=new a(t.omit(n,"close_button_options"));return o.attachButton(s.factory(s.CLOSE,n.close_button_options)),o.open(),o},n.util.defineConstant(a,{DIALOG_CONFIRM_PRE_OPTIONS_NAME:"Khoai.Dialog.Confirm"}),i.define(a.DIALOG_CONFIRM_PRE_OPTIONS_NAME,{title:"Confirm",default_button:null,buttons:[]}),a.confirm=function(e,o,l){var r;return t.isObject(l)||(l={title:l+""}),t.isFunction(o)||(o=t.noop),l=t.extend(i.get(a.DIALOG_CONFIRM_PRE_OPTIONS_NAME,l),{content:e}),t.isEmpty(l.buttons)&&(l.buttons=s.factory(s.BUTTONS_YES_NO)),r=new a(t.omit(l,"default_button")),t.each(r.buttons,function(t){t.setHandler(function(){this.closeDialog(),o(this.options.name)})}),l.default_button||(l.default_button=t.last(Object.keys(r.buttons))),r.on("closed",function(){this.closed_by||n.util.callFunc(o,l.default_button,null)},{key:"default_button"}),r.open(),r},n.util.defineConstant(a,{DIALOG_IFRAME_PRE_OPTIONS_NAME:"Khoai.Dialog.iFrame"}),i.define(a.DIALOG_IFRAME_PRE_OPTIONS_NAME,{title:"iFrame",attributes:{}}),a.iFrame=function(e,n){var o,s=[],l=[];return t.isObject(n)||(n={title:n+""}),n=i.get(a.DIALOG_IFRAME_PRE_OPTIONS_NAME,n),t.each(n.attributes,function(e,n){t.isBoolean(e)?e&&s.push(n+'="'+n+'"'):s.push(n+'="'+e+'"')}),l.push('<div class="embed-responsive embed-responsive-16by9">'),l.push('<iframe class="embed-responsive-item" src="'+e+'" '+s.join(" ")+"></iframe>"),l.push("</div>"),n.content=l.join("\n"),o=new a(n),o.open(),o},s.define("submit",{label:"Submit"}),n.util.defineConstant(s,{SUBMIT:"submit",SUBMIT_CANCEL:["submit","cancel"]}),n.util.defineConstant(a,{DIALOG_FORM_PRE_OPTIONS_NAME:"Khoai.Dialog.Form"}),i.define(a.DIALOG_FORM_PRE_OPTIONS_NAME,{title:"Form",form_classes:"",message_classes:"dialog_form_message",validator:null,auto_focus:!0,submit_button_name:"submit",cancel_button_name:"cancel",buttons:[],buttons_extend_options:{}}),a.form=function(e,n,o){var p=new a;return t.isFunction(n)||(n=t.noop),o=t.extend(i.get(a.DIALOG_FORM_PRE_OPTIONS_NAME,o),{content:e,content_handler:u}),t.isEmpty(o.buttons)&&(o.buttons=s.factory(s.SUBMIT_CANCEL,{},{cancel:{handler:l(n)},submit:{handler:r(n,o)}})),p.option(t.omit(o,["form_classes","message_classes","validator","submit_button_name","cancel_button_name","buttons","buttons_extend_options"])),t.each(o.buttons,function(e){var n=p.attachButton(e);o.buttons_extend_options.hasOwnProperty(n.options.name)&&n.option(t.clone(o.buttons_extend_options[n.options.name]))}),h(p,o),_(p),d(p,o),p.open(),o.auto_focus&&setTimeout(function(){p.getDOM().find("input:visible, textarea:visible").first().focus()},500),p},n.util.defineConstant(a,{DIALOG_PROMPT_PRE_OPTIONS_NAME:"Khoai.Dialog.prompt"}),i.define(a.DIALOG_PROMPT_PRE_OPTIONS_NAME,{title:"Prompt",default_value:"",placeholder:"",input_type:"text",input_classes:"form-control",buttons_extend_options:{submit:{label:"Ok"}}}),a.prompt=function(e,n,o){function s(t,e,i){if(!e)return void n(!1);var s=o.default_value;"submit"===t&&(s=e.find('input[name="prompt_data"]').val(),i.closeDialog()),n(s)}var l=[];return t.isObject(o)||(o={title:o+""}),t.isFunction(n)||(n=t.noop),o=i.get(a.DIALOG_PROMPT_PRE_OPTIONS_NAME,o),l.push("<p>",e,"</p>"),l.push('<input name="prompt_data" type="',o.input_type+'" ','class="',o.input_classes+'" ','value="',o.default_value+'"','placeholder="',o.placeholder+'"',"/>"),a.form(l.join(""),s,t.omit(o,"default_value","placeholder","input_type","input_classes"))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpYWxvZy5taW4uanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJkZXBlbmRlbmNpZXMiLCJfIiwiS2hvYWkiLCJFdmVudEVtaXR0ZXIiLCJQcmVPcHRpb25zIiwiVGVtcGxhdGUiLCJtb2R1bGUiLCJEaWFsb2dCdXR0b24iLCJ0aGlzIiwiX2RlZmF1bHRfY2xpY2thYmxlX2NiIiwiYnV0dG9uIiwiaXNWaXNpYmxlIiwiaXNFbmFibGUiLCJnZXREaWFsb2ciLCJpc0NsaWNrYWJsZSIsIl9pbml0X2J0biIsImluc3RhbmNlIiwiYWRkTGlzdGVuZXIiLCJfYnRuX2V2ZW50X2F0dGFjaGVkIiwiX2J0bl9ldmVudF9kZXRhY2hlZCIsIl9idG5fZXZlbnRfZGlhbG9nX3RvZ2dsZV9lbmFibGUiLCJfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfcGVuZGluZyIsImRpYWxvZyIsIl9idXR0b25zIiwiaWQiLCJub3RpY2VfZGF0YSIsInRvZ2dsZUVuYWJsZSIsImRhdGEiLCJvcHRpb25zIiwiZGlzYWJsZV9vbl9wZW5kaW5nIiwib3B0aW9uIiwidHlwZV9wcmVmaXgiLCJjYWxsIiwiZ2V0IiwiY29uc3RhbnQiLCJQUkVfT1BUSU9OU19OQU1FIiwibmFtZSIsImVuYWJsZWQiLCJ2aXNpYmxlIiwidGVtcGxhdGVfaW5zdGFuY2UiLCJoYXNPd25Qcm9wZXJ0eSIsImFkZExpc3RlbmVycyIsImV2ZW50cyIsIlRFTVBMQVRFX1RZUEUiLCJUWVBFX0lORk8iLCJUWVBFX1BSSU1BUlkiLCJUWVBFX1NVQ0NFU1MiLCJUWVBFX1dBUk5JTkciLCJUWVBFX0RBTkdFUiIsIk9LIiwiQ0FOQ0VMIiwiWUVTIiwiTk8iLCJSRVRSWSIsIkJVVFRPTlNfT0tfT05MWSIsIkJVVFRPTlNfT0tfQ0FOQ0VMIiwiQlVUVE9OU19ZRVNfTk8iLCJCVVRUT05TX1lFU19OT19DQU5DRUwiLCJCVVRUT05TX1JFVFJZX0NBTkNFTCIsImxhYmVsIiwiaWNvbiIsInR5cGUiLCJzaXplIiwiaGFuZGxlciIsImNsaWNrYWJsZSIsInRlbXBsYXRlX25hbWUiLCJ0ZW1wbGF0ZSIsInV0aWwiLCJpbmhlcml0IiwiZGVmaW5lQ29uc3RhbnQiLCJnbG9iYWxPcHRpb24iLCJ1cGRhdGUiLCJwcm90b3R5cGUiLCJzZXRUZW1wbGF0ZSIsIkVycm9yIiwiZGlzY29ubmVjdCIsImNvbm5lY3QiLCJnZXRUZW1wbGF0ZSIsImRlZmF1bHRfb3B0aW9ucyIsImhhc1RlbXBsYXRlIiwiZGVmYXVsdF90ZW1wbGF0ZSIsImRlZmF1bHRUZW1wbGF0ZSIsInRlbXBsYXRlSW5zdGFuY2UiLCJ2YWx1ZSIsImJlT2JqZWN0IiwiYXBwbHkiLCJ0b0FycmF5IiwiYXJndW1lbnRzIiwiZXh0ZW5kIiwib21pdCIsInNldEhhbmRsZXIiLCJjYWxsYmFjayIsImlzRnVuY3Rpb24iLCJCb29sZWFuIiwiY2xpY2siLCJlbWl0RXZlbnQiLCJjYWxsRnVuYyIsInRvZ2dsZSIsInNob3ciLCJpc1VuZGVmaW5lZCIsImhpZGUiLCJpc19lbmFibGUiLCJkaXNhYmxlIiwiZW5hYmxlIiwicmVuZGVyIiwicmVEcmF3IiwiZ2V0RE9NIiwiZ2V0T3RoZXJCdXR0b24iLCJnZXRCdXR0b24iLCJnZXRDbG9zZUtleSIsImNsb3NlRGlhbG9nIiwiZm9yY2UiLCJjbG9zZSIsIndhc0Nsb3NlRGlhbG9nIiwic2V0Q2xvc2VkQnkiLCJidXR0b25fcHJlX29wdGlvbnMiLCJpc0RlZmluZWQiLCJmcmVlemVfb3B0aW9ucyIsImlzT2JqZWN0IiwidXBkYXRlT3B0aW9ucyIsInR5cGVzIiwiYWxsX2J1dHRvbl9vcHRpb25zIiwiYnV0dG9uX29wdGlvbnMiLCJidXR0b25zIiwiY2FzdEFycmF5IiwibWFwIiwidHlwZV9vcHRpb25zIiwiY2xvbmUiLCJsZW5ndGgiLCJzaGlmdCIsImRlZmF1bHRDbGlja2FibGUiLCJlYWNoIiwidG9Mb3dlckNhc2UiLCJfY2xvc2VfZGlhbG9nX2hhbmRsZXIiLCJDTE9TRSIsImpRdWVyeSIsIkRpYWxvZyIsIl9kZWZhdWx0X2Nsb3NhYmxlX2Z1bmMiLCJkaWFsb2dfaW5zdGFuY2UiLCJfZGVmYXVsdF9jbGlja2FibGVfZnVuYyIsInJlc2V0RGlhbG9nIiwic3RhdHVzIiwiU1RBVFVTX0lOSVRJQUwiLCJwZW5kaW5nIiwibG9hZGluZyIsImFqYXhfd29ya2VyIiwiX2RpYWxvZ3MiLCJjbG9zZWRfYnkiLCJzZWxmIiwiYXR0YWNoQnV0dG9uIiwidXBkYXRlRGlhbG9nQ29udGVudENhbGxiYWNrIiwiY29udGVudCIsImNvbnRlbnRfaGFuZGxlciIsInVwZGF0ZUNvbnRlbnQiLCJTVEFUVVNfT1BFTkVEIiwiU1RBVFVTX0hJRElORyIsIlNUQVRVU19DTE9TRUQiLCJTSVpFX1NNQUxMIiwiU0laRV9OT1JNQUwiLCJTSVpFX0xBUkdFIiwidGl0bGUiLCJjbGFzc2VzIiwiY2xvc2FibGUiLCJnZXRDb250ZW50IiwiYmluZCIsIm5ld19jb250ZW50IiwiaXNPcGVuZWQiLCJpc0luaXRpbmciLCJpbmRleE9mIiwiaXNWaXNpYmxpbmciLCJpc0hpZGluZyIsImlzQ2xvc2VkIiwiaXNQZW5kaW5nIiwicmVzb2x2ZWQiLCJpc1N0cmluZyIsImlzTnVtYmVyIiwiaGFzIiwibGlzdGVuIiwiYXR0YWNoTXVsdGlCdXR0b25zIiwiaGFzQnV0dG9uIiwicmVtb3ZlQnV0dG9uIiwidW5saXN0ZW4iLCJidXR0b25fbmFtZSIsImlzQ2xvc2VhYmxlIiwib3BlbiIsImJ5IiwicmVzZXQiLCJpc0Nsb3NlZEJ5IiwicmVxdWlyZSIsIiQiLCJBamF4IiwiY3JlYXRlQ2FuY2VsQnV0dG9uSGFuZGxlciIsImNyZWF0ZUJ1dHRvbnNIYW5kbGVyIiwiZm9ybSIsInZhbGlkYXRlX3Jlc3VsdCIsInVwZGF0ZUZvcm1NZXNzYWdlIiwidmFsaWRhdG9yIiwiZGlhbG9nRm9ybUNvbnRlbnRIYW5kbGVyIiwiam9pbiIsImNsYXNzZXNUb1NlbGVjdG9yIiwiaXNBcnJheSIsInNwbGl0IiwiZmxhdHRlbiIsImlzRW1wdHkiLCJjbGFzc19uYW1lIiwidHJpbSIsIm1lc3NhZ2UiLCJtZXNzYWdlX2RvbSIsImh0bWwiLCJhZGREaWFsb2dEYXRhIiwiZGlhbG9nX2RvbV9pZCIsImdldERPTUlEIiwiZm9ybV9zZWxlY3RvciIsImZvcm1fY2xhc3NlcyIsImZvcm1fbWVzc2FnZV9zZWxlY3RvciIsIm1lc3NhZ2VfY2xhc3NlcyIsImFkZERpYWxvZ01ldGhvZHMiLCJnZXRGb3JtRE9NIiwiY2xlYXJGb3JtTWVzc2FnZSIsImdldEZvcm1EYXRhIiwiakZvcm0iLCJjb25zb2xlIiwid2FybiIsImFkZERpYWxvZ0V2ZW50cyIsImZvcm1fc3VibWl0X2V2ZW50X2xpc3RlbmVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdF9idXR0b25fbmFtZSIsIm9uIiwiY2FuY2VsX2J1dHRvbl9uYW1lIiwia2V5Iiwib2ZmIiwiRFlOQU1JQ19DT05URU5UX1BSRV9PUFRJT05TX05BTUUiLCJkeW5hbWljQ29udGVudCIsInVybCIsInVwZGF0ZV9jb250ZW50X2NiIiwiaXNOdWxsIiwiYXciLCJkb25lIiwicmVzcG9uc2UiLCJmYWlsIiwiZXJyb3JfY29udGVudCIsImFsd2F5cyIsImFib3J0IiwicmVxdWVzdCIsImJveCIsImRlZmF1bHRzIiwiaGFzX2Zvb3RlciIsImhhc19oZWFkZXIiLCJjbG9zZV9tYW51YWwiLCJESUFMT0dfQUxFUlRfUFJFX09QVElPTlNfTkFNRSIsImNsb3NlX2J1dHRvbl9vcHRpb25zIiwiYWxlcnQiLCJESUFMT0dfQ09ORklSTV9QUkVfT1BUSU9OU19OQU1FIiwiZGVmYXVsdF9idXR0b24iLCJjb25maXJtIiwibm9vcCIsImxhc3QiLCJPYmplY3QiLCJrZXlzIiwiRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FIiwiYXR0cmlidXRlcyIsImlGcmFtZSIsImF0dHJzIiwidmFsIiwiaXNCb29sZWFuIiwicHVzaCIsIlNVQk1JVCIsIlNVQk1JVF9DQU5DRUwiLCJESUFMT0dfRk9STV9QUkVfT1BUSU9OU19OQU1FIiwiYXV0b19mb2N1cyIsImJ1dHRvbnNfZXh0ZW5kX29wdGlvbnMiLCJjYW5jZWwiLCJzdWJtaXQiLCJhdHRhY2hlZF9idXR0b24iLCJzZXRUaW1lb3V0IiwiZmluZCIsImZpcnN0IiwiZm9jdXMiLCJESUFMT0dfUFJPTVBUX1BSRV9PUFRJT05TX05BTUUiLCJkZWZhdWx0X3ZhbHVlIiwicGxhY2Vob2xkZXIiLCJpbnB1dF90eXBlIiwiaW5wdXRfY2xhc3NlcyIsInByb21wdCIsInByb21wdF9jYiIsImJ0bl9uYW1lIiwiYnRuIl0sIm1hcHBpbmdzIjoiQ0FBQyxTQUFVQSxFQUFNQyxHQUNiLEdBQXNCLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFBSyxDQUM1QyxHQUFJQyxJQUNBLFNBQ0EsVUFDQSx3QkFDQSxzQkFDQSxtQkFFSkYsUUFBT0UsRUFBYyxTQUFVQyxFQUFHQyxFQUFPQyxFQUFjQyxFQUFZQyxHQUMvRCxHQUFJQyxHQUFTVCxFQUFRSSxFQUFHQyxFQUFPQyxFQUFjQyxFQUFZQyxFQUt6RCxPQUhBSCxHQUFNSyxhQUFlRCxFQUNyQlYsRUFBS1csYUFBZUQsRUFFYkEsUUFFUixDQUNILEdBQUlBLEdBQVNULEVBQ1RELEVBQUtLLEVBQ0xMLEVBQUtNLE1BQ0xOLEVBQUtNLE1BQU1DLGNBQWdCUCxFQUFLTyxhQUNoQ1AsRUFBS00sTUFBTUUsWUFBY1IsRUFBS1EsV0FDOUJSLEVBQUtNLE1BQU1HLFVBQVlULEVBQUtTLFNBR2hDVCxHQUFLTSxNQUFNSyxhQUFlRCxFQUMxQlYsRUFBS1csYUFBZUQsSUFFMUJFLEtBQU0sU0FBVVAsRUFBR0MsRUFBT0MsRUFBY0MsRUFBWUMsR0FvQ2xELFFBQVNJLEdBQXNCQyxHQUMzQixNQUFPQSxHQUFPQyxhQUFlRCxFQUFPRSxZQUFjRixFQUFPRyxZQUFZQyxjQUd6RSxRQUFTQyxHQUFVQyxHQUNmQSxFQUFTQyxZQUFZLFNBQVVDLEdBQy9CRixFQUFTQyxZQUFZLFdBQVlFLEdBQ2pDSCxFQUFTQyxZQUFZLHVCQUF3QkcsR0FDN0NKLEVBQVNDLFlBQVksd0JBQXlCSSxHQUdsRCxRQUFTSCxHQUFv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LFNBQ1B3SCxjQUFlLEdBQ2ZDLFlBQWEsR0FDYkMsV0FBWSxPQUNaQyxjQUFlLGVBQ2ZaLHdCQUNJRSxRQUNJdE4sTUFBTyxTQUluQjZFLEVBQU9vSixPQUFTLFNBQVU5RSxFQUFTbkgsRUFBVS9ELEdBc0J6QyxRQUFTaVEsR0FBVUMsRUFBVTdGLEVBQU04RixHQUMvQixJQUFLOUYsRUFFRCxXQURBdEcsSUFBUyxFQUliLElBQUlSLEdBQVF2RCxFQUFRNFAsYUFFaEIsWUFBYU0sSUFDYjNNLEVBQVE4RyxFQUFLbUYsS0FBSyw2QkFBNkJaLE1BQy9DdUIsRUFBSWpMLGVBR1JuQixFQUFTUixHQWxDYixHQUFJb0UsS0F1Q0osT0FwQ0t0SixHQUFFcUgsU0FBUzFGLEtBQ1pBLEdBQ0lvSSxNQUFPcEksRUFBVSxLQUdwQjNCLEVBQUUyRixXQUFXRCxLQUNkQSxFQUFXMUYsRUFBRStQLE1BR2pCcE8sRUFBVXhCLEVBQVc2QixJQUFJdUcsRUFBTytJLCtCQUFnQzNQLEdBRWhFMkgsRUFBUW1ILEtBQUssTUFBTzVELEVBQVMsUUFDN0J2RCxFQUFRbUgsS0FBSyxtQ0FBb0M5TyxFQUFROFAsV0FBYSxLQUNsRSxVQUFXOVAsRUFBUStQLGNBQWdCLEtBQ25DLFVBQVcvUCxFQUFRNFAsY0FBZ0IsSUFDbkMsZ0JBQWlCNVAsRUFBUTZQLFlBQWMsSUFDdkMsTUFrQktqSixFQUFPeUQsS0FBSzFDLEVBQVErQyxLQUFLLElBQUt1RixFQUFXNVIsRUFBRXdGLEtBQUs3RCxFQUFTLGdCQUFpQixjQUFlLGFBQWMiLCJmaWxlIjoiZGlhbG9nLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgICAgICdsb2Rhc2gnLFxuICAgICAgICAgICAgJ2tob2FpanMnLFxuICAgICAgICAgICAgJ2tob2FpanMtZXZlbnQtZW1pdHRlcicsXG4gICAgICAgICAgICAna2hvYWlqcy1wcmUtb3B0aW9ucycsXG4gICAgICAgICAgICAna2hvYWlqcy10ZW1wbGF0ZSdcbiAgICAgICAgXTtcbiAgICAgICAgZGVmaW5lKGRlcGVuZGVuY2llcywgZnVuY3Rpb24gKF8sIEtob2FpLCBFdmVudEVtaXR0ZXIsIFByZU9wdGlvbnMsIFRlbXBsYXRlKSB7XG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gZmFjdG9yeShfLCBLaG9haSwgRXZlbnRFbWl0dGVyLCBQcmVPcHRpb25zLCBUZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIEtob2FpLkRpYWxvZ0J1dHRvbiA9IG1vZHVsZTtcbiAgICAgICAgICAgIHJvb3QuRGlhbG9nQnV0dG9uID0gbW9kdWxlO1xuXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbW9kdWxlID0gZmFjdG9yeShcbiAgICAgICAgICAgIHJvb3QuXyxcbiAgICAgICAgICAgIHJvb3QuS2hvYWksXG4gICAgICAgICAgICByb290Lktob2FpLkV2ZW50RW1pdHRlciB8fCByb290LkV2ZW50RW1pdHRlcixcbiAgICAgICAgICAgIHJvb3QuS2hvYWkuUHJlT3B0aW9ucyB8fCByb290LlByZU9wdGlvbnMsXG4gICAgICAgICAgICByb290Lktob2FpLlRlbXBsYXRlIHx8IHJvb3QuVGVtcGxhdGVcbiAgICAgICAgKTtcblxuICAgICAgICByb290Lktob2FpLkRpYWxvZ0J1dHRvbiA9IG1vZHVsZTtcbiAgICAgICAgcm9vdC5EaWFsb2dCdXR0b24gPSBtb2R1bGU7XG4gICAgfVxufSh0aGlzLCBmdW5jdGlvbiAoXywgS2hvYWksIEV2ZW50RW1pdHRlciwgUHJlT3B0aW9ucywgVGVtcGxhdGUpIHtcbiAgICB2YXIgdmVyc2lvbiA9ICcwLjAuMSc7XG4gICAgdmFyIGNvbnN0YW50ID0ge1xuICAgICAgICBQUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nQnV0dG9uJyxcbiAgICAgICAgVEVNUExBVEVfVFlQRTogJ0RpYWxvZ0J1dHRvbicsXG4gICAgICAgIFRZUEVfSU5GTzogJ2luZm8nLFxuICAgICAgICBUWVBFX1BSSU1BUlk6ICdwcmltYXJ5JyxcbiAgICAgICAgVFlQRV9TVUNDRVNTOiAnc3VjY2VzcycsXG4gICAgICAgIFRZUEVfV0FSTklORzogJ3dhcm5pbmcnLFxuICAgICAgICBUWVBFX0RBTkdFUjogJ2RhbmdlcicsXG5cbiAgICAgICAgT0s6ICdvaycsXG4gICAgICAgIENBTkNFTDogJ2NhbmNlbCcsXG4gICAgICAgIFlFUzogJ3llcycsXG4gICAgICAgIE5POiAnbm8nLFxuICAgICAgICBSRVRSWTogJ3JldHJ5JyxcblxuICAgICAgICBCVVRUT05TX09LX09OTFk6IFsnb2snXSxcbiAgICAgICAgQlVUVE9OU19PS19DQU5DRUw6IFsnb2snLCAnY2FuY2VsJ10sXG4gICAgICAgIEJVVFRPTlNfWUVTX05POiBbJ3llcycsICdubyddLFxuICAgICAgICBCVVRUT05TX1lFU19OT19DQU5DRUw6IFsneWVzJywgJ25vJywgJ2NhbmNlbCddLFxuICAgICAgICBCVVRUT05TX1JFVFJZX0NBTkNFTDogWydyZXRyeScsICdjYW5jZWwnXVxuICAgIH07XG4gICAgdmFyIF9idXR0b25zID0ge307XG5cbiAgICBQcmVPcHRpb25zLmRlZmluZShjb25zdGFudC5QUkVfT1BUSU9OU19OQU1FLCB7XG4gICAgICAgIGxhYmVsOiAnVW50aXRsZWQnLFxuICAgICAgICBpY29uOiAnJyxcbiAgICAgICAgdHlwZTogY29uc3RhbnQuVFlQRV9JTkZPLFxuICAgICAgICBzaXplOiAxLFxuICAgICAgICBoYW5kbGVyOiBudWxsLFxuICAgICAgICBkaXNhYmxlX29uX3BlbmRpbmc6IHRydWUsXG4gICAgICAgIGNsaWNrYWJsZTogX2RlZmF1bHRfY2xpY2thYmxlX2NiLFxuICAgICAgICB0ZW1wbGF0ZV9uYW1lOiAnJyxcbiAgICAgICAgdGVtcGxhdGU6IHt9XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gX2RlZmF1bHRfY2xpY2thYmxlX2NiKGJ1dHRvbikge1xuICAgICAgICByZXR1cm4gYnV0dG9uLmlzVmlzaWJsZSgpICYmIGJ1dHRvbi5pc0VuYWJsZSgpICYmIGJ1dHRvbi5nZXREaWFsb2coKS5pc0NsaWNrYWJsZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9pbml0X2J0bihpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZS5hZGRMaXN0ZW5lcignbGlzdGVuJywgX2J0bl9ldmVudF9hdHRhY2hlZCk7XG4gICAgICAgIGluc3RhbmNlLmFkZExpc3RlbmVyKCd1bmxpc3RlbicsIF9idG5fZXZlbnRfZGV0YWNoZWQpO1xuICAgICAgICBpbnN0YW5jZS5hZGRMaXN0ZW5lcignZGlhbG9nLnRvZ2dsZV9lbmFibGUnLCBfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfZW5hYmxlKTtcbiAgICAgICAgaW5zdGFuY2UuYWRkTGlzdGVuZXIoJ2RpYWxvZy50b2dnbGVfcGVuZGluZycsIF9idG5fZXZlbnRfZGlhbG9nX3RvZ2dsZV9wZW5kaW5nKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYnRuX2V2ZW50X2F0dGFjaGVkKGRpYWxvZykge1xuICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXS5kaWFsb2cgPSBkaWFsb2c7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2J0bl9ldmVudF9kZXRhY2hlZChkaWFsb2cpIHtcbiAgICAgICAgX2J1dHRvbnNbdGhpcy5pZF0uZGlhbG9nID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfZW5hYmxlKG5vdGljZV9kYXRhKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKG5vdGljZV9kYXRhLmRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9idG5fZXZlbnRfZGlhbG9nX3RvZ2dsZV9wZW5kaW5nKG5vdGljZV9kYXRhKSB7XG4gICAgICAgIGlmIChub3RpY2VfZGF0YS5kYXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVfb25fcGVuZGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKHRydWUpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBEaWFsb2dCdXR0b24ob3B0aW9uKSB7XG4gICAgICAgIHRoaXMudHlwZV9wcmVmaXggPSAnZGlhbG9nX2J1dHRvbic7XG4gICAgICAgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IFByZU9wdGlvbnMuZ2V0KGNvbnN0YW50LlBSRV9PUFRJT05TX05BTUUsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuaWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgX2J1dHRvbnNbdGhpcy5pZF0gPSB7XG4gICAgICAgICAgICBkaWFsb2c6IG51bGwsXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlX2luc3RhbmNlOiBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vcHRpb24odGhpcy5vcHRpb25zKTtcblxuICAgICAgICBpZiAob3B0aW9uKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uLmhhc093blByb3BlcnR5KCdldmVudHMnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXJzKG9wdGlvbi5ldmVudHMpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25bJ2V2ZW50cyddO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbihvcHRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgX2luaXRfYnRuKHRoaXMpO1xuICAgIH1cblxuICAgIEtob2FpLnV0aWwuaW5oZXJpdChEaWFsb2dCdXR0b24sIEV2ZW50RW1pdHRlcik7XG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2dCdXR0b24sICd2ZXJzaW9uJywgdmVyc2lvbik7XG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2dCdXR0b24sIGNvbnN0YW50KTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHt7fX0gb3B0aW9uc1xuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5nbG9iYWxPcHRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBQcmVPcHRpb25zLnVwZGF0ZShEaWFsb2dCdXR0b24uUFJFX09QVElPTlNfTkFNRSwgb3B0aW9ucyk7XG4gICAgfTtcblxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAodGVtcGxhdGVfaW5zdGFuY2UpIHtcbiAgICAgICAgaWYgKCEodGVtcGxhdGVfaW5zdGFuY2UgaW5zdGFuY2VvZiBUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBUZW1wbGF0ZSBpbnN0YW5jZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlKSB7XG4gICAgICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0ZW1wbGF0ZV9pbnN0YW5jZS5vcHRpb24odGhpcy5vcHRpb25zLnRlbXBsYXRlKTtcbiAgICAgICAgX2J1dHRvbnNbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UgPSB0ZW1wbGF0ZV9pbnN0YW5jZTtcbiAgICAgICAgdGVtcGxhdGVfaW5zdGFuY2UuY29ubmVjdCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0ZW1wbGF0ZSBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIHtudWxsfCp9XG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudGVtcGxhdGVfbmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0X29wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2dCdXR0b24uUFJFX09QVElPTlNfTkFNRSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdF9vcHRpb25zLnRlbXBsYXRlX25hbWUgJiYgVGVtcGxhdGUuaGFzVGVtcGxhdGUoRGlhbG9nQnV0dG9uLlRFTVBMQVRFX1RZUEUsIGRlZmF1bHRfb3B0aW9ucy50ZW1wbGF0ZV9uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudGVtcGxhdGVfbmFtZSA9IGRlZmF1bHRfb3B0aW9ucy50ZW1wbGF0ZV9uYW1lO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0X3RlbXBsYXRlID0gVGVtcGxhdGUuZGVmYXVsdFRlbXBsYXRlKERpYWxvZ0J1dHRvbi5URU1QTEFURV9UWVBFKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFsc2UgIT09IGRlZmF1bHRfdGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy50ZW1wbGF0ZV9uYW1lID0gZGVmYXVsdF90ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFByZU9wdGlvbnMudXBkYXRlKERpYWxvZ0J1dHRvbi5QUkVfT1BUSU9OU19OQU1FLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVfbmFtZTogZGVmYXVsdF90ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpYWxvZyBidXR0b24gZGVmYXVsdCB0ZW1wbGF0ZSBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB0aGlzLnNldFRlbXBsYXRlKFRlbXBsYXRlLnRlbXBsYXRlSW5zdGFuY2UoRGlhbG9nQnV0dG9uLlRFTVBMQVRFX1RZUEUsIHRoaXMub3B0aW9ucy50ZW1wbGF0ZV9uYW1lKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX2J1dHRvbnNbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2U7XG4gICAgfTtcbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICB2YXIgb3B0aW9uID0gS2hvYWkudXRpbC5iZU9iamVjdC5hcHBseShLaG9haSwgXy50b0FycmF5KGFyZ3VtZW50cykpO1xuXG4gICAgICAgIGlmIChvcHRpb24udGVtcGxhdGVfbmFtZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRUZW1wbGF0ZShUZW1wbGF0ZS50ZW1wbGF0ZUluc3RhbmNlKERpYWxvZ0J1dHRvbi5URU1QTEFURV9UWVBFLCBvcHRpb24udGVtcGxhdGVfbmFtZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb24udGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGVtcGxhdGUoKS5vcHRpb24ob3B0aW9uLnRlbXBsYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF8uZXh0ZW5kKHRoaXMub3B0aW9ucywgXy5vbWl0KG9wdGlvbiwgWyd0ZW1wbGF0ZV9uYW1lJ10pKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5zZXRIYW5kbGVyID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMub3B0aW9uKCdoYW5kbGVyJywgY2FsbGJhY2spO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZGlhbG9nIGluc3RhbmNlXG4gICAgICogQHJldHVybnMgeyhEaWFsb2d8Ym9vbGVhbil9IEZhbHNlIGlmIG5vdCBhdHRhY2ggdG8gZGlhbG9nIHlldFxuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuZ2V0RGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX2J1dHRvbnNbdGhpcy5pZF0uZGlhbG9nKSB7XG4gICAgICAgICAgICByZXR1cm4gX2J1dHRvbnNbdGhpcy5pZF0uZGlhbG9nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmlzQ2xpY2thYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5jbGlja2FibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsaWNrYWJsZS5jYWxsKHRoaXMsIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5vcHRpb25zLmNsaWNrYWJsZSk7XG4gICAgfTtcblxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuaXNWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihfYnV0dG9uc1t0aGlzLmlkXS52aXNpYmxlKTtcbiAgICB9O1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuaXNFbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKF9idXR0b25zW3RoaXMuaWRdLmVuYWJsZWQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDbGljayBidXR0b25cbiAgICAgKiBFbWl0IGV2ZW50czpcbiAgICAgKiAtIGNsaWNrOiBydW4gYmVmb3JlIGJ1dHRvbiBoYW5kbGVyIHJ1blxuICAgICAqIC0gY2xpY2tlZDogcnVuZyBhZnRlciBidXR0b24gaGFuZGxlciBydW5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2xpY2thYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdjbGljaycpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgS2hvYWkudXRpbC5jYWxsRnVuYyh0aGlzLm9wdGlvbnMuaGFuZGxlciwgdGhpcywgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnY2xpY2tlZCcpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNob3cgb3IgaGlkZSBidXR0b25cbiAgICAgKiBFbWl0IGV2ZW50czpcbiAgICAgKiAtIHNob3cvaGlkZVxuICAgICAqIC0gdG9nZ2xlOiBbaXMgc2hvdz9dXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaG93IFRydWUgb3IgbWlzc2luZzogc2hvdywgRmFsc2U6IGhpZGVcbiAgICAgKi9cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChzaG93KSB7XG4gICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKHNob3cpKSB7XG4gICAgICAgICAgICBzaG93ID0gIV9idXR0b25zW3RoaXMuaWRdLnZpc2libGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2J1dHRvbnNbdGhpcy5pZF0udmlzaWJsZSAhPT0gc2hvdykge1xuICAgICAgICAgICAgX2J1dHRvbnNbdGhpcy5pZF0udmlzaWJsZSA9IHNob3c7XG4gICAgICAgICAgICBpZiAoc2hvdykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdzaG93Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdoaWRlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd0b2dnbGUnLCBzaG93KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZSh0cnVlKTtcbiAgICB9O1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50b2dnbGUoZmFsc2UpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgZW5hYmxlZCBzdGF0dXNcbiAgICAgKiBFbWl0IGV2ZW50czpcbiAgICAgKiAtIGVuYWJsZWQvZGlzYWJsZWRcbiAgICAgKiAtIHRvZ2dsZV9lbmFibGVkOiBbaXMgZW5hYmxlZD9dXG4gICAgICogQHBhcmFtIGlzX2VuYWJsZVxuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUudG9nZ2xlRW5hYmxlID0gZnVuY3Rpb24gKGlzX2VuYWJsZSkge1xuICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChpc19lbmFibGUpKSB7XG4gICAgICAgICAgICBpc19lbmFibGUgPSAhX2J1dHRvbnNbdGhpcy5pZF0uZW5hYmxlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfYnV0dG9uc1t0aGlzLmlkXS5lbmFibGVkICE9PSBpc19lbmFibGUpIHtcbiAgICAgICAgICAgIF9idXR0b25zW3RoaXMuaWRdLmVuYWJsZWQgPSBpc19lbmFibGU7XG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudChpc19lbmFibGUgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd0b2dnbGVfZW5hYmxlJywgaXNfZW5hYmxlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKGZhbHNlKTtcbiAgICB9O1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZUVuYWJsZSh0cnVlKTtcbiAgICB9O1xuXG5cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGVtcGxhdGUoKS5yZW5kZXIoKTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoIGJ1dHRvbiBET01cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLnJlRHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gX2J1dHRvbnNbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UucmVEcmF3KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5nZXRET00gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSAmJiAoX2J1dHRvbnNbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UgaW5zdGFuY2VvZiBUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZS5nZXRET00oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcmV0dXJucyB7RGlhbG9nQnV0dG9ufG51bGx8KnxPYmplY3R8RXZlbnRFbWl0dGVyfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmdldE90aGVyQnV0dG9uID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGlhbG9nKCkuZ2V0QnV0dG9uKG5hbWUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEaWFsb2cgY2xvc2UgXCJieVwiIGtleVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5nZXRDbG9zZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5uYW1lO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIENsb3NlIGRpYWxvZ1xuICAgICAqIEBwYXJhbSBmb3JjZVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuY2xvc2VEaWFsb2cgPSBmdW5jdGlvbiAoZm9yY2UpIHtcbiAgICAgICAgdmFyIGRpYWxvZyA9IHRoaXMuZ2V0RGlhbG9nKCk7XG5cbiAgICAgICAgaWYgKGRpYWxvZykge1xuICAgICAgICAgICAgZGlhbG9nLmNsb3NlKGZvcmNlLCB0aGlzLmdldENsb3NlS2V5KCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIGNsb3NlZCBieSB0aGlzIGJ1dHRvblxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUud2FzQ2xvc2VEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkaWFsb2cgPSB0aGlzLmdldERpYWxvZygpO1xuXG4gICAgICAgIGlmIChkaWFsb2cpIHtcbiAgICAgICAgICAgIHJldHVybiBkaWFsb2cuc2V0Q2xvc2VkQnkodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8IFN0YXRpYyBtZXRob2RzXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8XG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgICovXG5cbiAgICB2YXIgYnV0dG9uX3ByZV9vcHRpb25zID0ge307XG5cbiAgICBEaWFsb2dCdXR0b24uaXNEZWZpbmVkID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGJ1dHRvbl9wcmVfb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9O1xuXG4gICAgRGlhbG9nQnV0dG9uLmRlZmluZSA9IGZ1bmN0aW9uIChuYW1lLCBvcHRpb25zLCBmcmVlemVfb3B0aW9ucykge1xuICAgICAgICBidXR0b25fcHJlX29wdGlvbnNbbmFtZV0gPSB7XG4gICAgICAgICAgICBvcHRpb25zOiBfLmlzT2JqZWN0KG9wdGlvbnMpID8gb3B0aW9ucyA6IHt9LFxuICAgICAgICAgICAgZnJlZXplX29wdGlvbnM6IF8uaXNPYmplY3QoZnJlZXplX29wdGlvbnMpID8gZnJlZXplX29wdGlvbnMgOiB7fVxuICAgICAgICB9O1xuICAgICAgICBidXR0b25fcHJlX29wdGlvbnNbbmFtZV0uZnJlZXplX29wdGlvbnMubmFtZSA9IG5hbWU7XG4gICAgfTtcblxuICAgIERpYWxvZ0J1dHRvbi51cGRhdGVPcHRpb25zID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKERpYWxvZ0J1dHRvbi5pc0RlZmluZWQobmFtZSkpIHtcbiAgICAgICAgICAgIF8uZXh0ZW5kKGJ1dHRvbl9wcmVfb3B0aW9uc1tuYW1lXS5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cblxuICAgIERpYWxvZ0J1dHRvbi5mYWN0b3J5ID0gZnVuY3Rpb24gKHR5cGVzLCBhbGxfYnV0dG9uX29wdGlvbnMsIGJ1dHRvbl9vcHRpb25zKSB7XG4gICAgICAgIGlmICghXy5pc09iamVjdChhbGxfYnV0dG9uX29wdGlvbnMpKSB7XG4gICAgICAgICAgICBhbGxfYnV0dG9uX29wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIV8uaXNPYmplY3QoYnV0dG9uX29wdGlvbnMpKSB7XG4gICAgICAgICAgICBidXR0b25fb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGJ1dHRvbnMgPSBfLmNhc3RBcnJheSh0eXBlcykubWFwKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucywgdHlwZV9vcHRpb25zO1xuXG4gICAgICAgICAgICBpZiAoIURpYWxvZ0J1dHRvbi5pc0RlZmluZWQodHlwZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpYWxvZyBCdXR0b24gdHlwZSBpcyB1bnJlZ2lzdGVyZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHlwZV9vcHRpb25zID0gYnV0dG9uX3ByZV9vcHRpb25zW3R5cGVdO1xuICAgICAgICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LFxuICAgICAgICAgICAgICAgIHR5cGVfb3B0aW9ucy5vcHRpb25zLFxuICAgICAgICAgICAgICAgIF8uY2xvbmUoYWxsX2J1dHRvbl9vcHRpb25zKSxcbiAgICAgICAgICAgICAgICBidXR0b25fb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSA/IGJ1dHRvbl9vcHRpb25zW3R5cGVdIDoge30sXG4gICAgICAgICAgICAgICAgdHlwZV9vcHRpb25zLmZyZWV6ZV9vcHRpb25zKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEaWFsb2dCdXR0b24ob3B0aW9ucyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChidXR0b25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbnMuc2hpZnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBidXR0b25zO1xuICAgIH07XG5cbiAgICBEaWFsb2dCdXR0b24uZGVmYXVsdENsaWNrYWJsZSA9IF9kZWZhdWx0X2NsaWNrYWJsZV9jYjtcblxuICAgIC8qXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8IFByZWRlZmluZSBidXR0b24gdHlwZXNcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgIHxcbiAgICAgKi9cblxuICAgIF8uZWFjaChbJ09rJywgJ1llcycsICdObycsICdSZXRyeScsICdJZ25vcmUnXSwgZnVuY3Rpb24gKGxhYmVsKSB7XG4gICAgICAgIERpYWxvZ0J1dHRvbi5kZWZpbmUobGFiZWwudG9Mb3dlckNhc2UoKSwge1xuICAgICAgICAgICAgbGFiZWw6IGxhYmVsXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgRGlhbG9nQnV0dG9uLmRlZmluZSgnY2FuY2VsJywge1xuICAgICAgICBsYWJlbDogJ0NhbmNlbCcsXG4gICAgICAgIGRpc2FibGVfb25fcGVuZGluZzogZmFsc2VcbiAgICB9KTtcblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nQnV0dG9uLCB7XG4gICAgICAgICAgICBDTE9TRTogJ2Nsb3NlJ1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBfY2xvc2VfZGlhbG9nX2hhbmRsZXIoYnV0dG9uKSB7XG4gICAgICAgICAgICB2YXIgZGlhbG9nID0gYnV0dG9uLmdldERpYWxvZygpO1xuXG4gICAgICAgICAgICBpZiAoZGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsb3NlRGlhbG9nKEJvb2xlYW4oYnV0dG9uLm9wdGlvbnMuZm9yY2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIERpYWxvZ0J1dHRvbi5kZWZpbmUoRGlhbG9nQnV0dG9uLkNMT1NFLCB7XG4gICAgICAgICAgICBsYWJlbDogJ0Nsb3NlJyxcbiAgICAgICAgICAgIHR5cGU6IERpYWxvZ0J1dHRvbi5UWVBFX0lORk8sXG4gICAgICAgICAgICBmb3JjZTogZmFsc2VcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgaGFuZGxlcjogX2Nsb3NlX2RpYWxvZ19oYW5kbGVyXG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cblxuICAgIHJldHVybiBEaWFsb2dCdXR0b247XG59KSk7XG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xyXG4gICAgICAgICAgICAnbG9kYXNoJyxcclxuICAgICAgICAgICAgJ2pxdWVyeScsXHJcbiAgICAgICAgICAgICdraG9haWpzJyxcclxuICAgICAgICAgICAgJ2tob2FpanMtZXZlbnQtZW1pdHRlcicsXHJcbiAgICAgICAgICAgICdraG9haWpzLXByZS1vcHRpb25zJyxcclxuICAgICAgICAgICAgJ2tob2FpanMtdGVtcGxhdGUnLFxyXG4gICAgICAgICAgICAnZGlhbG9nX2J1dHRvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGRlZmluZShkZXBlbmRlbmNpZXMsIGZ1bmN0aW9uIChfLCBqUXVlcnksIEtob2FpLCBFdmVudEVtaXR0ZXIsIFByZU9wdGlvbnMsIFRlbXBsYXRlLCBEaWFsb2dCdXR0b24pIHtcclxuICAgICAgICAgICAgdmFyIG1vZHVsZSA9IGZhY3RvcnkoXywgalF1ZXJ5LCBLaG9haSwgRXZlbnRFbWl0dGVyLCBQcmVPcHRpb25zLCBUZW1wbGF0ZSwgRGlhbG9nQnV0dG9uKTtcclxuXHJcbiAgICAgICAgICAgIEtob2FpLkRpYWxvZyA9IG1vZHVsZTtcclxuICAgICAgICAgICAgcm9vdC5EaWFsb2cgPSBtb2R1bGU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICB2YXIgbW9kdWxlID0gZmFjdG9yeShcclxuICAgICAgICAgICAgcm9vdC5fLFxyXG4gICAgICAgICAgICByb290LmpRdWVyeSxcclxuICAgICAgICAgICAgcm9vdC5LaG9haSxcclxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5FdmVudEVtaXR0ZXIpIHx8IHJvb3QuRXZlbnRFbWl0dGVyLFxyXG4gICAgICAgICAgICAocm9vdC5LaG9haSAmJiByb290Lktob2FpLlByZU9wdGlvbnMpIHx8IHJvb3QuUHJlT3B0aW9ucyxcclxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5UZW1wbGF0ZSkgfHwgcm9vdC5UZW1wbGF0ZSxcclxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5EaWFsb2dCdXR0b24pIHx8IHJvb3QuRGlhbG9nQnV0dG9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcm9vdC5LaG9haS5EaWFsb2cgPSBtb2R1bGU7XHJcbiAgICAgICAgcm9vdC5EaWFsb2cgPSBtb2R1bGU7XHJcbiAgICB9XHJcbn0odGhpcywgZnVuY3Rpb24gKF8sIGpRdWVyeSwgS2hvYWksIEV2ZW50RW1pdHRlciwgUHJlT3B0aW9ucywgVGVtcGxhdGUsIERpYWxvZ0J1dHRvbikge1xyXG4gICAgdmFyIHZlcnNpb24gPSAnMC4wLjEnO1xyXG4gICAgdmFyIGNvbnN0YW50ID0ge1xyXG4gICAgICAgIFBSRV9PUFRJT05TX05BTUU6ICdLaG9haS5EaWFsb2cnLFxyXG4gICAgICAgIFRFTVBMQVRFX1RZUEU6ICdEaWFsb2cnLFxyXG4gICAgICAgIFNUQVRVU19JTklUSUFMOiAnaW5pdGlhbCcsXHJcbiAgICAgICAgU1RBVFVTX09QRU5FRDogJ29wZW5lZCcsXHJcbiAgICAgICAgU1RBVFVTX0hJRElORzogJ2hpZGluZycsXHJcbiAgICAgICAgU1RBVFVTX0NMT1NFRDogJ3JlbW92ZWQnLFxyXG5cclxuICAgICAgICBUWVBFX0lORk86ICdpbmZvJyxcclxuICAgICAgICBUWVBFX1NVQ0NFU1M6ICdzdWNjZXNzJyxcclxuICAgICAgICBUWVBFX1BSSU1BUlk6ICdwcmltYXJ5JyxcclxuICAgICAgICBUWVBFX1dBUk5JTkc6ICd3YXJuaW5nJyxcclxuICAgICAgICBUWVBFX0RBTkdFUjogJ2RhbmdlcicsXHJcblxyXG4gICAgICAgIFNJWkVfU01BTEw6ICdzbWFsbCcsXHJcbiAgICAgICAgU0laRV9OT1JNQUw6ICdub3JtYWwnLFxyXG4gICAgICAgIFNJWkVfTEFSR0U6ICdsYXJnZSdcclxuICAgIH07XHJcbiAgICB2YXIgX2RpYWxvZ3MgPSB7fTtcclxuXHJcbiAgICBmdW5jdGlvbiBfZGVmYXVsdF9jbG9zYWJsZV9mdW5jKGRpYWxvZ19pbnN0YW5jZSkge1xyXG4gICAgICAgIHJldHVybiBkaWFsb2dfaW5zdGFuY2UuaXNFbmFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfZGVmYXVsdF9jbGlja2FibGVfZnVuYyhkaWFsb2dfaW5zdGFuY2UpIHtcclxuICAgICAgICByZXR1cm4gZGlhbG9nX2luc3RhbmNlLmlzRW5hYmxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgUHJlT3B0aW9ucy5kZWZpbmUoY29uc3RhbnQuUFJFX09QVElPTlNfTkFNRSwge1xyXG4gICAgICAgIHRpdGxlOiAnRGlhbG9nJyxcclxuICAgICAgICB0eXBlOiBjb25zdGFudC5UWVBFX0lORk8sXHJcbiAgICAgICAgY29udGVudDogJycsXHJcbiAgICAgICAgY29udGVudF9oYW5kbGVyOiBudWxsLFxyXG4gICAgICAgIHRlbXBsYXRlX25hbWU6ICcnLFxyXG4gICAgICAgIHRlbXBsYXRlOiB7fSxcclxuICAgICAgICBzaXplOiBjb25zdGFudC5TSVpFX05PUk1BTCxcclxuICAgICAgICBjbGFzc2VzOiAnJyxcclxuICAgICAgICBjbG9zYWJsZTogX2RlZmF1bHRfY2xvc2FibGVfZnVuYyxcclxuICAgICAgICBjbGlja2FibGU6IF9kZWZhdWx0X2NsaWNrYWJsZV9mdW5jXHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiByZXNldERpYWxvZyhpZCkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBzdGF0dXM6IGNvbnN0YW50LlNUQVRVU19JTklUSUFMLFxyXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBwZW5kaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgIGFqYXhfd29ya2VyOiBudWxsLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZV9pbnN0YW5jZTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKF9kaWFsb2dzLmhhc093blByb3BlcnR5KGlkKSkge1xyXG4gICAgICAgICAgICBkYXRhLnRlbXBsYXRlX2luc3RhbmNlID0gX2RpYWxvZ3NbaWRdLnRlbXBsYXRlX2luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2RpYWxvZ3NbaWRdID0gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbiBhZGQgZXZlbnRzIHRvIGRpYWxvZyBieSBhZGQgZXZlbnRzIHRvIG9wdGlvbiBwYXJhbWV0ZXIgZmllbGQgYXMgJ2V2ZW50cydcclxuICAgICAqIEFkZCBidXR0b25zIHZpYSBvcHRpb25zIHBhcmFtZXRlciBmaWVsZCBhcyAnYnV0dG9ucydcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gRGlhbG9nIG9wdGlvbnNcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQGV4dGVuZCBFdmVudEVtaXR0ZXJcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRGlhbG9nKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnR5cGVfcHJlZml4ID0gJ2RpYWxvZyc7XHJcblxyXG4gICAgICAgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChjb25zdGFudC5QUkVfT1BUSU9OU19OQU1FKTtcclxuXHJcbiAgICAgICAgdGhpcy5jbG9zZWRfYnkgPSAnJztcclxuICAgICAgICB0aGlzLmRhdGEgPSB7fTtcclxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSB7fTtcclxuXHJcbiAgICAgICAgcmVzZXREaWFsb2codGhpcy5pZCk7XHJcblxyXG4gICAgICAgIHRoaXMub3B0aW9uKHRoaXMub3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdldmVudHMnKSAmJiBvcHRpb25zLmV2ZW50cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcnMob3B0aW9ucy5ldmVudHMpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnNbJ2V2ZW50cyddO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnYnV0dG9ucycpICYmIG9wdGlvbnMuYnV0dG9ucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIF8uZWFjaChvcHRpb25zLmJ1dHRvbnMsIGZ1bmN0aW9uIChidXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmF0dGFjaEJ1dHRvbihidXR0b24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgb3B0aW9uc1snYnV0dG9ucyddID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zWydidXR0b25zJ107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9uKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBLaG9haS51dGlsLmluaGVyaXQoRGlhbG9nLCBFdmVudEVtaXR0ZXIpO1xyXG5cclxuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCAndmVyc2lvbicsIHZlcnNpb24pO1xyXG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2csIGNvbnN0YW50KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHVwIGRlZmF1bHQgb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHt7fX0gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBEaWFsb2cuZ2xvYmFsT3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBQcmVPcHRpb25zLnVwZGF0ZShEaWFsb2cuUFJFX09QVElPTlNfTkFNRSwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZURpYWxvZ0NvbnRlbnRDYWxsYmFjayhjb250ZW50KSB7XHJcbiAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuY29udGVudF9oYW5kbGVyKSkge1xyXG4gICAgICAgICAgICBjb250ZW50ID0gdGhpcy5vcHRpb25zLmNvbnRlbnRfaGFuZGxlcihjb250ZW50LCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2NvbnRlbnRfbG9hZGVkJywgY29udGVudCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50KGNvbnRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIERpYWxvZy5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5jb250ZW50KSkge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnbG9hZF9jb250ZW50Jyk7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb250ZW50ID0gdGhpcy5vcHRpb25zLmNvbnRlbnQodXBkYXRlRGlhbG9nQ29udGVudENhbGxiYWNrLmJpbmQodGhpcyksIHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuY29udGVudF9oYW5kbGVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNvbnRlbnRfaGFuZGxlcih0aGlzLm9wdGlvbnMuY29udGVudCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNvbnRlbnQ7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24gKG5ld19jb250ZW50KSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRlbnQgPSBuZXdfY29udGVudCB8fCB0aGlzLm9wdGlvbnMuY29udGVudDtcclxuICAgICAgICBuZXdfY29udGVudCA9IHRoaXMuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd1cGRhdGVfY29udGVudCcsIG5ld19jb250ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZV9pbnN0YW5jZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0luaXRpbmcoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpYWxvZyBpcyBvcGVuZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEodGVtcGxhdGVfaW5zdGFuY2UgaW5zdGFuY2VvZiBUZW1wbGF0ZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFRlbXBsYXRlIGluc3RhbmNlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0ZW1wbGF0ZV9pbnN0YW5jZS5vcHRpb24odGhpcy5vcHRpb25zLnRlbXBsYXRlKTtcclxuICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSA9IHRlbXBsYXRlX2luc3RhbmNlO1xyXG4gICAgICAgIHRlbXBsYXRlX2luc3RhbmNlLmNvbm5lY3QodGhpcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRlbXBsYXRlIGluc3RhbmNlXHJcbiAgICAgKiBAcmV0dXJucyB7bnVsbHxUZW1wbGF0ZX1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIV9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnRlbXBsYXRlX25hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0X29wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuUFJFX09QVElPTlNfTkFNRSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRfb3B0aW9ucy50ZW1wbGF0ZV9uYW1lICYmIFRlbXBsYXRlLmhhc1RlbXBsYXRlKERpYWxvZy5URU1QTEFURV9UWVBFLCBkZWZhdWx0X29wdGlvbnMudGVtcGxhdGVfbmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudGVtcGxhdGVfbmFtZSA9IGRlZmF1bHRfb3B0aW9ucy50ZW1wbGF0ZV9uYW1lO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdF90ZW1wbGF0ZSA9IFRlbXBsYXRlLmRlZmF1bHRUZW1wbGF0ZShEaWFsb2cuVEVNUExBVEVfVFlQRSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWxzZSAhPT0gZGVmYXVsdF90ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudGVtcGxhdGVfbmFtZSA9IGRlZmF1bHRfdGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByZU9wdGlvbnMudXBkYXRlKERpYWxvZy5QUkVfT1BUSU9OU19OQU1FLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZV9uYW1lOiBkZWZhdWx0X3RlbXBsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGlhbG9nIGRlZmF1bHQgdGVtcGxhdGUgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRUZW1wbGF0ZShUZW1wbGF0ZS50ZW1wbGF0ZUluc3RhbmNlKERpYWxvZy5URU1QTEFURV9UWVBFLCB0aGlzLm9wdGlvbnMudGVtcGxhdGVfbmFtZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIF9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBvcHRpb24gPSBLaG9haS51dGlsLmJlT2JqZWN0LmFwcGx5KEtob2FpLCBfLnRvQXJyYXkoYXJndW1lbnRzKSk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb24udGVtcGxhdGVfbmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRlbXBsYXRlKFRlbXBsYXRlLnRlbXBsYXRlSW5zdGFuY2UoRGlhbG9nLlRFTVBMQVRFX1RZUEUsIG9wdGlvbi50ZW1wbGF0ZV9uYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb24udGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRUZW1wbGF0ZSgpLm9wdGlvbihvcHRpb24udGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5leHRlbmQodGhpcy5vcHRpb25zLCBvcHRpb24pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGRpYWxvZyBzdGF0dXNcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5zdGF0dXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKF9kaWFsb2dzLmhhc093blByb3BlcnR5KHRoaXMuaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfZGlhbG9nc1t0aGlzLmlkXS5zdGF0dXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pc0luaXRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzKCkgPT09IERpYWxvZy5TVEFUVVNfSU5JVElBTDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBkaWFsb2cgc3RhdHVzIGlzOiBvcGVuZWQsIHNob3dpbmcgb3IgaGlkaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pc09wZW5lZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gLTEgIT09IFtEaWFsb2cuU1RBVFVTX09QRU5FRCwgRGlhbG9nLlNUQVRVU19ISURJTkddLmluZGV4T2YodGhpcy5zdGF0dXMoKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBkaWFsb2cgaXMgc2hvd2luZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNWaXNpYmxpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzKCkgPT09IERpYWxvZy5TVEFUVVNfT1BFTkVEO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBoaWRpbmdcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzSGlkaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cygpID09PSBEaWFsb2cuU1RBVFVTX0hJRElORztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBjbG9zZWRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzQ2xvc2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cygpID09PSBEaWFsb2cuU1RBVFVTX0NMT1NFRDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBlbmFibGVkXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pc0VuYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gQm9vbGVhbihfZGlhbG9nc1t0aGlzLmlkXS5lbmFibGVkKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBwZW5kaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pc1BlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oX2RpYWxvZ3NbdGhpcy5pZF0ucGVuZGluZyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBFbmFibGUgZGlhbG9nIHdoZW4gaXQgaXMgZGlzYWJsZWRcclxuICAgICAqIEVtaXQgZXZlbnRzIHdoZW4gZW5hYmxlZCBzdWNjZXNzOlxyXG4gICAgICogLSBlbmFibGVkOlxyXG4gICAgICogLSB0b2dnbGVfZW5hYmxlOlxyXG4gICAgICogICArIDA6IHRydWUgaWYgY2hhbmdlIGV2ZW50IGlzIGVuYWJsZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIG9uIGVuYWJsZSBzdWNjZXNzLCBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0VuYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLmVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2VuYWJsZWQnKTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3RvZ2dsZV9lbmFibGUnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc2FibGUgZGlhbG9nIHdoZW4gaXQgaXMgZW5hYmxpbmdcclxuICAgICAqIEVtaXQgZXZlbnRzIHdoZW4gZGlzYWJsZSBzdWNjZXNzOlxyXG4gICAgICogLSBkaXNhYmxlZDpcclxuICAgICAqIC0gdG9nZ2xlX2VuYWJsZTpcclxuICAgICAqICAgKyAwOiBmYWxzZSBpZiBjaGFuZ2UgZXZlbnQgaXMgZGlzYWJsZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIG9uIGRpc2FibGUgc3VjY2Vzcywgb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGUoKSkge1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS5lbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3RvZ2dsZV9lbmFibGUnLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgcGVuZGluZyBzdGF0dXMgaXMgcGVuZGluZ1xyXG4gICAgICogRW1pdCBldmVudHMgd2hlbiBjaGFuZ2Ugc3VjY2VzczpcclxuICAgICAqIC0gcGVuZGluZzpcclxuICAgICAqIC0gdG9nZ2xlX3BlbmRpbmc6XHJcbiAgICAgKiAgICsgMDogdHJ1ZSBpZiBjaGFuZ2UgdG8gcGVuZGluZ1xyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIG9uIGNoYW5nZSBzdWNjZXNzLCBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUucGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNQZW5kaW5nKCkpIHtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0ucGVuZGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgncGVuZGluZycpO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgndG9nZ2xlX3BlbmRpbmcnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBwZW5kaW5nIHN0YXR1cyBpcyByZXNvbHZlZFxyXG4gICAgICogRW1pdCBldmVudHMgd2hlbiBjaGFuZ2Ugc3VjY2VzczpcclxuICAgICAqIC0gcmVzb2x2ZWQ6XHJcbiAgICAgKiAtIHRvZ2dsZV9wZW5kaW5nOlxyXG4gICAgICogICArIDA6IGZhbHNlIGlmIGNoYW5nZSB0byByZXNvbHZlZFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIG9uIGNoYW5nZSBzdWNjZXNzLCBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUucmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQZW5kaW5nKCkpIHtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0ucGVuZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3Jlc29sdmVkJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd0b2dnbGVfcGVuZGluZycsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0RpYWxvZ0J1dHRvbnxvYmplY3R9IGJ1dHRvbiBEaWFsb2dCdXR0b24gaW5zdGFuY2Ugb3IgYnV0dG9uIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5hdHRhY2hCdXR0b24gPSBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKCEoYnV0dG9uIGluc3RhbmNlb2YgRGlhbG9nQnV0dG9uKSkge1xyXG4gICAgICAgICAgICBpZiAoXy5pc09iamVjdChidXR0b24pKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24gPSBuZXcgRGlhbG9nQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKF8uaXNTdHJpbmcoYnV0dG9uKSB8fCBfLmlzTnVtYmVyKGJ1dHRvbikpICYmIERpYWxvZ0J1dHRvbi5oYXMoYnV0dG9uKSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gRGlhbG9nQnV0dG9uLmZhY3RvcnkoYnV0dG9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBidXR0b24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5idXR0b25zW2J1dHRvbi5vcHRpb25zLm5hbWVdID0gYnV0dG9uO1xyXG4gICAgICAgIGJ1dHRvbi5saXN0ZW4odGhpcyk7XHJcblxyXG4gICAgICAgIHJldHVybiBidXR0b247XHJcbiAgICB9O1xyXG5cclxuICAgIERpYWxvZy5wcm90b3R5cGUuYXR0YWNoTXVsdGlCdXR0b25zID0gZnVuY3Rpb24gKGJ1dHRvbnMpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uZWFjaChidXR0b25zLCBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNoQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYnV0dG9uIGV4aXN0c1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmhhc0J1dHRvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldCBidXR0b24gaW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEJ1dHRvbiBuYW1lXHJcbiAgICAgKiBAcmV0dXJucyB7RGlhbG9nQnV0dG9ufVxyXG4gICAgICogQHRocm93IEdldCB1bmF0dGFjaGVkIGJ1dHRvblxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmdldEJ1dHRvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0J1dHRvbihuYW1lKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dldCB1bmF0dGFjaGVkIGJ1dHRvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uc1tuYW1lXTtcclxuICAgIH07XHJcbiAgICBEaWFsb2cucHJvdG90eXBlLnJlbW92ZUJ1dHRvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0J1dHRvbihuYW1lKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlbW92ZSB1bmF0dGFjaGVkIGJ1dHRvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJ1dHRvbnNbbmFtZV0udW5saXN0ZW4odGhpcyk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuYnV0dG9uc1tuYW1lXTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBjbGlja2FibGVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzQ2xpY2thYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xpY2thYmxlKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLmNsaWNrYWJsZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xpY2thYmxlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMub3B0aW9ucy5jbGlja2FibGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uIChidXR0b25fbmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ2xpY2thYmxlKCkgJiYgdGhpcy5oYXNCdXR0b24oYnV0dG9uX25hbWUpKSB7XHJcbiAgICAgICAgICAgIHZhciBidXR0b24gPSB0aGlzLmdldEJ1dHRvbihidXR0b25fbmFtZSk7XHJcblxyXG4gICAgICAgICAgICBidXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2NsaWNrZWQnLCBidXR0b25fbmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBpcyBjbG9zZWFibGVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzQ2xvc2VhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jbG9zYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuY2xvc2FibGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbG9zYWJsZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLm9wdGlvbnMuY2xvc2FibGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXR1cygpID09PSBEaWFsb2cuU1RBVFVTX0lOSVRJQUwpIHtcclxuICAgICAgICAgICAgaWYgKCFfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlZF9ieSA9ICcnO1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS5zdGF0dXMgPSBEaWFsb2cuU1RBVFVTX09QRU5FRDtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ29wZW4nKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZGUgZGlhbG9nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsaW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2hpZGUnKTtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0uc3RhdHVzID0gRGlhbG9nLlNUQVRVU19ISURJTkc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IGRpYWxvZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0hpZGluZygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdzaG93Jyk7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLnN0YXR1cyA9IERpYWxvZy5TVEFUVVNfT1BFTkVEO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2UgZGlhbG9nXHJcbiAgICAgKiBFbWl0IGV2ZW50OlxyXG4gICAgICogLSBjbG9zZVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VdIEZvcmNlIGNsb3NlIGRpYWxvZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtieV0gY2xvc2UgY2FsbGVyXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZm9yY2UsIGJ5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2xvc2VkKCkgJiYgKGZvcmNlIHx8IHRoaXMuaXNDbG9zZWFibGUoKSkpIHtcclxuICAgICAgICAgICAgYnkgPSBieSB8fCAnJztcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2Nsb3NlJywgZm9yY2UsIGJ5KTtcclxuXHJcbiAgICAgICAgICAgIHJlc2V0RGlhbG9nKHRoaXMuaWQpO1xyXG5cclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0uc3RhdHVzID0gRGlhbG9nLlNUQVRVU19DTE9TRUQ7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkX2J5ID0gYnk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnY2xvc2VkJywgZm9yY2UsIGJ5KTtcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgY2xvc2VkIGJ5IHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xEaWFsb2dCdXR0b259IGJ1dHRvblxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuc2V0Q2xvc2VkQnkgPSBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDbG9zZWQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChidXR0b24gaW5zdGFuY2VvZiBEaWFsb2dCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbi5nZXRDbG9zZUtleSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcoYnV0dG9uKSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uICs9ICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlZF9ieSA9IGJ1dHRvbjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBidXR0b24gd2FzIGNsb3NlIGRpYWxvZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8RGlhbG9nQnV0dG9ufSBidXR0b25cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzQ2xvc2VkQnkgPSBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDbG9zZWQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChidXR0b24gaW5zdGFuY2VvZiBEaWFsb2dCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGJ1dHRvbi5nZXRDbG9zZUtleSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcoYnV0dG9uKSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uICs9ICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZWRfYnkgPT09IGJ1dHRvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXRET00gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKF9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlICYmIChfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSBpbnN0YW5jZW9mIFRlbXBsYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UuZ2V0RE9NKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gRGlhbG9nO1xyXG59KSk7XG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICAgICAnbG9kYXNoJyxcbiAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgJ2tob2FpanMnLFxuICAgICAgICAgICAgJ2tob2FpanMtcHJlLW9wdGlvbnMnLFxuICAgICAgICAgICAgJ2tob2FpanMtYWpheCcsXG4gICAgICAgICAgICAnLi4vZGlhbG9nLWJ1dHRvbicsXG4gICAgICAgICAgICAnLi4vZGlhbG9nJ1xuICAgICAgICBdO1xuICAgICAgICByZXF1aXJlKGRlcGVuZGVuY2llcywgZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeShcbiAgICAgICAgICAgIHJvb3QuXyxcbiAgICAgICAgICAgIHJvb3QualF1ZXJ5IHx8IHJvb3QuJCxcbiAgICAgICAgICAgIHJvb3QuS2hvYWksXG4gICAgICAgICAgICAocm9vdC5LaG9haSAmJiByb290Lktob2FpLlByZU9wdGlvbnMpIHx8IHJvb3QuUHJlT3B0aW9ucyxcbiAgICAgICAgICAgIChyb290Lktob2FpICYmIHJvb3QuS2hvYWkuQWpheCkgfHwgcm9vdC5BamF4LFxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5EaWFsb2dCdXR0b24pIHx8IHJvb3QuRGlhbG9nQnV0dG9uLFxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5EaWFsb2cpIHx8IHJvb3QuRGlhbG9nXG4gICAgICAgICk7XG4gICAgfVxufSh0aGlzLCBmdW5jdGlvbiAoXywgalF1ZXJ5LCBLaG9haSwgUHJlT3B0aW9ucywgQWpheCwgRGlhbG9nQnV0dG9uLCBEaWFsb2cpIHtcbiAgICAvKlxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfCBEeW5hbWljIGNvbnRlbnRcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgIHxcbiAgICAgKi9cblxuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XG4gICAgICAgIERZTkFNSUNfQ09OVEVOVF9QUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nLkR5bmFtaWNDb250ZW50J1xuICAgIH0pO1xuICAgIFByZU9wdGlvbnMuZGVmaW5lKERpYWxvZy5EWU5BTUlDX0NPTlRFTlRfUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICBsb2FkaW5nOiAnTG9hZGluZyBjb250ZW50Li4uJ1xuICAgIH0pO1xuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gY29udGVudCBhcyBmdW5jdGlvbiB3aGljaCBwcm92aWRlIGR5bmFtaWMgY29udGVudCB2aWEgQWpheC5cbiAgICAgKiBDaGFuZ2UgZGlhbG9nJ3MgcGVuZGluZyBzdGF0dXMgb24gc3RhcnQgY29tcGxldGUgcmVxdWVzdFxuICAgICAqIERpYWxvZyB3aWxsIGVtaXQgZXZlbnRzOlxuICAgICAqIC0gbG9hZF9jb250ZW50OiBBamF4IGJlZ2luIHJlcXVlc3RcbiAgICAgKiAtIGxvYWRfY29udGVudF9mYWlsZWQ6IEFqYXggZXJyb3JcbiAgICAgKiAtIGxvYWRfY29udGVudF9jb21wbGV0ZTogQWpheCBjb21wbGV0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQWpheCBvcHRpb25zLiBEZWZhdWx0IG9wdGlvbnM6XG4gICAgICogLSBlcnJvcl9jb250ZW50OiBkZWZhdWx0IGVycm9yIGNvbnRlbnQgaWYgQWpheCBlcnJvci4gJ0dldCBkeW5hbWljIGNvbnRlbnQgZmFpbGVkJ1xuICAgICAqIC0gbG9hZGluZzogZGVmYXVsdCBsb2FkaW5nIGNvbnRlbnQuICdMb2FkaW5nIGNvbnRlbnQuLi4nLlxuICAgICAqXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIERpYWxvZy5keW5hbWljQ29udGVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gbnVsbDtcblxuICAgICAgICBpZiAoXy5pc1N0cmluZyhvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuRFlOQU1JQ19DT05URU5UX1BSRV9PUFRJT05TX05BTUUsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodXBkYXRlX2NvbnRlbnRfY2IsIGRpYWxvZykge1xuICAgICAgICAgICAgaWYgKCFfLmlzTnVsbChjb250ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYXcgPSBuZXcgQWpheChfLm9taXQob3B0aW9ucywgJ2xvYWRpbmcnKSk7XG5cbiAgICAgICAgICAgIGF3LmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IHJlc3BvbnNlICsgJyc7XG4gICAgICAgICAgICAgICAgdXBkYXRlX2NvbnRlbnRfY2IoY29udGVudCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXcuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZGlhbG9nLmVtaXRFdmVudCgnbG9hZF9jb250ZW50X2ZhaWxlZCcpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZV9jb250ZW50X2NiKG9wdGlvbnMuZXJyb3JfY29udGVudCB8fCAnR2V0IGR5bmFtaWMgY29udGVudCBmYWlsZWQnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhdy5vcHRpb24oJ2JlZm9yZV9zZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRpYWxvZy5lbWl0RXZlbnQoJ2xvYWRfY29udGVudCcpO1xuICAgICAgICAgICAgICAgIGRpYWxvZy5wZW5kaW5nKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhdy5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRpYWxvZy5lbWl0RXZlbnQoJ2xvYWRfY29udGVudF9jb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgIGRpYWxvZy5yZXNvbHZlZCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRpYWxvZy5hZGRMaXN0ZW5lcignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYXcuYWJvcnQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhdy5yZXF1ZXN0KCk7XG5cbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmxvYWRpbmc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLypcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHwgRGlhbG9nIEJveFxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfFxuICAgICB8IFNob3cgb25seSBkaWFsb2cgYm9keSwgbm8gaGVhZGVyLCBubyBmb290ZXJcbiAgICAgfFxuICAgICB8XG4gICAgICovXG5cbiAgICBEaWFsb2cuYm94ID0gZnVuY3Rpb24gKGNvbnRlbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKF8uaXNTdHJpbmcob3B0aW9ucykpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IG9wdGlvbnMgKyAnJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy5jb250ZW50ID0gY29udGVudDtcblxuICAgICAgICBpZiAoIW9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSBfLmRlZmF1bHRzKG9wdGlvbnMudGVtcGxhdGUsIHtcbiAgICAgICAgICAgIGhhc19mb290ZXI6IGZhbHNlLFxuICAgICAgICAgICAgaGFzX2hlYWRlcjogZmFsc2UsXG4gICAgICAgICAgICBjbG9zZV9tYW51YWw6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaWFsb2cgPSBuZXcgRGlhbG9nKG9wdGlvbnMpO1xuXG4gICAgICAgIGRpYWxvZy5vcGVuKCk7XG5cbiAgICAgICAgcmV0dXJuIGRpYWxvZztcbiAgICB9O1xuXG4gICAgLypcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHwgRGlhbG9nIEFsZXJ0XG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8XG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgICovXG5cbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZywge1xuICAgICAgICBESUFMT0dfQUxFUlRfUFJFX09QVElPTlNfTkFNRTogJ0tob2FpLkRpYWxvZy5BbGVydCdcbiAgICB9KTtcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0FMRVJUX1BSRV9PUFRJT05TX05BTUUsIHtcbiAgICAgICAgdGl0bGU6ICdBbGVydCcsXG4gICAgICAgIGNsb3NlX2J1dHRvbl9vcHRpb25zOiB7fVxuICAgIH0pO1xuXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBvcHRpb25zIFN0cmluZzogdGl0bGUsIG9iamVjdDogb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2cuYWxlcnQgPSBmdW5jdGlvbiAobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoXy5pc1N0cmluZyhvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogb3B0aW9ucyArICcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zID0gXy5leHRlbmQoe1xuICAgICAgICAgICAgdGl0bGU6ICdBbGVydCdcbiAgICAgICAgfSwgUHJlT3B0aW9ucy5nZXQoRGlhbG9nLkRJQUxPR19BTEVSVF9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKSwge1xuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlhbG9nID0gbmV3IERpYWxvZyhfLm9taXQob3B0aW9ucywgJ2Nsb3NlX2J1dHRvbl9vcHRpb25zJykpO1xuXG4gICAgICAgIGRpYWxvZy5hdHRhY2hCdXR0b24oRGlhbG9nQnV0dG9uLmZhY3RvcnkoRGlhbG9nQnV0dG9uLkNMT1NFLCBvcHRpb25zLmNsb3NlX2J1dHRvbl9vcHRpb25zKSk7XG5cbiAgICAgICAgZGlhbG9nLm9wZW4oKTtcblxuICAgICAgICByZXR1cm4gZGlhbG9nO1xuICAgIH07XG5cblxuICAgIC8qXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8IERpYWxvZyBDb25maXJtXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8XG4gICAgIHxcbiAgICAgfFxuICAgICAqL1xuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XG4gICAgICAgIERJQUxPR19DT05GSVJNX1BSRV9PUFRJT05TX05BTUU6ICdLaG9haS5EaWFsb2cuQ29uZmlybSdcbiAgICB9KTtcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0NPTkZJUk1fUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICB0aXRsZTogJ0NvbmZpcm0nLFxuICAgICAgICBkZWZhdWx0X2J1dHRvbjogbnVsbCxcbiAgICAgICAgYnV0dG9uczogW11cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2cuY29uZmlybSA9IGZ1bmN0aW9uIChtZXNzYWdlLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGlhbG9nO1xuXG4gICAgICAgIGlmICghXy5pc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogb3B0aW9ucyArICcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IF8ubm9vcDtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZChQcmVPcHRpb25zLmdldChEaWFsb2cuRElBTE9HX0NPTkZJUk1fUFJFX09QVElPTlNfTkFNRSwgb3B0aW9ucyksIHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKF8uaXNFbXB0eShvcHRpb25zLmJ1dHRvbnMpKSB7XG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMgPSBEaWFsb2dCdXR0b24uZmFjdG9yeShEaWFsb2dCdXR0b24uQlVUVE9OU19ZRVNfTk8pO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nID0gbmV3IERpYWxvZyhfLm9taXQob3B0aW9ucywgJ2RlZmF1bHRfYnV0dG9uJykpO1xuXG4gICAgICAgIF8uZWFjaChkaWFsb2cuYnV0dG9ucywgZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICAgICAgYnV0dG9uLnNldEhhbmRsZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLm9wdGlvbnMubmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFvcHRpb25zLmRlZmF1bHRfYnV0dG9uKSB7XG4gICAgICAgICAgICBvcHRpb25zLmRlZmF1bHRfYnV0dG9uID0gXy5sYXN0KE9iamVjdC5rZXlzKGRpYWxvZy5idXR0b25zKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL0RlZmF1bHQgYnV0dG9uXG4gICAgICAgIGRpYWxvZy5vbignY2xvc2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NlZF9ieSkge1xuICAgICAgICAgICAgICAgIEtob2FpLnV0aWwuY2FsbEZ1bmMoY2FsbGJhY2ssIG9wdGlvbnMuZGVmYXVsdF9idXR0b24sIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkZWZhdWx0X2J1dHRvbidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlhbG9nLm9wZW4oKTtcblxuICAgICAgICByZXR1cm4gZGlhbG9nO1xuICAgIH07XG5cblxuICAgIC8qXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8IERpYWxvZyBpRnJhbWVcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgICovXG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2csIHtcbiAgICAgICAgRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nLmlGcmFtZSdcbiAgICB9KTtcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FLCB7XG4gICAgICAgIHRpdGxlOiAnaUZyYW1lJyxcbiAgICAgICAgYXR0cmlidXRlczoge31cbiAgICB9KTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2cuaUZyYW1lID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGlhbG9nLFxuICAgICAgICAgICAgYXR0cnMgPSBbXSxcbiAgICAgICAgICAgIHRlbXBsYXRlID0gW107XG5cbiAgICAgICAgaWYgKCFfLmlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb25zICsgJydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKTtcblxuICAgICAgICBfLmVhY2gob3B0aW9ucy5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChfLmlzQm9vbGVhbih2YWwpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBhdHRycy5wdXNoKGtleSArICc9XCInICsga2V5ICsgJ1wiJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhdHRycy5wdXNoKGtleSArICc9XCInICsgdmFsICsgJ1wiJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlbXBsYXRlLnB1c2goJzxkaXYgY2xhc3M9XCJlbWJlZC1yZXNwb25zaXZlIGVtYmVkLXJlc3BvbnNpdmUtMTZieTlcIj4nKTtcbiAgICAgICAgdGVtcGxhdGUucHVzaCgnPGlmcmFtZSBjbGFzcz1cImVtYmVkLXJlc3BvbnNpdmUtaXRlbVwiIHNyYz1cIicgKyB1cmwgKyAnXCIgJyArIGF0dHJzLmpvaW4oJyAnKSArICc+PC9pZnJhbWU+Jyk7XG4gICAgICAgIHRlbXBsYXRlLnB1c2goJzwvZGl2PicpO1xuXG4gICAgICAgIG9wdGlvbnMuY29udGVudCA9IHRlbXBsYXRlLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIGRpYWxvZyA9IG5ldyBEaWFsb2cob3B0aW9ucyk7XG5cbiAgICAgICAgZGlhbG9nLm9wZW4oKTtcblxuICAgICAgICByZXR1cm4gZGlhbG9nO1xuICAgIH07XG5cbiAgICAvKlxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfCBEaWFsb2cgRm9ybVxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgfCAtIEJ1dHRvbnM6IHN1Ym1pdCwgY2xvc2VcbiAgICAgfCAtIE9wdGlvbnM6XG4gICAgIHwgICsgZm9ybV9jbGFzc2VzOiBmb3JtIGNsYXNzZXMsIHN0cmluZyBvciBhcnJheSBvZiBzdHJpbmdcbiAgICAgfCAgKyBtZXNzYWdlX2NsYXNzZXM6IGZvcm0gbWVzc2FnZSBkaXYgY2xhc3Nlcywgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZy4gRGVmYXVsdCBpcyBcImRpYWxvZ19mb3JtX21lc3NhZ2VcIlxuICAgICB8ICArIGJ1dHRvbnM6IGFkZCBvdGhlciBidXR0b25zXG4gICAgIHwgICsgYnV0dG9uc19vcHRpb246IG9iamVjdCB3aXRoIGJ1dHRvbidzIG5hbWUgYW5kIGJ1dHRvbiBvcHRpb25zXG4gICAgIHwgICsgc3VibWl0X2J1dHRvbjogZGVmYXVsdCBzdWJtaXQgYnV0dG9uIG5hbWUuIERpYWxvZyB3aWxsIHRyaWdnZXIgY2FsbGJhY2sgd2l0aCB0aGlzIGJ1dHRvbiB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdCB3aXRob3V0IGJ1dHRvbiBjbGlja1xuICAgICB8ICArIGNsb3NlX2J1dHRvbjogZGVmYXVsdCBjbG9zZSBidXR0b24gbmFtZS4gRGlhbG9nIHdpbGwgdHJpZ2dlciBjYWxsYmFjayB3aXRoIGRpYWxvZyBjbG9zZSB3aXRob3V0IGJ1dHRvbiBjbGlja1xuICAgICB8ICArIHZhbGlkYXRvcjogZm9ybSB2YWxpZGF0b3IgY2FsbGJhY2suIFJldHVybiB0cnVlIG9uIHZhbGlkIG9yIHN0cmluZyBmb3IgZXJyb3JzLiBJZiByZXR1cm4gc3RyaW5nIHRoZW4gZGlhbG9nIHdpbGwgc2hvdyBlcnJvciBvbiBtZXNzYWdlIGRpdi5cbiAgICAgfCAgICAgIEFyZ3VtZW50czpcbiAgICAgfCAgICAgIC0gZm9ybSBET01cbiAgICAgfCAgICAgIC0gYnV0dG9uIGluc3RhbmNlXG4gICAgIHwgICAgICAtIGRpYWxvZyBpbnN0YW5jZVxuICAgICB8XG4gICAgIHxcbiAgICAgfC0gRGlhbG9nIGRhdGE6XG4gICAgIHwgICsgZm9ybV9zZWxlY3RvcjogZm9ybSBzZWxlY3RvclxuICAgICB8ICArIGZvcm1fbWVzc2FnZV9zZWxlY3RvcjogZm9ybSBtZXNzYWdlIGRpdiBzZWxlY3RvclxuICAgICB8ICArIHVwZGF0ZV9tZXNzYWdlOiB1cGRhdGUgZm9ybSBtZXNzYWdlLiBBcmd1bWVudHM6IG1lc3NhZ2UuIElmIGFyZyBtZXNzYWdlIGZhaWwgdGhlbiBoaWRlIG1lc3NhZ2VcbiAgICAgfCAgKyBidG5faGFuZGxlcjogZGVmYXVsdCBidXR0b24gY2xpY2sgaGFuZGxlciwgdGhhdCB2YWxpZCBmb3JtLCBzaG93IG1lc3NhZ2Ugb24gZXJyb3IgYW5kIGNhbGwgY2FsbGJhY2suXG4gICAgIHwgICAgICBJZiBidXR0b24gaXMgY2xvc2UgYnV0dG9uIHRoZW4gY2xvc2UgZGlhbG9nIGJlZm9yZSBjYWxsIGNhbGxiYWNrLiBVc2VmdWwgZm9yIGN1c3RvbSBidXR0b25cbiAgICAgfCAgICAgIEFyZ3VtZW50czpcbiAgICAgfCAgICAgIC0gYnRuOiBidXR0b24gaW5zdGFuY2VcbiAgICAgfFxuICAgICB8LSBGb3JtIGNhbGxiYWNrOlxuICAgICB8ICAgICAgQXJndW1lbnRzOlxuICAgICB8ICAgICAgLSBidXR0b24gbmFtZTpcbiAgICAgfCAgICAgIC0gZm9ybSBET006XG4gICAgIHwgICAgICAtIGJ1dHRvbiBpbnN0YW5jZTpcbiAgICAgfCAgICAgIC0gZGlhbG9nIGluc3RhbmNlOlxuICAgICB8XG4gICAgIHxcbiAgICAgfFxuICAgICB8XG4gICAgIHxcbiAgICAgKi9cbiAgICBEaWFsb2dCdXR0b24uZGVmaW5lKCdzdWJtaXQnLCB7XG4gICAgICAgIGxhYmVsOiAnU3VibWl0J1xuICAgIH0pO1xuXG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2dCdXR0b24sIHtcbiAgICAgICAgU1VCTUlUOiAnc3VibWl0JyxcbiAgICAgICAgU1VCTUlUX0NBTkNFTDogWydzdWJtaXQnLCAnY2FuY2VsJ11cbiAgICB9KTtcblxuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XG4gICAgICAgIERJQUxPR19GT1JNX1BSRV9PUFRJT05TX05BTUU6ICdLaG9haS5EaWFsb2cuRm9ybSdcbiAgICB9KTtcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0ZPUk1fUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICB0aXRsZTogJ0Zvcm0nLFxuICAgICAgICBmb3JtX2NsYXNzZXM6ICcnLFxuICAgICAgICBtZXNzYWdlX2NsYXNzZXM6ICdkaWFsb2dfZm9ybV9tZXNzYWdlJyxcbiAgICAgICAgdmFsaWRhdG9yOiBudWxsLFxuICAgICAgICBhdXRvX2ZvY3VzOiB0cnVlLFxuICAgICAgICBzdWJtaXRfYnV0dG9uX25hbWU6ICdzdWJtaXQnLFxuICAgICAgICBjYW5jZWxfYnV0dG9uX25hbWU6ICdjYW5jZWwnLFxuICAgICAgICBidXR0b25zOiBbXSxcbiAgICAgICAgYnV0dG9uc19leHRlbmRfb3B0aW9uczoge31cbiAgICB9KTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbil9IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBhcmd1bWVudHM6IGJ1dHRvbiBuYW1lLCBmb3JtIERPTSwgYnV0dG9uIGluc3RhbmNlLCBkaWFsb2cgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cbiAgICAgKi9cbiAgICBEaWFsb2cuZm9ybSA9IGZ1bmN0aW9uIChjb250ZW50LCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGlhbG9nID0gbmV3IERpYWxvZygpO1xuXG4gICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBfLm5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKFByZU9wdGlvbnMuZ2V0KERpYWxvZy5ESUFMT0dfRk9STV9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKSwge1xuICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnRfaGFuZGxlcjogZGlhbG9nRm9ybUNvbnRlbnRIYW5kbGVyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChfLmlzRW1wdHkob3B0aW9ucy5idXR0b25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5idXR0b25zID0gRGlhbG9nQnV0dG9uLmZhY3RvcnkoRGlhbG9nQnV0dG9uLlNVQk1JVF9DQU5DRUwsIHt9LCB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IGNyZWF0ZUNhbmNlbEJ1dHRvbkhhbmRsZXIoY2FsbGJhY2spXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWJtaXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogY3JlYXRlQnV0dG9uc0hhbmRsZXIoY2FsbGJhY2ssIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBkaWFsb2cub3B0aW9uKFxuICAgICAgICAgICAgXy5vbWl0KG9wdGlvbnMsIFsnZm9ybV9jbGFzc2VzJywgJ21lc3NhZ2VfY2xhc3NlcycsICd2YWxpZGF0b3InLCAnc3VibWl0X2J1dHRvbl9uYW1lJyxcbiAgICAgICAgICAgICAgICAnY2FuY2VsX2J1dHRvbl9uYW1lJywgJ2J1dHRvbnMnLCAnYnV0dG9uc19leHRlbmRfb3B0aW9ucyddKVxuICAgICAgICApO1xuXG4gICAgICAgIF8uZWFjaChvcHRpb25zLmJ1dHRvbnMsIGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgICAgICAgIHZhciBhdHRhY2hlZF9idXR0b24gPSBkaWFsb2cuYXR0YWNoQnV0dG9uKGJ1dHRvbik7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmJ1dHRvbnNfZXh0ZW5kX29wdGlvbnMuaGFzT3duUHJvcGVydHkoYXR0YWNoZWRfYnV0dG9uLm9wdGlvbnMubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBhdHRhY2hlZF9idXR0b24ub3B0aW9uKF8uY2xvbmUob3B0aW9ucy5idXR0b25zX2V4dGVuZF9vcHRpb25zW2F0dGFjaGVkX2J1dHRvbi5vcHRpb25zLm5hbWVdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFkZERpYWxvZ0RhdGEoZGlhbG9nLCBvcHRpb25zKTtcbiAgICAgICAgYWRkRGlhbG9nTWV0aG9kcyhkaWFsb2csIG9wdGlvbnMpO1xuICAgICAgICBhZGREaWFsb2dFdmVudHMoZGlhbG9nLCBvcHRpb25zKTtcblxuICAgICAgICBkaWFsb2cub3BlbigpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmF1dG9fZm9jdXMpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRpYWxvZy5nZXRET00oKS5maW5kKCdpbnB1dDp2aXNpYmxlLCB0ZXh0YXJlYTp2aXNpYmxlJykuZmlyc3QoKS5mb2N1cygpO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkaWFsb2c7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhbmNlbEJ1dHRvbkhhbmRsZXIoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2cgPSBidXR0b24uZ2V0RGlhbG9nKCk7XG5cbiAgICAgICAgICAgIGJ1dHRvbi5jbG9zZURpYWxvZyh0cnVlKTtcbiAgICAgICAgICAgIEtob2FpLnV0aWwuY2FsbEZ1bmMoY2FsbGJhY2ssIFtidXR0b24ub3B0aW9ucy5uYW1lLCBudWxsLCBidXR0b24sIGRpYWxvZ10sIGRpYWxvZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCdXR0b25zSGFuZGxlcihjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICAgICAgdmFyIGRpYWxvZ19pbnN0YW5jZSA9IHRoaXMuZ2V0RGlhbG9nKCksXG4gICAgICAgICAgICAgICAgZm9ybSA9IGpRdWVyeShkaWFsb2dfaW5zdGFuY2UuZGF0YVsnZm9ybV9zZWxlY3RvciddKSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZV9yZXN1bHQgPSB0cnVlO1xuXG4gICAgICAgICAgICB1cGRhdGVGb3JtTWVzc2FnZShkaWFsb2dfaW5zdGFuY2UsIGZhbHNlKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVfcmVzdWx0ID0gb3B0aW9ucy52YWxpZGF0b3IoZm9ybSwgZGlhbG9nX2luc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cnVlICE9PSB2YWxpZGF0ZV9yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXy5pc1N0cmluZyh2YWxpZGF0ZV9yZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZvcm1NZXNzYWdlKGRpYWxvZ19pbnN0YW5jZSwgdmFsaWRhdGVfcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEtob2FpLnV0aWwuY2FsbEZ1bmMoY2FsbGJhY2ssIFtidXR0b24ub3B0aW9ucy5uYW1lLCBmb3JtLCBidXR0b24sIGRpYWxvZ19pbnN0YW5jZV0sIGRpYWxvZ19pbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaWFsb2dGb3JtQ29udGVudEhhbmRsZXIoY29udGVudCkge1xuICAgICAgICByZXR1cm4gWyc8Zm9ybT48ZGl2IGNsYXNzPVwiZGlhbG9nX2Zvcm1fbWVzc2FnZVwiPjwvZGl2PicsIGNvbnRlbnQsICc8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIi8+PC9mb3JtPiddLmpvaW4oJycpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsYXNzZXNUb1NlbGVjdG9yKGNsYXNzZXMpIHtcbiAgICAgICAgaWYgKCFfLmlzQXJyYXkoY2xhc3NlcykpIHtcbiAgICAgICAgICAgIChjbGFzc2VzICsgJycpLnNwbGl0KCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2xhc3NlcyA9IF8uZmxhdHRlbihfLmNhc3RBcnJheShjbGFzc2VzKSk7XG5cbiAgICAgICAgaWYgKCFfLmlzRW1wdHkoY2xhc3NlcykpIHtcbiAgICAgICAgICAgIHJldHVybiBfLm1hcChjbGFzc2VzLCBmdW5jdGlvbiAoY2xhc3NfbmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc19uYW1lLnRyaW0oKSA/ICcuJyArIGNsYXNzX25hbWUgOiAnJztcbiAgICAgICAgICAgIH0pLmpvaW4oJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUZvcm1NZXNzYWdlKGRpYWxvZywgbWVzc2FnZSkge1xuICAgICAgICB2YXIgbWVzc2FnZV9kb20gPSBqUXVlcnkoZGlhbG9nLmRhdGFbJ2Zvcm1fc2VsZWN0b3InXSArICcgJyArIGRpYWxvZy5kYXRhWydmb3JtX21lc3NhZ2Vfc2VsZWN0b3InXSk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2VfZG9tLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2RvbS5odG1sKG1lc3NhZ2UpLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZV9kb20uaHRtbCgnJykuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkRGlhbG9nRGF0YShkaWFsb2csIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRpYWxvZ19kb21faWQgPSAnIycgKyBkaWFsb2cuZ2V0VGVtcGxhdGUoKS5nZXRET01JRCgpO1xuICAgICAgICB2YXIgZm9ybV9zZWxlY3RvciA9IGRpYWxvZ19kb21faWQgKyAnIGZvcm0nICsgY2xhc3Nlc1RvU2VsZWN0b3Iob3B0aW9ucy5mb3JtX2NsYXNzZXMpO1xuICAgICAgICB2YXIgZm9ybV9tZXNzYWdlX3NlbGVjdG9yID0gZm9ybV9zZWxlY3RvciArICcgJyArIG9wdGlvbnMubWVzc2FnZV9jbGFzc2VzID8gY2xhc3Nlc1RvU2VsZWN0b3Iob3B0aW9ucy5tZXNzYWdlX2NsYXNzZXMpIDogJy5kaWFsb2dfZm9ybV9tZXNzYWdlJztcblxuICAgICAgICBkaWFsb2cuZGF0YVsnZm9ybV9zZWxlY3RvciddID0gZm9ybV9zZWxlY3RvcjtcbiAgICAgICAgZGlhbG9nLmRhdGFbJ2Zvcm1fbWVzc2FnZV9zZWxlY3RvciddID0gZm9ybV9tZXNzYWdlX3NlbGVjdG9yO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZERpYWxvZ01ldGhvZHMoZGlhbG9nKSB7XG4gICAgICAgIGRpYWxvZy5nZXRGb3JtRE9NID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeShkaWFsb2cuZGF0YVsnZm9ybV9zZWxlY3RvciddKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkaWFsb2cudXBkYXRlRm9ybU1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdXBkYXRlRm9ybU1lc3NhZ2UoZGlhbG9nLCBtZXNzYWdlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkaWFsb2cuY2xlYXJGb3JtTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHVwZGF0ZUZvcm1NZXNzYWdlKGRpYWxvZywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBkaWFsb2cuZ2V0Rm9ybURhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBUT0RPOiBGaXggS2hvYWkuakZvcm1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCFLaG9haS5qRm9ybSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWV0aG9kIGdldEZvcm1EYXRhIHJlcXVpcmUgbW9kdWxlIGpGb3JtJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gS2hvYWkuakZvcm0uZ2V0Rm9ybURhdGEodGhpcy5nZXRGb3JtRE9NKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkRGlhbG9nRXZlbnRzKGRpYWxvZywgb3B0aW9ucykge1xuICAgICAgICBmdW5jdGlvbiBmb3JtX3N1Ym1pdF9ldmVudF9saXN0ZW5lcihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VibWl0X2J1dHRvbl9uYW1lKSB7XG4gICAgICAgICAgICAgICAgZGlhbG9nLmNsaWNrKG9wdGlvbnMuc3VibWl0X2J1dHRvbl9uYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nLm9uKCdvcGVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCdib2R5Jykub24oJ3N1Ym1pdCcsIHRoaXMuZGF0YVsnZm9ybV9zZWxlY3RvciddLCBmb3JtX3N1Ym1pdF9ldmVudF9saXN0ZW5lcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpYWxvZy5vbignY2xvc2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NlZF9ieSAmJiBvcHRpb25zLmNhbmNlbF9idXR0b25fbmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNCdXR0b24ob3B0aW9ucy5jYW5jZWxfYnV0dG9uX25hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkZWZhdWx0IGJ1dHRvbicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uc1tvcHRpb25zLmNhbmNlbF9idXR0b25fbmFtZV0uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZGVmYXVsdF9jbG9zZV9idXR0b24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpYWxvZy5vbignY2xvc2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCdib2R5Jykub2ZmKCdzdWJtaXQnLCB0aGlzLmRhdGFbJ2Zvcm1fc2VsZWN0b3InXSwgZm9ybV9zdWJtaXRfZXZlbnRfbGlzdGVuZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8qXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICB8IERpYWxvZyBQcm9tcHRcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgIHwgLSBvcHRpb25zOlxuICAgICB8ICAgICAgKyB2YWx1ZTogY3VycmVudCB2YWx1ZVxuICAgICB8ICAgICAgKyBpbnB1dF90eXBlOiB0ZXh0LCBwYXNzd29yZCwuLi5cbiAgICAgfCAgICAgICsgaW5wdXRfY2xhc3NlczogY2xhc3Mgb2YgaW5wdXRcbiAgICAgfFxuICAgICB8IC0gY2FsbGJhY2s6IGNhbGxiYWNrIGhhdmUgMSBhcmd1bWVudCBpcyB2YWx1ZSBvZiBwcm9tcHRcbiAgICAgfFxuICAgICAqL1xuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XG4gICAgICAgIERJQUxPR19QUk9NUFRfUFJFX09QVElPTlNfTkFNRTogJ0tob2FpLkRpYWxvZy5wcm9tcHQnXG4gICAgfSk7XG4gICAgUHJlT3B0aW9ucy5kZWZpbmUoRGlhbG9nLkRJQUxPR19QUk9NUFRfUFJFX09QVElPTlNfTkFNRSwge1xuICAgICAgICB0aXRsZTogJ1Byb21wdCcsXG4gICAgICAgIGRlZmF1bHRfdmFsdWU6ICcnLFxuICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgIGlucHV0X3R5cGU6ICd0ZXh0JyxcbiAgICAgICAgaW5wdXRfY2xhc3NlczogJ2Zvcm0tY29udHJvbCcsXG4gICAgICAgIGJ1dHRvbnNfZXh0ZW5kX29wdGlvbnM6IHtcbiAgICAgICAgICAgIHN1Ym1pdDoge1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnT2snXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBEaWFsb2cucHJvbXB0ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gW10sXG4gICAgICAgICAgICBkaWFsb2c7XG5cbiAgICAgICAgaWYgKCFfLmlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb25zICsgJydcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IF8ubm9vcDtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuRElBTE9HX1BST01QVF9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKTtcblxuICAgICAgICBjb250ZW50LnB1c2goJzxwPicsIG1lc3NhZ2UsICc8L3A+Jyk7XG4gICAgICAgIGNvbnRlbnQucHVzaCgnPGlucHV0IG5hbWU9XCJwcm9tcHRfZGF0YVwiIHR5cGU9XCInLCBvcHRpb25zLmlucHV0X3R5cGUgKyAnXCIgJyxcbiAgICAgICAgICAgICdjbGFzcz1cIicsIG9wdGlvbnMuaW5wdXRfY2xhc3NlcyArICdcIiAnLFxuICAgICAgICAgICAgJ3ZhbHVlPVwiJywgb3B0aW9ucy5kZWZhdWx0X3ZhbHVlICsgJ1wiJyxcbiAgICAgICAgICAgICdwbGFjZWhvbGRlcj1cIicsIG9wdGlvbnMucGxhY2Vob2xkZXIgKyAnXCInLFxuICAgICAgICAgICAgJy8+Jyk7XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvbXB0X2NiKGJ0bl9uYW1lLCBmb3JtLCBidG4pIHtcbiAgICAgICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9wdGlvbnMuZGVmYXVsdF92YWx1ZTtcblxuICAgICAgICAgICAgaWYgKCdzdWJtaXQnID09PSBidG5fbmFtZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZm9ybS5maW5kKCdpbnB1dFtuYW1lPVwicHJvbXB0X2RhdGFcIl0nKS52YWwoKTtcbiAgICAgICAgICAgICAgICBidG4uY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FsbGJhY2sodmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nID0gRGlhbG9nLmZvcm0oY29udGVudC5qb2luKCcnKSwgcHJvbXB0X2NiLCBfLm9taXQob3B0aW9ucywgJ2RlZmF1bHRfdmFsdWUnLCAncGxhY2Vob2xkZXInLCAnaW5wdXRfdHlwZScsICdpbnB1dF9jbGFzc2VzJykpO1xuXG4gICAgICAgIHJldHVybiBkaWFsb2c7XG4gICAgfTtcbn0pKTsiXX0=
