!function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","khoaijs","khoaijs-event-emitter","khoaijs-pre-options","khoaijs-template"];define(n,function(n,i,o,s,a){var l=e(n,i,o,s,a);return i.DialogButton=l,t.DialogButton=l,l})}else{var i=e(t._,t.Khoai,t.Khoai.EventEmitter||t.EventEmitter,t.Khoai.PreOptions||t.PreOptions,t.Khoai.Template||t.Template);t.Khoai.DialogButton=i,t.DialogButton=i}}(this,function(t,e,n,i,o){function s(t){return t.isVisible()&&t.isEnable()&&t.getDialog().isClickable()}function a(t){t.addListener("listen",l),t.addListener("unlisten",r),t.addListener("dialog.toggle_enable",u),t.addListener("dialog.toggle_pending",p)}function l(t){d[this.id].dialog=t}function r(t){d[this.id].dialog=null}function u(t){this.toggleEnable(t)}function p(t){this.options.disable_on_pending&&this.toggleEnable(!t)}function c(t){this.type_prefix="dialog_button",n.call(this),this.options=i.get(h.PRE_OPTIONS_NAME,{name:this.id}),d[this.id]={dialog:null,enabled:!0,visible:!0,template_instance:null},this.option(this.options),t&&(t.hasOwnProperty("events")&&(this.addListeners(t.events),delete t.events),this.option(t)),a(this)}var h={PRE_OPTIONS_NAME:"Khoai.DialogButton",TEMPLATE_TYPE:"DialogButton",TYPE_INFO:"info",TYPE_PRIMARY:"primary",TYPE_SUCCESS:"success",TYPE_WARNING:"warning",TYPE_DANGER:"danger",OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",RETRY:"retry",BUTTONS_OK_ONLY:["ok"],BUTTONS_OK_CANCEL:["ok","cancel"],BUTTONS_YES_NO:["yes","no"],BUTTONS_YES_NO_CANCEL:["yes","no","cancel"],BUTTONS_RETRY_CANCEL:["retry","cancel"]},d={};i.define(h.PRE_OPTIONS_NAME,{label:"Untitled",icon:"",type:h.TYPE_INFO,size:1,handler:null,disable_on_pending:!0,clickable:s,template_name:"",template:{}}),e.util.inherit(c,n),e.util.defineConstant(c,"version","0.0.1"),e.util.defineConstant(c,h),c.globalOption=function(t){i.update(c.PRE_OPTIONS_NAME,t)},c.prototype.setTemplate=function(t){if(!(t instanceof o))throw new Error("Invalid Template instance");d[this.id].template_instance&&(d[this.id].template_instance.disconnect(),d[this.id].template_instance=null),t.option(this.options.template),d[this.id].template_instance=t,t.connect(this)},c.prototype.getTemplate=function(){if(!d[this.id].template_instance){if(!this.options.template_name){var t=i.get(c.PRE_OPTIONS_NAME);if(t.template_name&&o.hasTemplate(c.TEMPLATE_TYPE,t.template_name))this.options.template_name=t.template_name;else{var e=o.defaultTemplate(c.TEMPLATE_TYPE);if(!1===e)throw new Error("Dialog button default template not found");this.options.template_name=e,i.update(c.PRE_OPTIONS_NAME,{template_name:e})}}this.setTemplate(o.templateInstance(c.TEMPLATE_TYPE,this.options.template_name))}return d[this.id].template_instance},c.prototype.option=function(n,i){var s=e.util.beObject.apply(e,t.toArray(arguments));return s.template_name&&this.setTemplate(o.templateInstance(c.TEMPLATE_TYPE,s.template_name)),s.template&&this.getTemplate().option(s.template),t.extend(this.options,t.omit(s,["template_name"])),this},c.prototype.setHandler=function(t){this.option("handler",t)},c.prototype.getDialog=function(){return!!d[this.id].dialog&&d[this.id].dialog},c.prototype.isClickable=function(){return t.isFunction(this.options.clickable)?this.options.clickable.call(this,this):Boolean(this.options.clickable)},c.prototype.isVisible=function(){return Boolean(d[this.id].visible)},c.prototype.isEnable=function(){return Boolean(d[this.id].enabled)},c.prototype.click=function(){return!!this.isClickable()&&(this.emitEvent("click"),this.options.handler&&e.util.callFunc(this.options.handler,this,this),this.emitEvent("clicked"),!0)},c.prototype.toggle=function(e){t.isUndefined(e)&&(e=!d[this.id].visible),d[this.id].visible!==e&&(d[this.id].visible=e,e?this.emitEvent("show"):this.emitEvent("hide"),this.emitEvent("toggle",e))},c.prototype.show=function(){this.toggle(!0)},c.prototype.hide=function(){this.toggle(!1)},c.prototype.toggleEnable=function(e){t.isUndefined(e)&&(e=!d[this.id].enabled),d[this.id].enabled!==e&&(d[this.id].enabled=e,this.emitEvent(e?"enabled":"disabled"),this.emitEvent("toggle_enable",e))},c.prototype.disable=function(){this.toggleEnable(!1)},c.prototype.enable=function(){this.toggleEnable(!0)},c.prototype.render=function(){return this.getTemplate().render()},c.prototype.reDraw=function(){return!!d[this.id].template_instance&&d[this.id].template_instance.reDraw()},c.prototype.getDOM=function(){return!!(d[this.id].template_instance&&d[this.id].template_instance instanceof o)&&d[this.id].template_instance.getDOM()},c.prototype.getOtherButton=function(t){return this.getDialog().getButton(t)},c.prototype.getCloseKey=function(){return this.options.name},c.prototype.closeDialog=function(t){var e=this.getDialog();return!!e&&(e.close(t,this.getCloseKey()),!0)},c.prototype.wasCloseDialog=function(){var t=this.getDialog();return!!t&&t.setClosedBy(this)};var _={};return c.isDefined=function(t){return _.hasOwnProperty(t)},c.define=function(e,n,i){_[e]={options:t.isObject(n)?n:{},freeze_options:t.isObject(i)?i:{}},_[e].freeze_options.name=e},c.updateOptions=function(e,n){return!!c.isDefined(e)&&(t.extend(_[e].options,n),!0)},c.factory=function(e,n,i){t.isObject(n)||(n={}),t.isObject(i)||(i={});var o=t.castArray(e).map(function(e){var o,s;if(!c.isDefined(e))throw new Error("Dialog Button type is unregistered");return s=_[e],o=t.extend({},s.options,t.clone(n),i.hasOwnProperty(e)?i[e]:{},s.freeze_options),new c(o)});return 1===o.length?o.shift():o},c.defaultClickable=s,t.each(["Ok","Yes","No","Retry","Ignore"],function(t){c.define(t.toLowerCase(),{label:t})}),c.define("cancel",{label:"Cancel",disable_on_pending:!1}),function(){function t(t){t.getDialog()&&t.closeDialog(Boolean(t.options.force))}e.util.defineConstant(c,{CLOSE:"close"}),c.define(c.CLOSE,{label:"Close",type:c.TYPE_INFO,force:!1},{handler:t})}(),c}),function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","jquery","khoaijs","khoaijs-event-emitter","khoaijs-pre-options","khoaijs-template","dialog_button"];define(n,function(n,i,o,s,a,l,r){var u=e(n,i,o,s,a,l,r);return o.Dialog=u,t.Dialog=u,u})}else{var i=e(t._,t.jQuery,t.Khoai,t.Khoai&&t.Khoai.EventEmitter||t.EventEmitter,t.Khoai&&t.Khoai.PreOptions||t.PreOptions,t.Khoai&&t.Khoai.Template||t.Template,t.Khoai&&t.Khoai.DialogButton||t.DialogButton);t.Khoai.Dialog=i,t.Dialog=i}}(this,function(t,e,n,i,o,s,a){function l(t){return t.isEnable()}function r(t){return t.isEnable()}function u(t){var e={status:h.STATUS_INITIAL,enabled:!0,pending:!1,loading:!1,ajax_worker:null,template_instance:null};d.hasOwnProperty(t)&&(e.template_instance=d[t].template_instance),d[t]=e}function p(e){if(this.type_prefix="dialog",i.call(this),this.options=o.get(h.PRE_OPTIONS_NAME),this.closed_by="",this.data={},this.buttons={},u(this.id),this.option(this.options),e){if(e.hasOwnProperty("events")&&e.events&&(this.addListeners(e.events),delete e.events),e.hasOwnProperty("buttons")&&e.buttons){var n=this;t.each(e.buttons,function(t){n.attachButton(t)}),e.buttons=null,delete e.buttons}this.option(e)}}function c(e){t.isFunction(this.options.content_handler)&&(e=this.options.content_handler(e,this)),this.emitEvent("content_loaded",e),this.updateContent(e)}var h={PRE_OPTIONS_NAME:"Khoai.Dialog",TEMPLATE_TYPE:"Dialog",STATUS_INITIAL:"initial",STATUS_OPENED:"opened",STATUS_HIDING:"hiding",STATUS_CLOSED:"removed",TYPE_INFO:"info",TYPE_SUCCESS:"success",TYPE_PRIMARY:"primary",TYPE_WARNING:"warning",TYPE_DANGER:"danger",SIZE_SMALL:"small",SIZE_NORMAL:"normal",SIZE_LARGE:"large"},d={};return o.define(h.PRE_OPTIONS_NAME,{title:"Dialog",type:h.TYPE_INFO,content:"",content_handler:null,template_name:"",template:{},size:h.SIZE_NORMAL,classes:"",closable:l,clickable:r}),n.util.inherit(p,i),n.util.defineConstant(p,"version","0.0.6"),n.util.defineConstant(p,h),p.globalOption=function(t){o.update(p.PRE_OPTIONS_NAME,t)},p.prototype.getContent=function(){return t.isFunction(this.options.content)&&(this.emitEvent("load_content"),this.options.content=this.options.content(c.bind(this),this)),t.isFunction(this.options.content_handler)?this.options.content_handler(this.options.content,this):this.options.content},p.prototype.updateContent=function(t){this.options.content=t||this.options.content,t=this.getContent(),this.isOpened()&&this.emitEvent("update_content",t)},p.prototype.setTemplate=function(t){if(!this.isIniting())throw new Error("Dialog is opened");if(!(t instanceof s))throw new Error("Invalid Template instance");d[this.id].template_instance&&(d[this.id].template_instance.disconnect(),d[this.id].template_instance=null),t.option(this.options.template),d[this.id].template_instance=t,t.connect(this)},p.prototype.getTemplate=function(){if(!d[this.id].template_instance){if(!this.options.template_name){var t=o.get(p.PRE_OPTIONS_NAME);if(t.template_name&&s.hasTemplate(p.TEMPLATE_TYPE,t.template_name))this.options.template_name=t.template_name;else{var e=s.defaultTemplate(p.TEMPLATE_TYPE);if(!1===e)throw new Error("Dialog default template not found");this.options.template_name=e,o.update(p.PRE_OPTIONS_NAME,{template_name:e})}}this.setTemplate(s.templateInstance(p.TEMPLATE_TYPE,this.options.template_name))}return d[this.id].template_instance},p.prototype.option=function(e,i){var o=n.util.beObject.apply(n,t.toArray(arguments));return o.template_name&&this.setTemplate(s.templateInstance(p.TEMPLATE_TYPE,o.template_name)),o.template&&this.getTemplate().option(o.template),t.extend(this.options,o),this},p.prototype.status=function(){return!!d.hasOwnProperty(this.id)&&d[this.id].status},p.prototype.isIniting=function(){return this.status()===p.STATUS_INITIAL},p.prototype.isOpened=function(){return-1!==[p.STATUS_OPENED,p.STATUS_HIDING].indexOf(this.status())},p.prototype.isVisibling=function(){return this.status()===p.STATUS_OPENED},p.prototype.isHiding=function(){return this.status()===p.STATUS_HIDING},p.prototype.isClosed=function(){return this.status()===p.STATUS_CLOSED},p.prototype.isEnable=function(){return Boolean(d[this.id].enabled)},p.prototype.isPending=function(){return Boolean(d[this.id].pending)},p.prototype.enable=function(){return!this.isEnable()&&(d[this.id].enabled=!0,this.emitEvent("enabled"),this.emitEvent("toggle_enable",!0),!0)},p.prototype.disable=function(){return!!this.isEnable()&&(d[this.id].enabled=!1,this.emitEvent("disabled"),this.emitEvent("toggle_enable",!1),!0)},p.prototype.pending=function(){return!this.isPending()&&(d[this.id].pending=!0,this.emitEvent("pending"),this.emitEvent("toggle_pending",!0),!0)},p.prototype.resolved=function(){return!!this.isPending()&&(d[this.id].pending=!1,this.emitEvent("resolved"),this.emitEvent("toggle_pending",!1),!0)},p.prototype.attachButton=function(e){if(!(e instanceof a))if(t.isObject(e))e=new a(e);else{if(!t.isString(e)&&!t.isNumber(e)||!a.has(e))throw new Error("Invalid button");e=a.factory(e)}return this.buttons[e.options.name]=e,e.listen(this,"dialog"),e},p.prototype.attachMultiButtons=function(e){var n=this;t.each(e,function(t){n.attachButton(t)})},p.prototype.hasButton=function(t){return this.buttons.hasOwnProperty(t)},p.prototype.getButton=function(t){if(!this.hasButton(t))throw new Error("Get unattached button");return this.buttons[t]},p.prototype.removeButton=function(t){if(!this.hasButton(t))throw new Error("Remove unattached button");this.buttons[t].unlisten(this),delete this.buttons[t]},p.prototype.isClickable=function(){return!this.options.clickable||(t.isFunction(this.options.clickable)?this.options.clickable(this):Boolean(this.options.clickable))},p.prototype.click=function(t){if(this.isClickable()&&this.hasButton(t)){this.getButton(t).click(),this.emitEvent("clicked",t)}return!1},p.prototype.isCloseable=function(){return!!this.isOpened()&&(!this.options.closable||(t.isFunction(this.options.closable)?this.options.closable(this):Boolean(this.options.closable)))},p.prototype.open=function(){return this.status()===p.STATUS_INITIAL&&(d[this.id].template_instance||this.getTemplate(),this.closed_by="",d[this.id].status=p.STATUS_OPENED,this.emitEvent("open"),!0)},p.prototype.hide=function(){return!!this.isVisibling()&&(this.emitEvent("hide"),d[this.id].status=p.STATUS_HIDING,!0)},p.prototype.show=function(){return!!this.isHiding()&&(this.emitEvent("show"),d[this.id].status=p.STATUS_OPENED,!0)},p.prototype.close=function(t,e){return!(this.isClosed()||!t&&!this.isCloseable())&&(e=e||"",this.emitEvent("close",t,e),u(this.id),d[this.id].status=p.STATUS_CLOSED,this.closed_by=e,this.emitEvent("closed",t,e),this.reset(),!0)},p.prototype.setClosedBy=function(e){return!!this.isClosed()&&(e||(e=""),e instanceof a&&(e=e.getCloseKey()),t.isString(e)||(e+=""),this.closed_by=e,!0)},p.prototype.isClosedBy=function(e){return!!this.isClosed()&&(e||(e=""),e instanceof a&&(e=e.getCloseKey()),t.isString(e)||(e+=""),this.closed_by===e)},p.prototype.getDOM=function(){return!!(d[this.id].template_instance&&d[this.id].template_instance instanceof s)&&d[this.id].template_instance.getDOM()},p}),function(t,e){if("function"==typeof define&&define.amd){var n=["lodash","jquery","khoaijs","khoaijs-pre-options","khoaijs-ajax","../dialog-button","../dialog"];require(n,e)}else e(t._,t.jQuery||t.$,t.Khoai,t.Khoai&&t.Khoai.PreOptions||t.PreOptions,t.Khoai&&t.Khoai.Ajax||t.Ajax,t.Khoai&&t.Khoai.DialogButton||t.DialogButton,t.Khoai&&t.Khoai.Dialog||t.Dialog)}(this,function(t,e,n,i,o,s,a){function l(t){return function(e){var i=e.getDialog();e.closeDialog(!0),n.util.callFunc(t,[e.options.name,null,e,i],i)}}function r(i,o){return function(s){var a=this.getDialog(),l=e(a.data.form_selector),r=!0;if(c(a,!1),o.validator&&(r=o.validator(l,a)),!0!==r)return void(t.isString(r)&&c(a,r));n.util.callFunc(i,[s.options.name,l,s,a],a)}}function u(t){var e=["<form>"],n=["</form>"];return t.disableable&&(e.push('<fieldset class="form_fieldset">'),n.unshift("</fieldset>")),e.push('<div class="dialog_form_message"></div>'),n.unshift('<input type="submit" style="display: none;"/>'),function(t){return e.join("\n")+t+n.join("\n")}}function p(e){return t.isArray(e)||(e+"").split(" "),e=t.flatten(t.castArray(e)),t.isEmpty(e)?"":t.map(e,function(t){return t.trim()?"."+t:""}).join("")}function c(t,n){var i=e(t.data.form_selector+" "+t.data.form_message_selector);i.length&&(n?i.html(n).show():i.html("").hide())}function h(t,e){var n="#"+t.getTemplate().getDOMID(),i=n+" form"+p(e.form_classes),o=i+" "+e.message_classes?p(e.message_classes):".dialog_form_message";t.data.form_selector=i,t.data.form_message_selector=o}function d(t){t.getFormDOM=function(){return e(t.data.form_selector)},t.updateFormMessage=function(e){c(t,e)},t.clearFormMessage=function(){c(t,!1)},t.getFormData=function(){return n.jForm?n.jForm.getFormData(this.getFormDOM()):(console.warn("Method getFormData require module jForm"),{})}}function _(t,n){function i(e){return e.preventDefault(),n.submit_button_name&&t.click(n.submit_button_name),!1}t.on("open",function(){e("body").on("submit",this.data.form_selector,i)}),t.on("closed",function(){if(!this.closed_by&&n.cancel_button_name){if(!this.hasButton(n.cancel_button_name))throw new Error("Invalid default button");this.buttons[n.cancel_button_name].click()}},{key:"default_close_button"}),t.on("closed",function(){e("body").off("submit",this.data.form_selector,i)}),n.disableable&&t.on("toggle_enable",function(){this.getFormDOM().find("fieldset.form_fieldset").prop("disabled",!this.isEnable())})}n.util.defineConstant(a,{DYNAMIC_CONTENT_PRE_OPTIONS_NAME:"Khoai.Dialog.DynamicContent"}),i.define(a.DYNAMIC_CONTENT_PRE_OPTIONS_NAME,{loading:"Loading content..."}),a.dynamicContent=function(e){var n=null;return t.isString(e)&&(e={url:e}),e=i.get(a.DYNAMIC_CONTENT_PRE_OPTIONS_NAME,e),function(i,s){if(!t.isNull(n))return n;var a=new o(t.omit(e,"loading"));return a.done(function(t){n=t+"",i(n)}),a.fail(function(){s.emitEvent("load_content_failed"),i(e.error_content||"Get dynamic content failed")}),a.option("beforeSend",function(){return s.emitEvent("load_content"),s.pending(),!0}),a.always(function(){s.emitEvent("load_content_complete"),s.resolved()}),s.addListener("close",function(){a.abort()}),a.request(),e.loading}},a.box=function(e,n){n=n||{},t.isString(n)&&(n={title:n+""}),n.content=e,n.template||(n.template={}),n.template=t.defaults(n.template,{has_footer:!1,has_header:!1,close_manual:!1});var i=new a(n);return i.open(),i},n.util.defineConstant(a,{DIALOG_ALERT_PRE_OPTIONS_NAME:"Khoai.Dialog.Alert"}),i.define(a.DIALOG_ALERT_PRE_OPTIONS_NAME,{title:"Alert",close_button_options:{}}),a.alert=function(e,n){t.isString(n)&&(n={title:n+""}),n=t.extend({title:"Alert"},i.get(a.DIALOG_ALERT_PRE_OPTIONS_NAME,n),{content:e});var o=new a(t.omit(n,"close_button_options"));return o.attachButton(s.factory(s.CLOSE,n.close_button_options)),o.open(),o},n.util.defineConstant(a,{DIALOG_CONFIRM_PRE_OPTIONS_NAME:"Khoai.Dialog.Confirm"}),i.define(a.DIALOG_CONFIRM_PRE_OPTIONS_NAME,{title:"Confirm",default_button:null,buttons:[]}),a.confirm=function(e,o,l){var r;return t.isObject(l)||(l={title:l+""}),t.isFunction(o)||(o=t.noop),l=t.extend(i.get(a.DIALOG_CONFIRM_PRE_OPTIONS_NAME,l),{content:e}),t.isEmpty(l.buttons)&&(l.buttons=s.factory(s.BUTTONS_YES_NO)),r=new a(t.omit(l,"default_button")),t.each(r.buttons,function(t){t.setHandler(function(){this.closeDialog(),o(this.options.name)})}),l.default_button||(l.default_button=t.last(Object.keys(r.buttons))),r.on("closed",function(){this.closed_by||n.util.callFunc(o,l.default_button,null)},{key:"default_button"}),r.open(),r},n.util.defineConstant(a,{DIALOG_IFRAME_PRE_OPTIONS_NAME:"Khoai.Dialog.iFrame"}),i.define(a.DIALOG_IFRAME_PRE_OPTIONS_NAME,{title:"iFrame",attributes:{}}),a.iFrame=function(e,n){var o,s=[],l=[];return t.isObject(n)||(n={title:n+""}),n=i.get(a.DIALOG_IFRAME_PRE_OPTIONS_NAME,n),t.each(n.attributes,function(e,n){t.isBoolean(e)?e&&s.push(n+'="'+n+'"'):s.push(n+'="'+e+'"')}),l.push('<div class="embed-responsive embed-responsive-16by9">'),l.push('<iframe class="embed-responsive-item" src="'+e+'" '+s.join(" ")+"></iframe>"),l.push("</div>"),n.content=l.join("\n"),o=new a(n),o.open(),o},s.define("submit",{label:"Submit"}),n.util.defineConstant(s,{SUBMIT:"submit",SUBMIT_CANCEL:["submit","cancel"]}),n.util.defineConstant(a,{DIALOG_FORM_PRE_OPTIONS_NAME:"Khoai.Dialog.Form"}),i.define(a.DIALOG_FORM_PRE_OPTIONS_NAME,{title:"Form",form_classes:"",message_classes:"dialog_form_message",validator:null,auto_focus:!0,submit_button_name:"submit",cancel_button_name:"cancel",buttons:[],buttons_extend_options:{},disableable:!1}),a.form=function(e,n,o){var p=new a;return t.isFunction(n)||(n=t.noop),o=i.get(a.DIALOG_FORM_PRE_OPTIONS_NAME,o),o=t.extend(o,{content:e,content_handler:u(o)}),t.isEmpty(o.buttons)&&(o.buttons=s.factory(s.SUBMIT_CANCEL,{},{cancel:{handler:l(n)},submit:{handler:r(n,o)}})),p.option(t.omit(o,["form_classes","message_classes","validator","submit_button_name","cancel_button_name","buttons","buttons_extend_options","disableable"])),t.each(o.buttons,function(e){var n=p.attachButton(e);o.buttons_extend_options.hasOwnProperty(n.options.name)&&n.option(t.clone(o.buttons_extend_options[n.options.name]))}),h(p,o),d(p),_(p,o),p.open(),o.auto_focus&&setTimeout(function(){p.getDOM().find("input:visible, textarea:visible").first().focus()},500),p},n.util.defineConstant(a,{DIALOG_PROMPT_PRE_OPTIONS_NAME:"Khoai.Dialog.prompt"}),i.define(a.DIALOG_PROMPT_PRE_OPTIONS_NAME,{title:"Prompt",default_value:"",placeholder:"",input_type:"text",input_classes:"form-control",close_on_submit:!0,buttons_extend_options:{submit:{label:"Ok"}}}),a.prompt=function(e,n,o){function s(t,e,i){if(!e)return void n(!1,e,i);var s=o.default_value;"submit"===t&&(s=e.find('input[name="prompt_data"]').val(),o.close_on_submit&&i.closeDialog()),n(s,e,i)}var l=[];return t.isObject(o)||(o={title:o?o+"":"Prompt"}),t.isFunction(n)||(n=t.noop),o=i.get(a.DIALOG_PROMPT_PRE_OPTIONS_NAME,o),l.push("<p>",e,"</p>"),l.push('<input name="prompt_data" type="',o.input_type+'" ','class="',o.input_classes+'" ','value="',o.default_value+'"','placeholder="',o.placeholder+'"',"/>"),a.form(l.join(""),s,t.omit(o,"default_value","placeholder","input_type","input_classes","close_on_submit"))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpYWxvZy5taW4uanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJkZXBlbmRlbmNpZXMiLCJfIiwiS2hvYWkiLCJFdmVudEVtaXR0ZXIiLCJQcmVPcHRpb25zIiwiVGVtcGxhdGUiLCJtb2R1bGUiLCJEaWFsb2dCdXR0b24iLCJ0aGlzIiwiX2RlZmF1bHRfY2xpY2thYmxlX2NiIiwiYnV0dG9uIiwiaXNWaXNpYmxlIiwiaXNFbmFibGUiLCJnZXREaWFsb2ciLCJpc0NsaWNrYWJsZSIsIl9pbml0X2J0biIsImluc3RhbmNlIiwiYWRkTGlzdGVuZXIiLCJfYnRuX2V2ZW50X2F0dGFjaGVkIiwiX2J0bl9ldmVudF9kZXRhY2hlZCIsIl9idG5fZXZlbnRfZGlhbG9nX3RvZ2dsZV9lbmFibGUiLCJfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfcGVuZGluZyIsImRpYWxvZyIsIl9idXR0b25zIiwiaWQiLCJub3RpY2VfZGF0YSIsInRvZ2dsZUVuYWJsZSIsIm9wdGlvbnMiLCJkaXNhYmxlX29uX3BlbmRpbmciLCJvcHRpb24iLCJ0eXBlX3ByZWZpeCIsImNhbGwiLCJnZXQiLCJjb25zdGFudCIsIlBSRV9PUFRJT05TX05BTUUiLCJuYW1lIiwiZW5hYmxlZCIsInZpc2libGUiLCJ0ZW1wbGF0ZV9pbnN0YW5jZSIsImhhc093blByb3BlcnR5IiwiYWRkTGlzdGVuZXJzIiwiZXZlbnRzIiwiVEVNUExBVEVfVFlQRSIsIlRZUEVfSU5GTyIsIlRZUEVfUFJJTUFSWSIsIlRZUEVfU1VDQ0VTUyIsIlRZUEVfV0FSTklORyIsIlRZUEVfREFOR0VSIiwiT0siLCJDQU5DRUwiLCJZRVMiLCJOTyIsIlJFVFJZIiwiQlVUVE9OU19PS19PTkxZIiwiQlVUVE9OU19PS19DQU5DRUwiLCJCVVRUT05TX1lFU19OTyIsIkJVVFRPTlNfWUVTX05PX0NBTkNFTCIsIkJVVFRPTlNfUkVUUllfQ0FOQ0VMIiwibGFiZWwiLCJpY29uIiwidHlwZSIsInNpemUiLCJoYW5kbGVyIiwiY2xpY2thYmxlIiwidGVtcGxhdGVfbmFtZSIsInRlbXBsYXRlIiwidXRpbCIsImluaGVyaXQiLCJkZWZpbmVDb25zdGFudCIsImdsb2JhbE9wdGlvbiIsInVwZGF0ZSIsInByb3RvdHlwZSIsInNldFRlbXBsYXRlIiwiRXJyb3IiLCJkaXNjb25uZWN0IiwiY29ubmVjdCIsImdldFRlbXBsYXRlIiwiZGVmYXVsdF9vcHRpb25zIiwiaGFzVGVtcGxhdGUiLCJkZWZhdWx0X3RlbXBsYXRlIiwiZGVmYXVsdFRlbXBsYXRlIiwidGVtcGxhdGVJbnN0YW5jZSIsInZhbHVlIiwiYmVPYmplY3QiLCJhcHBseSIsInRvQXJyYXkiLCJhcmd1bWVudHMiLCJleHRlbmQiLCJvbWl0Iiwic2V0SGFuZGxlciIsImNhbGxiYWNrIiwiaXNGdW5jdGlvbiIsIkJvb2xlYW4iLCJjbGljayIsImVtaXRFdmVudCIsImNhbGxGdW5jIiwidG9nZ2xlIiwic2hvdyIsImlzVW5kZWZpbmVkIiwiaGlkZSIsImlzX2VuYWJsZSIsImRpc2FibGUiLCJlbmFibGUiLCJyZW5kZXIiLCJyZURyYXciLCJnZXRET00iLCJnZXRPdGhlckJ1dHRvbiIsImdldEJ1dHRvbiIsImdldENsb3NlS2V5IiwiY2xvc2VEaWFsb2ciLCJmb3JjZSIsImNsb3NlIiwid2FzQ2xvc2VEaWFsb2ciLCJzZXRDbG9zZWRCeSIsImJ1dHRvbl9wcmVfb3B0aW9ucyIsImlzRGVmaW5lZCIsImZyZWV6ZV9vcHRpb25zIiwiaXNPYmplY3QiLCJ1cGRhdGVPcHRpb25zIiwidHlwZXMiLCJhbGxfYnV0dG9uX29wdGlvbnMiLCJidXR0b25fb3B0aW9ucyIsImJ1dHRvbnMiLCJjYXN0QXJyYXkiLCJtYXAiLCJ0eXBlX29wdGlvbnMiLCJjbG9uZSIsImxlbmd0aCIsInNoaWZ0IiwiZGVmYXVsdENsaWNrYWJsZSIsImVhY2giLCJ0b0xvd2VyQ2FzZSIsIl9jbG9zZV9kaWFsb2dfaGFuZGxlciIsIkNMT1NFIiwialF1ZXJ5IiwiRGlhbG9nIiwiX2RlZmF1bHRfY2xvc2FibGVfZnVuYyIsImRpYWxvZ19pbnN0YW5jZSIsIl9kZWZhdWx0X2NsaWNrYWJsZV9mdW5jIiwicmVzZXREaWFsb2ciLCJkYXRhIiwic3RhdHVzIiwiU1RBVFVTX0lOSVRJQUwiLCJwZW5kaW5nIiwibG9hZGluZyIsImFqYXhfd29ya2VyIiwiX2RpYWxvZ3MiLCJjbG9zZWRfYnkiLCJzZWxmIiwiYXR0YWNoQnV0dG9uIiwidXBkYXRlRGlhbG9nQ29udGVudENhbGxiYWNrIiwiY29udGVudCIsImNvbnRlbnRfaGFuZGxlciIsInVwZGF0ZUNvbnRlbnQiLCJTVEFUVVNfT1BFTkVEIiwiU1RBVFVTX0hJRElORyIsIlNUQVRVU19DTE9TRUQiLCJTSVpFX1NNQUxMIiwiU0laRV9OT1JNQUwiLCJTSVpFX0xBUkdFIiwidGl0bGUiLCJjbGFzc2VzIiwiY2xvc2FibGUiLCJnZXRDb250ZW50IiwiYmluZCIsIm5ld19jb250ZW50IiwiaXNPcGVuZWQiLCJpc0luaXRpbmciLCJpbmRleE9mIiwiaXNWaXNpYmxpbmciLCJpc0hpZGluZyIsImlzQ2xvc2VkIiwiaXNQZW5kaW5nIiwicmVzb2x2ZWQiLCJpc1N0cmluZyIsImlzTnVtYmVyIiwiaGFzIiwibGlzdGVuIiwiYXR0YWNoTXVsdGlCdXR0b25zIiwiaGFzQnV0dG9uIiwicmVtb3ZlQnV0dG9uIiwidW5saXN0ZW4iLCJidXR0b25fbmFtZSIsImlzQ2xvc2VhYmxlIiwib3BlbiIsImJ5IiwicmVzZXQiLCJpc0Nsb3NlZEJ5IiwicmVxdWlyZSIsIiQiLCJBamF4IiwiY3JlYXRlQ2FuY2VsQnV0dG9uSGFuZGxlciIsImNyZWF0ZUJ1dHRvbnNIYW5kbGVyIiwiZm9ybSIsInZhbGlkYXRlX3Jlc3VsdCIsInVwZGF0ZUZvcm1NZXNzYWdlIiwidmFsaWRhdG9yIiwiZGlhbG9nRm9ybUNvbnRlbnRIYW5kbGVyIiwid3JhcF9iZWdpbiIsIndyYXBfZW5kIiwiZGlzYWJsZWFibGUiLCJwdXNoIiwidW5zaGlmdCIsImpvaW4iLCJjbGFzc2VzVG9TZWxlY3RvciIsImlzQXJyYXkiLCJzcGxpdCIsImZsYXR0ZW4iLCJpc0VtcHR5IiwiY2xhc3NfbmFtZSIsInRyaW0iLCJtZXNzYWdlIiwibWVzc2FnZV9kb20iLCJodG1sIiwiYWRkRGlhbG9nRGF0YSIsImRpYWxvZ19kb21faWQiLCJnZXRET01JRCIsImZvcm1fc2VsZWN0b3IiLCJmb3JtX2NsYXNzZXMiLCJmb3JtX21lc3NhZ2Vfc2VsZWN0b3IiLCJtZXNzYWdlX2NsYXNzZXMiLCJhZGREaWFsb2dNZXRob2RzIiwiZ2V0Rm9ybURPTSIsImNsZWFyRm9ybU1lc3NhZ2UiLCJnZXRGb3JtRGF0YSIsImpGb3JtIiwiY29uc29sZSIsIndhcm4iLCJhZGREaWFsb2dFdmVudHMiLCJmb3JtX3N1Ym1pdF9ldmVudF9saXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdWJtaXRfYnV0dG9uX25hbWUiLCJvbiIsImNhbmNlbF9idXR0b25fbmFtZSIsImtleSIsIm9mZiIsImZpbmQiLCJwcm9wIiwiRFlOQU1JQ19DT05URU5UX1BSRV9PUFRJT05TX05BTUUiLCJkeW5hbWljQ29udGVudCIsInVybCIsInVwZGF0ZV9jb250ZW50X2NiIiwiaXNOdWxsIiwiYXciLCJkb25lIiwicmVzcG9uc2UiLCJmYWlsIiwiZXJyb3JfY29udGVudCIsImFsd2F5cyIsImFib3J0IiwicmVxdWVzdCIsImJveCIsImRlZmF1bHRzIiwiaGFzX2Zvb3RlciIsImhhc19oZWFkZXIiLCJjbG9zZV9tYW51YWwiLCJESUFMT0dfQUxFUlRfUFJFX09QVElPTlNfTkFNRSIsImNsb3NlX2J1dHRvbl9vcHRpb25zIiwiYWxlcnQiLCJESUFMT0dfQ09ORklSTV9QUkVfT1BUSU9OU19OQU1FIiwiZGVmYXVsdF9idXR0b24iLCJjb25maXJtIiwibm9vcCIsImxhc3QiLCJPYmplY3QiLCJrZXlzIiwiRElBTE9HX0lGUkFNRV9QUkVfT1BUSU9OU19OQU1FIiwiYXR0cmlidXRlcyIsImlGcmFtZSIsImF0dHJzIiwidmFsIiwiaXNCb29sZWFuIiwiU1VCTUlUIiwiU1VCTUlUX0NBTkNFTCIsIkRJQUxPR19GT1JNX1BSRV9PUFRJT05TX05BTUUiLCJhdXRvX2ZvY3VzIiwiYnV0dG9uc19leHRlbmRfb3B0aW9ucyIsImNhbmNlbCIsInN1Ym1pdCIsImF0dGFjaGVkX2J1dHRvbiIsInNldFRpbWVvdXQiLCJmaXJzdCIsImZvY3VzIiwiRElBTE9HX1BST01QVF9QUkVfT1BUSU9OU19OQU1FIiwiZGVmYXVsdF92YWx1ZSIsInBsYWNlaG9sZGVyIiwiaW5wdXRfdHlwZSIsImlucHV0X2NsYXNzZXMiLCJjbG9zZV9vbl9zdWJtaXQiLCJwcm9tcHQiLCJwcm9tcHRfY2IiLCJidG5fbmFtZSIsImJ0biJdLCJtYXBwaW5ncyI6IkNBQUMsU0FBVUEsRUFBTUMsR0FDYixHQUFzQixrQkFBWEMsU0FBeUJBLE9BQU9DLElBQUssQ0FDNUMsR0FBSUMsSUFDQSxTQUNBLFVBQ0Esd0JBQ0Esc0JBQ0EsbUJBRUpGLFFBQU9FLEVBQWMsU0FBVUMsRUFBR0MsRUFBT0MsRUFBY0MsRUFBWUMsR0FDL0QsR0FBSUMsR0FBU1QsRUFBUUksRUFBR0MsRUFBT0MsRUFBY0MsRUFBWUMsRUFLekQsT0FIQUgsR0FBTUssYUFBZUQsRUFDckJWLEVBQUtXLGFBQWVELEVBRWJBLFFBRVIsQ0FDSCxHQUFJQSxHQUFTVCxFQUNURCxFQUFLSyxFQUNMTCxFQUFLTSxNQUNMTixFQUFLTSxNQUFNQyxjQUFnQlAsRUFBS08sYUFDaENQLEVBQUtNLE1BQU1FLFlBQWNSLEVBQUtRLFdBQzlCUixFQUFLTSxNQUFNRyxVQUFZVCxFQUFLUyxTQUdoQ1QsR0FBS00sTUFBTUssYUFBZUQsRUFDMUJWLEVBQUtXLGFBQWVELElBRTFCRSxLQUFNLFNBQVVQLEVBQUdDLEVBQU9DLEVBQWNDLEVBQVlDLEdBb0NsRCxRQUFTSSxHQUFzQkMsR0FDM0IsTUFBT0EsR0FBT0MsYUFBZUQsRUFBT0UsWUFBY0YsRUFBT0csWUFBWUMsY0FHekUsUUFBU0MsR0FBVUMsR0FDZkEsRUFBU0MsWUFBWSxTQUFVQyxHQUMvQkYsRUFBU0MsWUFBWSxX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QUNsRSxVQUFXcFEsRUFBUXFRLGNBQWdCLEtBQ25DLFVBQVdyUSxFQUFRa1EsY0FBZ0IsSUFDbkMsZ0JBQWlCbFEsRUFBUW1RLFlBQWMsSUFDdkMsTUFxQkt2SixFQUFPMEQsS0FBSzFDLEVBQVFvRCxLQUFLLElBQUt3RixFQUFXbFMsRUFBRXVGLEtBQUs3RCxFQUFTLGdCQUFpQixjQUFlLGFBQWMsZ0JBQWlCIiwiZmlsZSI6ImRpYWxvZy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xyXG4gICAgICAgICAgICAnbG9kYXNoJyxcclxuICAgICAgICAgICAgJ2tob2FpanMnLFxyXG4gICAgICAgICAgICAna2hvYWlqcy1ldmVudC1lbWl0dGVyJyxcclxuICAgICAgICAgICAgJ2tob2FpanMtcHJlLW9wdGlvbnMnLFxyXG4gICAgICAgICAgICAna2hvYWlqcy10ZW1wbGF0ZSdcclxuICAgICAgICBdO1xyXG4gICAgICAgIGRlZmluZShkZXBlbmRlbmNpZXMsIGZ1bmN0aW9uIChfLCBLaG9haSwgRXZlbnRFbWl0dGVyLCBQcmVPcHRpb25zLCBUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gZmFjdG9yeShfLCBLaG9haSwgRXZlbnRFbWl0dGVyLCBQcmVPcHRpb25zLCBUZW1wbGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBLaG9haS5EaWFsb2dCdXR0b24gPSBtb2R1bGU7XHJcbiAgICAgICAgICAgIHJvb3QuRGlhbG9nQnV0dG9uID0gbW9kdWxlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIG1vZHVsZSA9IGZhY3RvcnkoXHJcbiAgICAgICAgICAgIHJvb3QuXyxcclxuICAgICAgICAgICAgcm9vdC5LaG9haSxcclxuICAgICAgICAgICAgcm9vdC5LaG9haS5FdmVudEVtaXR0ZXIgfHwgcm9vdC5FdmVudEVtaXR0ZXIsXHJcbiAgICAgICAgICAgIHJvb3QuS2hvYWkuUHJlT3B0aW9ucyB8fCByb290LlByZU9wdGlvbnMsXHJcbiAgICAgICAgICAgIHJvb3QuS2hvYWkuVGVtcGxhdGUgfHwgcm9vdC5UZW1wbGF0ZVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJvb3QuS2hvYWkuRGlhbG9nQnV0dG9uID0gbW9kdWxlO1xyXG4gICAgICAgIHJvb3QuRGlhbG9nQnV0dG9uID0gbW9kdWxlO1xyXG4gICAgfVxyXG59KHRoaXMsIGZ1bmN0aW9uIChfLCBLaG9haSwgRXZlbnRFbWl0dGVyLCBQcmVPcHRpb25zLCBUZW1wbGF0ZSkge1xyXG4gICAgdmFyIHZlcnNpb24gPSAnMC4wLjEnO1xyXG4gICAgdmFyIGNvbnN0YW50ID0ge1xyXG4gICAgICAgIFBSRV9PUFRJT05TX05BTUU6ICdLaG9haS5EaWFsb2dCdXR0b24nLFxyXG4gICAgICAgIFRFTVBMQVRFX1RZUEU6ICdEaWFsb2dCdXR0b24nLFxyXG4gICAgICAgIFRZUEVfSU5GTzogJ2luZm8nLFxyXG4gICAgICAgIFRZUEVfUFJJTUFSWTogJ3ByaW1hcnknLFxyXG4gICAgICAgIFRZUEVfU1VDQ0VTUzogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIFRZUEVfV0FSTklORzogJ3dhcm5pbmcnLFxyXG4gICAgICAgIFRZUEVfREFOR0VSOiAnZGFuZ2VyJyxcclxuXHJcbiAgICAgICAgT0s6ICdvaycsXHJcbiAgICAgICAgQ0FOQ0VMOiAnY2FuY2VsJyxcclxuICAgICAgICBZRVM6ICd5ZXMnLFxyXG4gICAgICAgIE5POiAnbm8nLFxyXG4gICAgICAgIFJFVFJZOiAncmV0cnknLFxyXG5cclxuICAgICAgICBCVVRUT05TX09LX09OTFk6IFsnb2snXSxcclxuICAgICAgICBCVVRUT05TX09LX0NBTkNFTDogWydvaycsICdjYW5jZWwnXSxcclxuICAgICAgICBCVVRUT05TX1lFU19OTzogWyd5ZXMnLCAnbm8nXSxcclxuICAgICAgICBCVVRUT05TX1lFU19OT19DQU5DRUw6IFsneWVzJywgJ25vJywgJ2NhbmNlbCddLFxyXG4gICAgICAgIEJVVFRPTlNfUkVUUllfQ0FOQ0VMOiBbJ3JldHJ5JywgJ2NhbmNlbCddXHJcbiAgICB9O1xyXG4gICAgdmFyIF9idXR0b25zID0ge307XHJcblxyXG4gICAgUHJlT3B0aW9ucy5kZWZpbmUoY29uc3RhbnQuUFJFX09QVElPTlNfTkFNRSwge1xyXG4gICAgICAgIGxhYmVsOiAnVW50aXRsZWQnLFxyXG4gICAgICAgIGljb246ICcnLFxyXG4gICAgICAgIHR5cGU6IGNvbnN0YW50LlRZUEVfSU5GTyxcclxuICAgICAgICBzaXplOiAxLFxyXG4gICAgICAgIGhhbmRsZXI6IG51bGwsXHJcbiAgICAgICAgZGlzYWJsZV9vbl9wZW5kaW5nOiB0cnVlLFxyXG4gICAgICAgIGNsaWNrYWJsZTogX2RlZmF1bHRfY2xpY2thYmxlX2NiLFxyXG4gICAgICAgIHRlbXBsYXRlX25hbWU6ICcnLFxyXG4gICAgICAgIHRlbXBsYXRlOiB7fVxyXG4gICAgfSk7XHJcbiAgICBmdW5jdGlvbiBfZGVmYXVsdF9jbGlja2FibGVfY2IoYnV0dG9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGJ1dHRvbi5pc1Zpc2libGUoKSAmJiBidXR0b24uaXNFbmFibGUoKSAmJiBidXR0b24uZ2V0RGlhbG9nKCkuaXNDbGlja2FibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfaW5pdF9idG4oaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5hZGRMaXN0ZW5lcignbGlzdGVuJywgX2J0bl9ldmVudF9hdHRhY2hlZCk7XHJcbiAgICAgICAgaW5zdGFuY2UuYWRkTGlzdGVuZXIoJ3VubGlzdGVuJywgX2J0bl9ldmVudF9kZXRhY2hlZCk7XHJcbiAgICAgICAgaW5zdGFuY2UuYWRkTGlzdGVuZXIoJ2RpYWxvZy50b2dnbGVfZW5hYmxlJywgX2J0bl9ldmVudF9kaWFsb2dfdG9nZ2xlX2VuYWJsZSk7XHJcbiAgICAgICAgaW5zdGFuY2UuYWRkTGlzdGVuZXIoJ2RpYWxvZy50b2dnbGVfcGVuZGluZycsIF9idG5fZXZlbnRfZGlhbG9nX3RvZ2dsZV9wZW5kaW5nKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfYnRuX2V2ZW50X2F0dGFjaGVkKGRpYWxvZykge1xyXG4gICAgICAgIF9idXR0b25zW3RoaXMuaWRdLmRpYWxvZyA9IGRpYWxvZztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfYnRuX2V2ZW50X2RldGFjaGVkKGRpYWxvZykge1xyXG4gICAgICAgIF9idXR0b25zW3RoaXMuaWRdLmRpYWxvZyA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX2J0bl9ldmVudF9kaWFsb2dfdG9nZ2xlX2VuYWJsZShub3RpY2VfZGF0YSkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKG5vdGljZV9kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfYnRuX2V2ZW50X2RpYWxvZ190b2dnbGVfcGVuZGluZyhub3RpY2VfZGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZV9vbl9wZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKCFub3RpY2VfZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIERpYWxvZ0J1dHRvbihvcHRpb24pIHtcclxuICAgICAgICB0aGlzLnR5cGVfcHJlZml4ID0gJ2RpYWxvZ19idXR0b24nO1xyXG4gICAgICAgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChjb25zdGFudC5QUkVfT1BUSU9OU19OQU1FLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuaWRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgX2J1dHRvbnNbdGhpcy5pZF0gPSB7XHJcbiAgICAgICAgICAgIGRpYWxvZzogbnVsbCxcclxuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVfaW5zdGFuY2U6IG51bGxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm9wdGlvbih0aGlzLm9wdGlvbnMpO1xyXG5cclxuICAgICAgICBpZiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb24uaGFzT3duUHJvcGVydHkoJ2V2ZW50cycpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVycyhvcHRpb24uZXZlbnRzKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25bJ2V2ZW50cyddO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbihvcHRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2luaXRfYnRuKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIEtob2FpLnV0aWwuaW5oZXJpdChEaWFsb2dCdXR0b24sIEV2ZW50RW1pdHRlcik7XHJcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZ0J1dHRvbiwgJ3ZlcnNpb24nLCB2ZXJzaW9uKTtcclxuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nQnV0dG9uLCBjb25zdGFudCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHt7fX0gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBEaWFsb2dCdXR0b24uZ2xvYmFsT3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBQcmVPcHRpb25zLnVwZGF0ZShEaWFsb2dCdXR0b24uUFJFX09QVElPTlNfTkFNRSwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG5cclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAodGVtcGxhdGVfaW5zdGFuY2UpIHtcclxuICAgICAgICBpZiAoISh0ZW1wbGF0ZV9pbnN0YW5jZSBpbnN0YW5jZW9mIFRlbXBsYXRlKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVGVtcGxhdGUgaW5zdGFuY2UnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRlbXBsYXRlX2luc3RhbmNlLm9wdGlvbih0aGlzLm9wdGlvbnMudGVtcGxhdGUpO1xyXG4gICAgICAgIF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlID0gdGVtcGxhdGVfaW5zdGFuY2U7XHJcbiAgICAgICAgdGVtcGxhdGVfaW5zdGFuY2UuY29ubmVjdCh0aGlzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0ZW1wbGF0ZSBpbnN0YW5jZVxyXG4gICAgICogQHJldHVybnMge251bGx8Kn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIV9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnRlbXBsYXRlX25hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0X29wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2dCdXR0b24uUFJFX09QVElPTlNfTkFNRSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRfb3B0aW9ucy50ZW1wbGF0ZV9uYW1lICYmIFRlbXBsYXRlLmhhc1RlbXBsYXRlKERpYWxvZ0J1dHRvbi5URU1QTEFURV9UWVBFLCBkZWZhdWx0X29wdGlvbnMudGVtcGxhdGVfbmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudGVtcGxhdGVfbmFtZSA9IGRlZmF1bHRfb3B0aW9ucy50ZW1wbGF0ZV9uYW1lO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdF90ZW1wbGF0ZSA9IFRlbXBsYXRlLmRlZmF1bHRUZW1wbGF0ZShEaWFsb2dCdXR0b24uVEVNUExBVEVfVFlQRSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWxzZSAhPT0gZGVmYXVsdF90ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudGVtcGxhdGVfbmFtZSA9IGRlZmF1bHRfdGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByZU9wdGlvbnMudXBkYXRlKERpYWxvZ0J1dHRvbi5QUkVfT1BUSU9OU19OQU1FLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZV9uYW1lOiBkZWZhdWx0X3RlbXBsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGlhbG9nIGJ1dHRvbiBkZWZhdWx0IHRlbXBsYXRlIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGVtcGxhdGUoVGVtcGxhdGUudGVtcGxhdGVJbnN0YW5jZShEaWFsb2dCdXR0b24uVEVNUExBVEVfVFlQRSwgdGhpcy5vcHRpb25zLnRlbXBsYXRlX25hbWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZTtcclxuICAgIH07XHJcbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBvcHRpb24gPSBLaG9haS51dGlsLmJlT2JqZWN0LmFwcGx5KEtob2FpLCBfLnRvQXJyYXkoYXJndW1lbnRzKSk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb24udGVtcGxhdGVfbmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRlbXBsYXRlKFRlbXBsYXRlLnRlbXBsYXRlSW5zdGFuY2UoRGlhbG9nQnV0dG9uLlRFTVBMQVRFX1RZUEUsIG9wdGlvbi50ZW1wbGF0ZV9uYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb24udGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRUZW1wbGF0ZSgpLm9wdGlvbihvcHRpb24udGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5leHRlbmQodGhpcy5vcHRpb25zLCBfLm9taXQob3B0aW9uLCBbJ3RlbXBsYXRlX25hbWUnXSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5zZXRIYW5kbGVyID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb24oJ2hhbmRsZXInLCBjYWxsYmFjayk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGRpYWxvZyBpbnN0YW5jZVxyXG4gICAgICogQHJldHVybnMgeyhEaWFsb2d8Ym9vbGVhbil9IEZhbHNlIGlmIG5vdCBhdHRhY2ggdG8gZGlhbG9nIHlldFxyXG4gICAgICovXHJcbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmdldERpYWxvZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoX2J1dHRvbnNbdGhpcy5pZF0uZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfYnV0dG9uc1t0aGlzLmlkXS5kaWFsb2c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuaXNDbGlja2FibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuY2xpY2thYmxlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsaWNrYWJsZS5jYWxsKHRoaXMsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5vcHRpb25zLmNsaWNrYWJsZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuaXNWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBCb29sZWFuKF9idXR0b25zW3RoaXMuaWRdLnZpc2libGUpO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuaXNFbmFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oX2J1dHRvbnNbdGhpcy5pZF0uZW5hYmxlZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xpY2sgYnV0dG9uXHJcbiAgICAgKiBFbWl0IGV2ZW50czpcclxuICAgICAqIC0gY2xpY2s6IHJ1biBiZWZvcmUgYnV0dG9uIGhhbmRsZXIgcnVuXHJcbiAgICAgKiAtIGNsaWNrZWQ6IHJ1bmcgYWZ0ZXIgYnV0dG9uIGhhbmRsZXIgcnVuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDbGlja2FibGUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnY2xpY2snKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBLaG9haS51dGlsLmNhbGxGdW5jKHRoaXMub3B0aW9ucy5oYW5kbGVyLCB0aGlzLCB0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnY2xpY2tlZCcpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IG9yIGhpZGUgYnV0dG9uXHJcbiAgICAgKiBFbWl0IGV2ZW50czpcclxuICAgICAqIC0gc2hvdy9oaWRlXHJcbiAgICAgKiAtIHRvZ2dsZTogW2lzIHNob3c/XVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaG93IFRydWUgb3IgbWlzc2luZzogc2hvdywgRmFsc2U6IGhpZGVcclxuICAgICAqL1xyXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoc2hvdykge1xyXG4gICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKHNob3cpKSB7XHJcbiAgICAgICAgICAgIHNob3cgPSAhX2J1dHRvbnNbdGhpcy5pZF0udmlzaWJsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfYnV0dG9uc1t0aGlzLmlkXS52aXNpYmxlICE9PSBzaG93KSB7XHJcbiAgICAgICAgICAgIF9idXR0b25zW3RoaXMuaWRdLnZpc2libGUgPSBzaG93O1xyXG4gICAgICAgICAgICBpZiAoc2hvdykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3Nob3cnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd0b2dnbGUnLCBzaG93KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlKHRydWUpO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZShmYWxzZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVG9nZ2xlIGVuYWJsZWQgc3RhdHVzXHJcbiAgICAgKiBFbWl0IGV2ZW50czpcclxuICAgICAqIC0gZW5hYmxlZC9kaXNhYmxlZFxyXG4gICAgICogLSB0b2dnbGVfZW5hYmxlZDogW2lzIGVuYWJsZWQ/XVxyXG4gICAgICogQHBhcmFtIGlzX2VuYWJsZVxyXG4gICAgICovXHJcbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLnRvZ2dsZUVuYWJsZSA9IGZ1bmN0aW9uIChpc19lbmFibGUpIHtcclxuICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChpc19lbmFibGUpKSB7XHJcbiAgICAgICAgICAgIGlzX2VuYWJsZSA9ICFfYnV0dG9uc1t0aGlzLmlkXS5lbmFibGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF9idXR0b25zW3RoaXMuaWRdLmVuYWJsZWQgIT09IGlzX2VuYWJsZSkge1xyXG4gICAgICAgICAgICBfYnV0dG9uc1t0aGlzLmlkXS5lbmFibGVkID0gaXNfZW5hYmxlO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudChpc19lbmFibGUgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3RvZ2dsZV9lbmFibGUnLCBpc19lbmFibGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlRW5hYmxlKGZhbHNlKTtcclxuICAgIH07XHJcbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUVuYWJsZSh0cnVlKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRlbXBsYXRlKCkucmVuZGVyKCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZnJlc2ggYnV0dG9uIERPTVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUucmVEcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2J1dHRvbnNbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UucmVEcmF3KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLmdldERPTSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoX2J1dHRvbnNbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UgJiYgKF9idXR0b25zW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlIGluc3RhbmNlb2YgVGVtcGxhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfYnV0dG9uc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZS5nZXRET00oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZVxyXG4gICAgICogQHJldHVybnMge0RpYWxvZ0J1dHRvbnxudWxsfCp8T2JqZWN0fEV2ZW50RW1pdHRlcnxEaWFsb2d9XHJcbiAgICAgKi9cclxuICAgIERpYWxvZ0J1dHRvbi5wcm90b3R5cGUuZ2V0T3RoZXJCdXR0b24gPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERpYWxvZygpLmdldEJ1dHRvbihuYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaWFsb2cgY2xvc2UgXCJieVwiIGtleVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5nZXRDbG9zZUtleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm5hbWU7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsb3NlIGRpYWxvZ1xyXG4gICAgICogQHBhcmFtIGZvcmNlXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nQnV0dG9uLnByb3RvdHlwZS5jbG9zZURpYWxvZyA9IGZ1bmN0aW9uIChmb3JjZSkge1xyXG4gICAgICAgIHZhciBkaWFsb2cgPSB0aGlzLmdldERpYWxvZygpO1xyXG5cclxuICAgICAgICBpZiAoZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIGRpYWxvZy5jbG9zZShmb3JjZSwgdGhpcy5nZXRDbG9zZUtleSgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGRpYWxvZyBjbG9zZWQgYnkgdGhpcyBidXR0b25cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2dCdXR0b24ucHJvdG90eXBlLndhc0Nsb3NlRGlhbG9nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkaWFsb2cgPSB0aGlzLmdldERpYWxvZygpO1xyXG5cclxuICAgICAgICBpZiAoZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkaWFsb2cuc2V0Q2xvc2VkQnkodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qXHJcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgfCBTdGF0aWMgbWV0aG9kc1xyXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIHxcclxuICAgICB8XHJcbiAgICAgfFxyXG4gICAgIHxcclxuICAgICAqL1xyXG5cclxuICAgIHZhciBidXR0b25fcHJlX29wdGlvbnMgPSB7fTtcclxuXHJcbiAgICBEaWFsb2dCdXR0b24uaXNEZWZpbmVkID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gYnV0dG9uX3ByZV9vcHRpb25zLmhhc093blByb3BlcnR5KG5hbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBEaWFsb2dCdXR0b24uZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMsIGZyZWV6ZV9vcHRpb25zKSB7XHJcbiAgICAgICAgYnV0dG9uX3ByZV9vcHRpb25zW25hbWVdID0ge1xyXG4gICAgICAgICAgICBvcHRpb25zOiBfLmlzT2JqZWN0KG9wdGlvbnMpID8gb3B0aW9ucyA6IHt9LFxyXG4gICAgICAgICAgICBmcmVlemVfb3B0aW9uczogXy5pc09iamVjdChmcmVlemVfb3B0aW9ucykgPyBmcmVlemVfb3B0aW9ucyA6IHt9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBidXR0b25fcHJlX29wdGlvbnNbbmFtZV0uZnJlZXplX29wdGlvbnMubmFtZSA9IG5hbWU7XHJcbiAgICB9O1xyXG5cclxuICAgIERpYWxvZ0J1dHRvbi51cGRhdGVPcHRpb25zID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoRGlhbG9nQnV0dG9uLmlzRGVmaW5lZChuYW1lKSkge1xyXG4gICAgICAgICAgICBfLmV4dGVuZChidXR0b25fcHJlX29wdGlvbnNbbmFtZV0ub3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgRGlhbG9nQnV0dG9uLmZhY3RvcnkgPSBmdW5jdGlvbiAodHlwZXMsIGFsbF9idXR0b25fb3B0aW9ucywgYnV0dG9uX29wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIV8uaXNPYmplY3QoYWxsX2J1dHRvbl9vcHRpb25zKSkge1xyXG4gICAgICAgICAgICBhbGxfYnV0dG9uX29wdGlvbnMgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFfLmlzT2JqZWN0KGJ1dHRvbl9vcHRpb25zKSkge1xyXG4gICAgICAgICAgICBidXR0b25fb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSBfLmNhc3RBcnJheSh0eXBlcykubWFwKGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zLCB0eXBlX29wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIURpYWxvZ0J1dHRvbi5pc0RlZmluZWQodHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGlhbG9nIEJ1dHRvbiB0eXBlIGlzIHVucmVnaXN0ZXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0eXBlX29wdGlvbnMgPSBidXR0b25fcHJlX29wdGlvbnNbdHlwZV07XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSxcclxuICAgICAgICAgICAgICAgIHR5cGVfb3B0aW9ucy5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgXy5jbG9uZShhbGxfYnV0dG9uX29wdGlvbnMpLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uX29wdGlvbnMuaGFzT3duUHJvcGVydHkodHlwZSkgPyBidXR0b25fb3B0aW9uc1t0eXBlXSA6IHt9LFxyXG4gICAgICAgICAgICAgICAgdHlwZV9vcHRpb25zLmZyZWV6ZV9vcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGlhbG9nQnV0dG9uKG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoYnV0dG9ucy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbnMuc2hpZnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBidXR0b25zO1xyXG4gICAgfTtcclxuXHJcbiAgICBEaWFsb2dCdXR0b24uZGVmYXVsdENsaWNrYWJsZSA9IF9kZWZhdWx0X2NsaWNrYWJsZV9jYjtcclxuXHJcbiAgICAvKlxyXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIHwgUHJlZGVmaW5lIGJ1dHRvbiB0eXBlc1xyXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIHxcclxuICAgICB8XHJcbiAgICAgfFxyXG4gICAgIHxcclxuICAgICAqL1xyXG5cclxuICAgIF8uZWFjaChbJ09rJywgJ1llcycsICdObycsICdSZXRyeScsICdJZ25vcmUnXSwgZnVuY3Rpb24gKGxhYmVsKSB7XHJcbiAgICAgICAgRGlhbG9nQnV0dG9uLmRlZmluZShsYWJlbC50b0xvd2VyQ2FzZSgpLCB7XHJcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgRGlhbG9nQnV0dG9uLmRlZmluZSgnY2FuY2VsJywge1xyXG4gICAgICAgIGxhYmVsOiAnQ2FuY2VsJyxcclxuICAgICAgICBkaXNhYmxlX29uX3BlbmRpbmc6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nQnV0dG9uLCB7XHJcbiAgICAgICAgICAgIENMT1NFOiAnY2xvc2UnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9jbG9zZV9kaWFsb2dfaGFuZGxlcihidXR0b24pIHtcclxuICAgICAgICAgICAgdmFyIGRpYWxvZyA9IGJ1dHRvbi5nZXREaWFsb2coKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbG9zZURpYWxvZyhCb29sZWFuKGJ1dHRvbi5vcHRpb25zLmZvcmNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERpYWxvZ0J1dHRvbi5kZWZpbmUoRGlhbG9nQnV0dG9uLkNMT1NFLCB7XHJcbiAgICAgICAgICAgIGxhYmVsOiAnQ2xvc2UnLFxyXG4gICAgICAgICAgICB0eXBlOiBEaWFsb2dCdXR0b24uVFlQRV9JTkZPLFxyXG4gICAgICAgICAgICBmb3JjZTogZmFsc2VcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIGhhbmRsZXI6IF9jbG9zZV9kaWFsb2dfaGFuZGxlclxyXG4gICAgICAgIH0pO1xyXG4gICAgfSkoKTtcclxuXHJcblxyXG4gICAgcmV0dXJuIERpYWxvZ0J1dHRvbjtcclxufSkpO1xuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgdmFyIGRlcGVuZGVuY2llcyA9IFtcclxuICAgICAgICAgICAgJ2xvZGFzaCcsXHJcbiAgICAgICAgICAgICdqcXVlcnknLFxyXG4gICAgICAgICAgICAna2hvYWlqcycsXHJcbiAgICAgICAgICAgICdraG9haWpzLWV2ZW50LWVtaXR0ZXInLFxyXG4gICAgICAgICAgICAna2hvYWlqcy1wcmUtb3B0aW9ucycsXHJcbiAgICAgICAgICAgICdraG9haWpzLXRlbXBsYXRlJyxcclxuICAgICAgICAgICAgJ2RpYWxvZ19idXR0b24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBkZWZpbmUoZGVwZW5kZW5jaWVzLCBmdW5jdGlvbiAoXywgalF1ZXJ5LCBLaG9haSwgRXZlbnRFbWl0dGVyLCBQcmVPcHRpb25zLCBUZW1wbGF0ZSwgRGlhbG9nQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBmYWN0b3J5KF8sIGpRdWVyeSwgS2hvYWksIEV2ZW50RW1pdHRlciwgUHJlT3B0aW9ucywgVGVtcGxhdGUsIERpYWxvZ0J1dHRvbik7XHJcblxyXG4gICAgICAgICAgICBLaG9haS5EaWFsb2cgPSBtb2R1bGU7XHJcbiAgICAgICAgICAgIHJvb3QuRGlhbG9nID0gbW9kdWxlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXHJcbiAgICAgICAgdmFyIG1vZHVsZSA9IGZhY3RvcnkoXHJcbiAgICAgICAgICAgIHJvb3QuXyxcclxuICAgICAgICAgICAgcm9vdC5qUXVlcnksXHJcbiAgICAgICAgICAgIHJvb3QuS2hvYWksXHJcbiAgICAgICAgICAgIChyb290Lktob2FpICYmIHJvb3QuS2hvYWkuRXZlbnRFbWl0dGVyKSB8fCByb290LkV2ZW50RW1pdHRlcixcclxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5QcmVPcHRpb25zKSB8fCByb290LlByZU9wdGlvbnMsXHJcbiAgICAgICAgICAgIChyb290Lktob2FpICYmIHJvb3QuS2hvYWkuVGVtcGxhdGUpIHx8IHJvb3QuVGVtcGxhdGUsXHJcbiAgICAgICAgICAgIChyb290Lktob2FpICYmIHJvb3QuS2hvYWkuRGlhbG9nQnV0dG9uKSB8fCByb290LkRpYWxvZ0J1dHRvblxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJvb3QuS2hvYWkuRGlhbG9nID0gbW9kdWxlO1xyXG4gICAgICAgIHJvb3QuRGlhbG9nID0gbW9kdWxlO1xyXG4gICAgfVxyXG59KHRoaXMsIGZ1bmN0aW9uIChfLCBqUXVlcnksIEtob2FpLCBFdmVudEVtaXR0ZXIsIFByZU9wdGlvbnMsIFRlbXBsYXRlLCBEaWFsb2dCdXR0b24pIHtcclxuICAgIHZhciB2ZXJzaW9uID0gJzAuMC42JztcclxuICAgIHZhciBjb25zdGFudCA9IHtcclxuICAgICAgICBQUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nJyxcclxuICAgICAgICBURU1QTEFURV9UWVBFOiAnRGlhbG9nJyxcclxuICAgICAgICBTVEFUVVNfSU5JVElBTDogJ2luaXRpYWwnLFxyXG4gICAgICAgIFNUQVRVU19PUEVORUQ6ICdvcGVuZWQnLFxyXG4gICAgICAgIFNUQVRVU19ISURJTkc6ICdoaWRpbmcnLFxyXG4gICAgICAgIFNUQVRVU19DTE9TRUQ6ICdyZW1vdmVkJyxcclxuXHJcbiAgICAgICAgVFlQRV9JTkZPOiAnaW5mbycsXHJcbiAgICAgICAgVFlQRV9TVUNDRVNTOiAnc3VjY2VzcycsXHJcbiAgICAgICAgVFlQRV9QUklNQVJZOiAncHJpbWFyeScsXHJcbiAgICAgICAgVFlQRV9XQVJOSU5HOiAnd2FybmluZycsXHJcbiAgICAgICAgVFlQRV9EQU5HRVI6ICdkYW5nZXInLFxyXG5cclxuICAgICAgICBTSVpFX1NNQUxMOiAnc21hbGwnLFxyXG4gICAgICAgIFNJWkVfTk9STUFMOiAnbm9ybWFsJyxcclxuICAgICAgICBTSVpFX0xBUkdFOiAnbGFyZ2UnXHJcbiAgICB9O1xyXG4gICAgdmFyIF9kaWFsb2dzID0ge307XHJcblxyXG4gICAgZnVuY3Rpb24gX2RlZmF1bHRfY2xvc2FibGVfZnVuYyhkaWFsb2dfaW5zdGFuY2UpIHtcclxuICAgICAgICByZXR1cm4gZGlhbG9nX2luc3RhbmNlLmlzRW5hYmxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX2RlZmF1bHRfY2xpY2thYmxlX2Z1bmMoZGlhbG9nX2luc3RhbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGRpYWxvZ19pbnN0YW5jZS5pc0VuYWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIFByZU9wdGlvbnMuZGVmaW5lKGNvbnN0YW50LlBSRV9PUFRJT05TX05BTUUsIHtcclxuICAgICAgICB0aXRsZTogJ0RpYWxvZycsXHJcbiAgICAgICAgdHlwZTogY29uc3RhbnQuVFlQRV9JTkZPLFxyXG4gICAgICAgIGNvbnRlbnQ6ICcnLFxyXG4gICAgICAgIGNvbnRlbnRfaGFuZGxlcjogbnVsbCxcclxuICAgICAgICB0ZW1wbGF0ZV9uYW1lOiAnJyxcclxuICAgICAgICB0ZW1wbGF0ZToge30sXHJcbiAgICAgICAgc2l6ZTogY29uc3RhbnQuU0laRV9OT1JNQUwsXHJcbiAgICAgICAgY2xhc3NlczogJycsXHJcbiAgICAgICAgY2xvc2FibGU6IF9kZWZhdWx0X2Nsb3NhYmxlX2Z1bmMsXHJcbiAgICAgICAgY2xpY2thYmxlOiBfZGVmYXVsdF9jbGlja2FibGVfZnVuY1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXREaWFsb2coaWQpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgc3RhdHVzOiBjb25zdGFudC5TVEFUVVNfSU5JVElBTCxcclxuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgcGVuZGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBhamF4X3dvcmtlcjogbnVsbCxcclxuICAgICAgICAgICAgdGVtcGxhdGVfaW5zdGFuY2U6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChfZGlhbG9ncy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcclxuICAgICAgICAgICAgZGF0YS50ZW1wbGF0ZV9pbnN0YW5jZSA9IF9kaWFsb2dzW2lkXS50ZW1wbGF0ZV9pbnN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9kaWFsb2dzW2lkXSA9IGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYW4gYWRkIGV2ZW50cyB0byBkaWFsb2cgYnkgYWRkIGV2ZW50cyB0byBvcHRpb24gcGFyYW1ldGVyIGZpZWxkIGFzICdldmVudHMnXHJcbiAgICAgKiBBZGQgYnV0dG9ucyB2aWEgb3B0aW9ucyBwYXJhbWV0ZXIgZmllbGQgYXMgJ2J1dHRvbnMnXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIERpYWxvZyBvcHRpb25zXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBleHRlbmQgRXZlbnRFbWl0dGVyXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIERpYWxvZyhvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy50eXBlX3ByZWZpeCA9ICdkaWFsb2cnO1xyXG5cclxuICAgICAgICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gUHJlT3B0aW9ucy5nZXQoY29uc3RhbnQuUFJFX09QVElPTlNfTkFNRSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2xvc2VkX2J5ID0gJyc7XHJcbiAgICAgICAgdGhpcy5kYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5idXR0b25zID0ge307XHJcblxyXG4gICAgICAgIHJlc2V0RGlhbG9nKHRoaXMuaWQpO1xyXG5cclxuICAgICAgICB0aGlzLm9wdGlvbih0aGlzLm9wdGlvbnMpO1xyXG5cclxuICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZXZlbnRzJykgJiYgb3B0aW9ucy5ldmVudHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXJzKG9wdGlvbnMuZXZlbnRzKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zWydldmVudHMnXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2J1dHRvbnMnKSAmJiBvcHRpb25zLmJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICBfLmVhY2gob3B0aW9ucy5idXR0b25zLCBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hdHRhY2hCdXR0b24oYnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG9wdGlvbnNbJ2J1dHRvbnMnXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9uc1snYnV0dG9ucyddO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbihvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgS2hvYWkudXRpbC5pbmhlcml0KERpYWxvZywgRXZlbnRFbWl0dGVyKTtcclxuXHJcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZywgJ3ZlcnNpb24nLCB2ZXJzaW9uKTtcclxuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCBjb25zdGFudCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXR1cCBkZWZhdWx0IG9wdGlvbnNcclxuICAgICAqIEBwYXJhbSB7e319IG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgRGlhbG9nLmdsb2JhbE9wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgUHJlT3B0aW9ucy51cGRhdGUoRGlhbG9nLlBSRV9PUFRJT05TX05BTUUsIG9wdGlvbnMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVEaWFsb2dDb250ZW50Q2FsbGJhY2soY29udGVudCkge1xyXG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLmNvbnRlbnRfaGFuZGxlcikpIHtcclxuICAgICAgICAgICAgY29udGVudCA9IHRoaXMub3B0aW9ucy5jb250ZW50X2hhbmRsZXIoY29udGVudCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KCdjb250ZW50X2xvYWRlZCcsIGNvbnRlbnQpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudChjb250ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmdldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuY29udGVudCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2xvYWRfY29udGVudCcpO1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGVudCA9IHRoaXMub3B0aW9ucy5jb250ZW50KHVwZGF0ZURpYWxvZ0NvbnRlbnRDYWxsYmFjay5iaW5kKHRoaXMpLCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLmNvbnRlbnRfaGFuZGxlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jb250ZW50X2hhbmRsZXIodGhpcy5vcHRpb25zLmNvbnRlbnQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jb250ZW50O1xyXG4gICAgfTtcclxuICAgIERpYWxvZy5wcm90b3R5cGUudXBkYXRlQ29udGVudCA9IGZ1bmN0aW9uIChuZXdfY29udGVudCkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy5jb250ZW50ID0gbmV3X2NvbnRlbnQgfHwgdGhpcy5vcHRpb25zLmNvbnRlbnQ7XHJcbiAgICAgICAgbmV3X2NvbnRlbnQgPSB0aGlzLmdldENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgndXBkYXRlX2NvbnRlbnQnLCBuZXdfY29udGVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERpYWxvZy5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAodGVtcGxhdGVfaW5zdGFuY2UpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNJbml0aW5nKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEaWFsb2cgaXMgb3BlbmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghKHRlbXBsYXRlX2luc3RhbmNlIGluc3RhbmNlb2YgVGVtcGxhdGUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBUZW1wbGF0ZSBpbnN0YW5jZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGVtcGxhdGVfaW5zdGFuY2Uub3B0aW9uKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UgPSB0ZW1wbGF0ZV9pbnN0YW5jZTtcclxuICAgICAgICB0ZW1wbGF0ZV9pbnN0YW5jZS5jb25uZWN0KHRoaXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0ZW1wbGF0ZSBpbnN0YW5jZVxyXG4gICAgICogQHJldHVybnMge251bGx8VGVtcGxhdGV9XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuZ2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCFfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy50ZW1wbGF0ZV9uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdF9vcHRpb25zID0gUHJlT3B0aW9ucy5nZXQoRGlhbG9nLlBSRV9PUFRJT05TX05BTUUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0X29wdGlvbnMudGVtcGxhdGVfbmFtZSAmJiBUZW1wbGF0ZS5oYXNUZW1wbGF0ZShEaWFsb2cuVEVNUExBVEVfVFlQRSwgZGVmYXVsdF9vcHRpb25zLnRlbXBsYXRlX25hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnRlbXBsYXRlX25hbWUgPSBkZWZhdWx0X29wdGlvbnMudGVtcGxhdGVfbmFtZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRfdGVtcGxhdGUgPSBUZW1wbGF0ZS5kZWZhdWx0VGVtcGxhdGUoRGlhbG9nLlRFTVBMQVRFX1RZUEUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFsc2UgIT09IGRlZmF1bHRfdGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnRlbXBsYXRlX25hbWUgPSBkZWZhdWx0X3RlbXBsYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcmVPcHRpb25zLnVwZGF0ZShEaWFsb2cuUFJFX09QVElPTlNfTkFNRSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVfbmFtZTogZGVmYXVsdF90ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpYWxvZyBkZWZhdWx0IHRlbXBsYXRlIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGVtcGxhdGUoVGVtcGxhdGUudGVtcGxhdGVJbnN0YW5jZShEaWFsb2cuVEVNUExBVEVfVFlQRSwgdGhpcy5vcHRpb25zLnRlbXBsYXRlX25hbWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZTtcclxuICAgIH07XHJcblxyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5vcHRpb24gPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgb3B0aW9uID0gS2hvYWkudXRpbC5iZU9iamVjdC5hcHBseShLaG9haSwgXy50b0FycmF5KGFyZ3VtZW50cykpO1xyXG5cclxuICAgICAgICBpZiAob3B0aW9uLnRlbXBsYXRlX25hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUZW1wbGF0ZShUZW1wbGF0ZS50ZW1wbGF0ZUluc3RhbmNlKERpYWxvZy5URU1QTEFURV9UWVBFLCBvcHRpb24udGVtcGxhdGVfbmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3B0aW9uLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0VGVtcGxhdGUoKS5vcHRpb24ob3B0aW9uLnRlbXBsYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uZXh0ZW5kKHRoaXMub3B0aW9ucywgb3B0aW9uKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBkaWFsb2cgc3RhdHVzXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfGJvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuc3RhdHVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChfZGlhbG9ncy5oYXNPd25Qcm9wZXJ0eSh0aGlzLmlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2RpYWxvZ3NbdGhpcy5pZF0uc3RhdHVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNJbml0aW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cygpID09PSBEaWFsb2cuU1RBVFVTX0lOSVRJQUw7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIHN0YXR1cyBpczogb3BlbmVkLCBzaG93aW5nIG9yIGhpZGluZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNPcGVuZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xICE9PSBbRGlhbG9nLlNUQVRVU19PUEVORUQsIERpYWxvZy5TVEFUVVNfSElESU5HXS5pbmRleE9mKHRoaXMuc3RhdHVzKCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIGlzIHNob3dpbmdcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmlzVmlzaWJsaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cygpID09PSBEaWFsb2cuU1RBVFVTX09QRU5FRDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBkaWFsb2cgaXMgaGlkaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pc0hpZGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMoKSA9PT0gRGlhbG9nLlNUQVRVU19ISURJTkc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBkaWFsb2cgaXMgY2xvc2VkXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pc0Nsb3NlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMoKSA9PT0gRGlhbG9nLlNUQVRVU19DTE9TRUQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBkaWFsb2cgaXMgZW5hYmxlZFxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNFbmFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oX2RpYWxvZ3NbdGhpcy5pZF0uZW5hYmxlZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBkaWFsb2cgaXMgcGVuZGluZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBCb29sZWFuKF9kaWFsb2dzW3RoaXMuaWRdLnBlbmRpbmcpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRW5hYmxlIGRpYWxvZyB3aGVuIGl0IGlzIGRpc2FibGVkXHJcbiAgICAgKiBFbWl0IGV2ZW50cyB3aGVuIGVuYWJsZWQgc3VjY2VzczpcclxuICAgICAqIC0gZW5hYmxlZDpcclxuICAgICAqIC0gdG9nZ2xlX2VuYWJsZTpcclxuICAgICAqICAgKyAwOiB0cnVlIGlmIGNoYW5nZSBldmVudCBpcyBlbmFibGVcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBvbiBlbmFibGUgc3VjY2Vzcywgb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNFbmFibGUoKSkge1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS5lbmFibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdlbmFibGVkJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd0b2dnbGVfZW5hYmxlJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNhYmxlIGRpYWxvZyB3aGVuIGl0IGlzIGVuYWJsaW5nXHJcbiAgICAgKiBFbWl0IGV2ZW50cyB3aGVuIGRpc2FibGUgc3VjY2VzczpcclxuICAgICAqIC0gZGlzYWJsZWQ6XHJcbiAgICAgKiAtIHRvZ2dsZV9lbmFibGU6XHJcbiAgICAgKiAgICsgMDogZmFsc2UgaWYgY2hhbmdlIGV2ZW50IGlzIGRpc2FibGVcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBvbiBkaXNhYmxlIHN1Y2Nlc3MsIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRW5hYmxlKCkpIHtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0uZW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCd0b2dnbGVfZW5hYmxlJywgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHBlbmRpbmcgc3RhdHVzIGlzIHBlbmRpbmdcclxuICAgICAqIEVtaXQgZXZlbnRzIHdoZW4gY2hhbmdlIHN1Y2Nlc3M6XHJcbiAgICAgKiAtIHBlbmRpbmc6XHJcbiAgICAgKiAtIHRvZ2dsZV9wZW5kaW5nOlxyXG4gICAgICogICArIDA6IHRydWUgaWYgY2hhbmdlIHRvIHBlbmRpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBvbiBjaGFuZ2Ugc3VjY2Vzcywgb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLnBlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUGVuZGluZygpKSB7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLnBlbmRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3BlbmRpbmcnKTtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3RvZ2dsZV9wZW5kaW5nJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgcGVuZGluZyBzdGF0dXMgaXMgcmVzb2x2ZWRcclxuICAgICAqIEVtaXQgZXZlbnRzIHdoZW4gY2hhbmdlIHN1Y2Nlc3M6XHJcbiAgICAgKiAtIHJlc29sdmVkOlxyXG4gICAgICogLSB0b2dnbGVfcGVuZGluZzpcclxuICAgICAqICAgKyAwOiBmYWxzZSBpZiBjaGFuZ2UgdG8gcmVzb2x2ZWRcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBvbiBjaGFuZ2Ugc3VjY2Vzcywgb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLnJlc29sdmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUGVuZGluZygpKSB7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLnBlbmRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdyZXNvbHZlZCcpO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgndG9nZ2xlX3BlbmRpbmcnLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtEaWFsb2dCdXR0b258b2JqZWN0fSBidXR0b24gRGlhbG9nQnV0dG9uIGluc3RhbmNlIG9yIGJ1dHRvbiBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuYXR0YWNoQnV0dG9uID0gZnVuY3Rpb24gKGJ1dHRvbikge1xyXG4gICAgICAgIGlmICghKGJ1dHRvbiBpbnN0YW5jZW9mIERpYWxvZ0J1dHRvbikpIHtcclxuICAgICAgICAgICAgaWYgKF8uaXNPYmplY3QoYnV0dG9uKSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gbmV3IERpYWxvZ0J1dHRvbihidXR0b24pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChfLmlzU3RyaW5nKGJ1dHRvbikgfHwgXy5pc051bWJlcihidXR0b24pKSAmJiBEaWFsb2dCdXR0b24uaGFzKGJ1dHRvbikpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbiA9IERpYWxvZ0J1dHRvbi5mYWN0b3J5KGJ1dHRvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYnV0dG9uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYnV0dG9uc1tidXR0b24ub3B0aW9ucy5uYW1lXSA9IGJ1dHRvbjtcclxuICAgICAgICBidXR0b24ubGlzdGVuKHRoaXMsICdkaWFsb2cnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcclxuICAgIH07XHJcblxyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5hdHRhY2hNdWx0aUJ1dHRvbnMgPSBmdW5jdGlvbiAoYnV0dG9ucykge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgXy5lYWNoKGJ1dHRvbnMsIGZ1bmN0aW9uIChidXR0b24pIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2hCdXR0b24oYnV0dG9uKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBidXR0b24gZXhpc3RzXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaGFzQnV0dG9uID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5idXR0b25zLmhhc093blByb3BlcnR5KG5hbWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGJ1dHRvbiBpbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQnV0dG9uIG5hbWVcclxuICAgICAqIEByZXR1cm5zIHtEaWFsb2dCdXR0b259XHJcbiAgICAgKiBAdGhyb3cgR2V0IHVuYXR0YWNoZWQgYnV0dG9uXHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuZ2V0QnV0dG9uID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzQnV0dG9uKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignR2V0IHVuYXR0YWNoZWQgYnV0dG9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5idXR0b25zW25hbWVdO1xyXG4gICAgfTtcclxuICAgIERpYWxvZy5wcm90b3R5cGUucmVtb3ZlQnV0dG9uID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzQnV0dG9uKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVtb3ZlIHVuYXR0YWNoZWQgYnV0dG9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYnV0dG9uc1tuYW1lXS51bmxpc3Rlbih0aGlzKTtcclxuICAgICAgICBkZWxldGUgdGhpcy5idXR0b25zW25hbWVdO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIGlzIGNsaWNrYWJsZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNDbGlja2FibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jbGlja2FibGUpIHtcclxuICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuY2xpY2thYmxlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGlja2FibGUodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5vcHRpb25zLmNsaWNrYWJsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24gKGJ1dHRvbl9uYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDbGlja2FibGUoKSAmJiB0aGlzLmhhc0J1dHRvbihidXR0b25fbmFtZSkpIHtcclxuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IHRoaXMuZ2V0QnV0dG9uKGJ1dHRvbl9uYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnY2xpY2tlZCcsIGJ1dHRvbl9uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZGlhbG9nIGlzIGNsb3NlYWJsZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNDbG9zZWFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNsb3NhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5jbG9zYWJsZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsb3NhYmxlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMub3B0aW9ucy5jbG9zYWJsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzKCkgPT09IERpYWxvZy5TVEFUVVNfSU5JVElBTCkge1xyXG4gICAgICAgICAgICBpZiAoIV9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkX2J5ID0gJyc7XHJcbiAgICAgICAgICAgIF9kaWFsb2dzW3RoaXMuaWRdLnN0YXR1cyA9IERpYWxvZy5TVEFUVVNfT1BFTkVEO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGlkZSBkaWFsb2dcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxpbmcoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnaGlkZScpO1xyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS5zdGF0dXMgPSBEaWFsb2cuU1RBVFVTX0hJRElORztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgZGlhbG9nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzSGlkaW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3Nob3cnKTtcclxuICAgICAgICAgICAgX2RpYWxvZ3NbdGhpcy5pZF0uc3RhdHVzID0gRGlhbG9nLlNUQVRVU19PUEVORUQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9zZSBkaWFsb2dcclxuICAgICAqIEVtaXQgZXZlbnQ6XHJcbiAgICAgKiAtIGNsb3NlXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZV0gRm9yY2UgY2xvc2UgZGlhbG9nXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2J5XSBjbG9zZSBjYWxsZXJcclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChmb3JjZSwgYnkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNDbG9zZWQoKSAmJiAoZm9yY2UgfHwgdGhpcy5pc0Nsb3NlYWJsZSgpKSkge1xyXG4gICAgICAgICAgICBieSA9IGJ5IHx8ICcnO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgnY2xvc2UnLCBmb3JjZSwgYnkpO1xyXG5cclxuICAgICAgICAgICAgcmVzZXREaWFsb2codGhpcy5pZCk7XHJcblxyXG4gICAgICAgICAgICBfZGlhbG9nc1t0aGlzLmlkXS5zdGF0dXMgPSBEaWFsb2cuU1RBVFVTX0NMT1NFRDtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZWRfYnkgPSBieTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZW1pdEV2ZW50KCdjbG9zZWQnLCBmb3JjZSwgYnkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBjbG9zZWQgYnkgdmFsdWVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfERpYWxvZ0J1dHRvbn0gYnV0dG9uXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRDbG9zZWRCeSA9IGZ1bmN0aW9uIChidXR0b24pIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Nsb3NlZCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghYnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24gPSAnJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGJ1dHRvbiBpbnN0YW5jZW9mIERpYWxvZ0J1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uLmdldENsb3NlS2V5KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc1N0cmluZyhidXR0b24pKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24gKz0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkX2J5ID0gYnV0dG9uO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBhIGJ1dHRvbiB3YXMgY2xvc2UgZGlhbG9nXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xEaWFsb2dCdXR0b259IGJ1dHRvblxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5wcm90b3R5cGUuaXNDbG9zZWRCeSA9IGZ1bmN0aW9uIChidXR0b24pIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Nsb3NlZCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghYnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24gPSAnJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGJ1dHRvbiBpbnN0YW5jZW9mIERpYWxvZ0J1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uLmdldENsb3NlS2V5KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc1N0cmluZyhidXR0b24pKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24gKz0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsb3NlZF9ieSA9PT0gYnV0dG9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBEaWFsb2cucHJvdG90eXBlLmdldERPTSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoX2RpYWxvZ3NbdGhpcy5pZF0udGVtcGxhdGVfaW5zdGFuY2UgJiYgKF9kaWFsb2dzW3RoaXMuaWRdLnRlbXBsYXRlX2luc3RhbmNlIGluc3RhbmNlb2YgVGVtcGxhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfZGlhbG9nc1t0aGlzLmlkXS50ZW1wbGF0ZV9pbnN0YW5jZS5nZXRET00oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBEaWFsb2c7XHJcbn0pKTtcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXHJcbiAgICAgICAgICAgICdsb2Rhc2gnLFxyXG4gICAgICAgICAgICAnanF1ZXJ5JyxcclxuICAgICAgICAgICAgJ2tob2FpanMnLFxyXG4gICAgICAgICAgICAna2hvYWlqcy1wcmUtb3B0aW9ucycsXHJcbiAgICAgICAgICAgICdraG9haWpzLWFqYXgnLFxyXG4gICAgICAgICAgICAnLi4vZGlhbG9nLWJ1dHRvbicsXHJcbiAgICAgICAgICAgICcuLi9kaWFsb2cnXHJcbiAgICAgICAgXTtcclxuICAgICAgICByZXF1aXJlKGRlcGVuZGVuY2llcywgZmFjdG9yeSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZhY3RvcnkoXHJcbiAgICAgICAgICAgIHJvb3QuXyxcclxuICAgICAgICAgICAgcm9vdC5qUXVlcnkgfHwgcm9vdC4kLFxyXG4gICAgICAgICAgICByb290Lktob2FpLFxyXG4gICAgICAgICAgICAocm9vdC5LaG9haSAmJiByb290Lktob2FpLlByZU9wdGlvbnMpIHx8IHJvb3QuUHJlT3B0aW9ucyxcclxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5BamF4KSB8fCByb290LkFqYXgsXHJcbiAgICAgICAgICAgIChyb290Lktob2FpICYmIHJvb3QuS2hvYWkuRGlhbG9nQnV0dG9uKSB8fCByb290LkRpYWxvZ0J1dHRvbixcclxuICAgICAgICAgICAgKHJvb3QuS2hvYWkgJiYgcm9vdC5LaG9haS5EaWFsb2cpIHx8IHJvb3QuRGlhbG9nXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSh0aGlzLCBmdW5jdGlvbiAoXywgalF1ZXJ5LCBLaG9haSwgUHJlT3B0aW9ucywgQWpheCwgRGlhbG9nQnV0dG9uLCBEaWFsb2cpIHtcclxuICAgIC8qXHJcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgfCBEeW5hbWljIGNvbnRlbnRcclxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICB8XHJcbiAgICAgfFxyXG4gICAgIHxcclxuICAgICB8XHJcbiAgICAgKi9cclxuXHJcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZywge1xyXG4gICAgICAgIERZTkFNSUNfQ09OVEVOVF9QUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nLkR5bmFtaWNDb250ZW50J1xyXG4gICAgfSk7XHJcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRFlOQU1JQ19DT05URU5UX1BSRV9PUFRJT05TX05BTUUsIHtcclxuICAgICAgICBsb2FkaW5nOiAnTG9hZGluZyBjb250ZW50Li4uJ1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGNvbnRlbnQgYXMgZnVuY3Rpb24gd2hpY2ggcHJvdmlkZSBkeW5hbWljIGNvbnRlbnQgdmlhIEFqYXguXHJcbiAgICAgKiBDaGFuZ2UgZGlhbG9nJ3MgcGVuZGluZyBzdGF0dXMgb24gc3RhcnQgY29tcGxldGUgcmVxdWVzdFxyXG4gICAgICogRGlhbG9nIHdpbGwgZW1pdCBldmVudHM6XHJcbiAgICAgKiAtIGxvYWRfY29udGVudDogQWpheCBiZWdpbiByZXF1ZXN0XHJcbiAgICAgKiAtIGxvYWRfY29udGVudF9mYWlsZWQ6IEFqYXggZXJyb3JcclxuICAgICAqIC0gbG9hZF9jb250ZW50X2NvbXBsZXRlOiBBamF4IGNvbXBsZXRlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQWpheCBvcHRpb25zLiBEZWZhdWx0IG9wdGlvbnM6XHJcbiAgICAgKiAtIGVycm9yX2NvbnRlbnQ6IGRlZmF1bHQgZXJyb3IgY29udGVudCBpZiBBamF4IGVycm9yLiAnR2V0IGR5bmFtaWMgY29udGVudCBmYWlsZWQnXHJcbiAgICAgKiAtIGxvYWRpbmc6IGRlZmF1bHQgbG9hZGluZyBjb250ZW50LiAnTG9hZGluZyBjb250ZW50Li4uJy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5keW5hbWljQ29udGVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoXy5pc1N0cmluZyhvcHRpb25zKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBvcHRpb25zXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuRFlOQU1JQ19DT05URU5UX1BSRV9PUFRJT05TX05BTUUsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHVwZGF0ZV9jb250ZW50X2NiLCBkaWFsb2cpIHtcclxuICAgICAgICAgICAgaWYgKCFfLmlzTnVsbChjb250ZW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBhdyA9IG5ldyBBamF4KF8ub21pdChvcHRpb25zLCAnbG9hZGluZycpKTtcclxuXHJcbiAgICAgICAgICAgIGF3LmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gcmVzcG9uc2UgKyAnJztcclxuICAgICAgICAgICAgICAgIHVwZGF0ZV9jb250ZW50X2NiKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3LmZhaWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGlhbG9nLmVtaXRFdmVudCgnbG9hZF9jb250ZW50X2ZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlX2NvbnRlbnRfY2Iob3B0aW9ucy5lcnJvcl9jb250ZW50IHx8ICdHZXQgZHluYW1pYyBjb250ZW50IGZhaWxlZCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3Lm9wdGlvbignYmVmb3JlU2VuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGRpYWxvZy5lbWl0RXZlbnQoJ2xvYWRfY29udGVudCcpO1xyXG4gICAgICAgICAgICAgICAgZGlhbG9nLnBlbmRpbmcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhdy5hbHdheXMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGlhbG9nLmVtaXRFdmVudCgnbG9hZF9jb250ZW50X2NvbXBsZXRlJyk7XHJcbiAgICAgICAgICAgICAgICBkaWFsb2cucmVzb2x2ZWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBkaWFsb2cuYWRkTGlzdGVuZXIoJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYXcuYWJvcnQoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhdy5yZXF1ZXN0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5sb2FkaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLypcclxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICB8IERpYWxvZyBCb3hcclxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICB8XHJcbiAgICAgfCBTaG93IG9ubHkgZGlhbG9nIGJvZHksIG5vIGhlYWRlciwgbm8gZm9vdGVyXHJcbiAgICAgfFxyXG4gICAgIHxcclxuICAgICAqL1xyXG5cclxuICAgIERpYWxvZy5ib3ggPSBmdW5jdGlvbiAoY29udGVudCwgb3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgICAgICBpZiAoXy5pc1N0cmluZyhvcHRpb25zKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IG9wdGlvbnMgKyAnJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvcHRpb25zLmNvbnRlbnQgPSBjb250ZW50O1xyXG5cclxuICAgICAgICBpZiAoIW9wdGlvbnMudGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9IF8uZGVmYXVsdHMob3B0aW9ucy50ZW1wbGF0ZSwge1xyXG4gICAgICAgICAgICBoYXNfZm9vdGVyOiBmYWxzZSxcclxuICAgICAgICAgICAgaGFzX2hlYWRlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIGNsb3NlX21hbnVhbDogZmFsc2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIGRpYWxvZyA9IG5ldyBEaWFsb2cob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGRpYWxvZy5vcGVuKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkaWFsb2c7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qXHJcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgfCBEaWFsb2cgQWxlcnRcclxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICB8XHJcbiAgICAgfFxyXG4gICAgIHxcclxuICAgICB8XHJcbiAgICAgKi9cclxuXHJcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZywge1xyXG4gICAgICAgIERJQUxPR19BTEVSVF9QUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nLkFsZXJ0J1xyXG4gICAgfSk7XHJcbiAgICBQcmVPcHRpb25zLmRlZmluZShEaWFsb2cuRElBTE9HX0FMRVJUX1BSRV9PUFRJT05TX05BTUUsIHtcclxuICAgICAgICB0aXRsZTogJ0FsZXJ0JyxcclxuICAgICAgICBjbG9zZV9idXR0b25fb3B0aW9uczoge31cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBvcHRpb25zIFN0cmluZzogdGl0bGUsIG9iamVjdDogb3B0aW9uc1xyXG4gICAgICogQHJldHVybnMgeyp8RGlhbG9nfVxyXG4gICAgICovXHJcbiAgICBEaWFsb2cuYWxlcnQgPSBmdW5jdGlvbiAobWVzc2FnZSwgb3B0aW9ucykge1xyXG4gICAgICAgIGlmIChfLmlzU3RyaW5nKG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogb3B0aW9ucyArICcnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnQWxlcnQnXHJcbiAgICAgICAgfSwgUHJlT3B0aW9ucy5nZXQoRGlhbG9nLkRJQUxPR19BTEVSVF9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKSwge1xyXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBkaWFsb2cgPSBuZXcgRGlhbG9nKF8ub21pdChvcHRpb25zLCAnY2xvc2VfYnV0dG9uX29wdGlvbnMnKSk7XHJcblxyXG4gICAgICAgIGRpYWxvZy5hdHRhY2hCdXR0b24oRGlhbG9nQnV0dG9uLmZhY3RvcnkoRGlhbG9nQnV0dG9uLkNMT1NFLCBvcHRpb25zLmNsb3NlX2J1dHRvbl9vcHRpb25zKSk7XHJcblxyXG4gICAgICAgIGRpYWxvZy5vcGVuKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkaWFsb2c7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKlxyXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIHwgRGlhbG9nIENvbmZpcm1cclxuICAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICB8XHJcbiAgICAgfFxyXG4gICAgIHxcclxuICAgICAqL1xyXG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2csIHtcclxuICAgICAgICBESUFMT0dfQ09ORklSTV9QUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nLkNvbmZpcm0nXHJcbiAgICB9KTtcclxuICAgIFByZU9wdGlvbnMuZGVmaW5lKERpYWxvZy5ESUFMT0dfQ09ORklSTV9QUkVfT1BUSU9OU19OQU1FLCB7XHJcbiAgICAgICAgdGl0bGU6ICdDb25maXJtJyxcclxuICAgICAgICBkZWZhdWx0X2J1dHRvbjogbnVsbCxcclxuICAgICAgICBidXR0b25zOiBbXVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLmNvbmZpcm0gPSBmdW5jdGlvbiAobWVzc2FnZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGlhbG9nO1xyXG5cclxuICAgICAgICBpZiAoIV8uaXNPYmplY3Qob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb25zICsgJydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIV8uaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBfLm5vb3A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvcHRpb25zID0gXy5leHRlbmQoUHJlT3B0aW9ucy5nZXQoRGlhbG9nLkRJQUxPR19DT05GSVJNX1BSRV9PUFRJT05TX05BTUUsIG9wdGlvbnMpLCB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKF8uaXNFbXB0eShvcHRpb25zLmJ1dHRvbnMpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9ucyA9IERpYWxvZ0J1dHRvbi5mYWN0b3J5KERpYWxvZ0J1dHRvbi5CVVRUT05TX1lFU19OTyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkaWFsb2cgPSBuZXcgRGlhbG9nKF8ub21pdChvcHRpb25zLCAnZGVmYXVsdF9idXR0b24nKSk7XHJcblxyXG4gICAgICAgIF8uZWFjaChkaWFsb2cuYnV0dG9ucywgZnVuY3Rpb24gKGJ1dHRvbikge1xyXG4gICAgICAgICAgICBidXR0b24uc2V0SGFuZGxlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLm9wdGlvbnMubmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIW9wdGlvbnMuZGVmYXVsdF9idXR0b24pIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5kZWZhdWx0X2J1dHRvbiA9IF8ubGFzdChPYmplY3Qua2V5cyhkaWFsb2cuYnV0dG9ucykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9EZWZhdWx0IGJ1dHRvblxyXG4gICAgICAgIGRpYWxvZy5vbignY2xvc2VkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2xvc2VkX2J5KSB7XHJcbiAgICAgICAgICAgICAgICBLaG9haS51dGlsLmNhbGxGdW5jKGNhbGxiYWNrLCBvcHRpb25zLmRlZmF1bHRfYnV0dG9uLCBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAga2V5OiAnZGVmYXVsdF9idXR0b24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRpYWxvZy5vcGVuKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkaWFsb2c7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKlxyXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIHwgRGlhbG9nIGlGcmFtZVxyXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIHxcclxuICAgICB8XHJcbiAgICAgfFxyXG4gICAgICovXHJcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZywge1xyXG4gICAgICAgIERJQUxPR19JRlJBTUVfUFJFX09QVElPTlNfTkFNRTogJ0tob2FpLkRpYWxvZy5pRnJhbWUnXHJcbiAgICB9KTtcclxuICAgIFByZU9wdGlvbnMuZGVmaW5lKERpYWxvZy5ESUFMT0dfSUZSQU1FX1BSRV9PUFRJT05TX05BTUUsIHtcclxuICAgICAgICB0aXRsZTogJ2lGcmFtZScsXHJcbiAgICAgICAgYXR0cmlidXRlczoge31cclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVybFxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqIEByZXR1cm5zIHsqfERpYWxvZ31cclxuICAgICAqL1xyXG4gICAgRGlhbG9nLmlGcmFtZSA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGlhbG9nLFxyXG4gICAgICAgICAgICBhdHRycyA9IFtdLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoIV8uaXNPYmplY3Qob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb25zICsgJydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3B0aW9ucyA9IFByZU9wdGlvbnMuZ2V0KERpYWxvZy5ESUFMT0dfSUZSQU1FX1BSRV9PUFRJT05TX05BTUUsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICBfLmVhY2gob3B0aW9ucy5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcclxuICAgICAgICAgICAgaWYgKF8uaXNCb29sZWFuKHZhbCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRycy5wdXNoKGtleSArICc9XCInICsga2V5ICsgJ1wiJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhdHRycy5wdXNoKGtleSArICc9XCInICsgdmFsICsgJ1wiJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUucHVzaCgnPGRpdiBjbGFzcz1cImVtYmVkLXJlc3BvbnNpdmUgZW1iZWQtcmVzcG9uc2l2ZS0xNmJ5OVwiPicpO1xyXG4gICAgICAgIHRlbXBsYXRlLnB1c2goJzxpZnJhbWUgY2xhc3M9XCJlbWJlZC1yZXNwb25zaXZlLWl0ZW1cIiBzcmM9XCInICsgdXJsICsgJ1wiICcgKyBhdHRycy5qb2luKCcgJykgKyAnPjwvaWZyYW1lPicpO1xyXG4gICAgICAgIHRlbXBsYXRlLnB1c2goJzwvZGl2PicpO1xyXG5cclxuICAgICAgICBvcHRpb25zLmNvbnRlbnQgPSB0ZW1wbGF0ZS5qb2luKFwiXFxuXCIpO1xyXG4gICAgICAgIGRpYWxvZyA9IG5ldyBEaWFsb2cob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGRpYWxvZy5vcGVuKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkaWFsb2c7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qXHJcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgfCBEaWFsb2cgRm9ybVxyXG4gICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIHwgLSBCdXR0b25zOiBzdWJtaXQsIGNsb3NlXHJcbiAgICAgfCAtIE9wdGlvbnM6XHJcbiAgICAgfCAgKyBmb3JtX2NsYXNzZXM6IGZvcm0gY2xhc3Nlcywgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ1xyXG4gICAgIHwgICsgbWVzc2FnZV9jbGFzc2VzOiBmb3JtIG1lc3NhZ2UgZGl2IGNsYXNzZXMsIHN0cmluZyBvciBhcnJheSBvZiBzdHJpbmcuIERlZmF1bHQgaXMgXCJkaWFsb2dfZm9ybV9tZXNzYWdlXCJcclxuICAgICB8ICArIGJ1dHRvbnM6IGFkZCBvdGhlciBidXR0b25zXHJcbiAgICAgfCAgKyBidXR0b25zX29wdGlvbjogb2JqZWN0IHdpdGggYnV0dG9uJ3MgbmFtZSBhbmQgYnV0dG9uIG9wdGlvbnNcclxuICAgICB8ICArIHN1Ym1pdF9idXR0b246IGRlZmF1bHQgc3VibWl0IGJ1dHRvbiBuYW1lLiBEaWFsb2cgd2lsbCB0cmlnZ2VyIGNhbGxiYWNrIHdpdGggdGhpcyBidXR0b24gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXQgd2l0aG91dCBidXR0b24gY2xpY2tcclxuICAgICB8ICArIGNsb3NlX2J1dHRvbjogZGVmYXVsdCBjbG9zZSBidXR0b24gbmFtZS4gRGlhbG9nIHdpbGwgdHJpZ2dlciBjYWxsYmFjayB3aXRoIGRpYWxvZyBjbG9zZSB3aXRob3V0IGJ1dHRvbiBjbGlja1xyXG4gICAgIHwgICsgdmFsaWRhdG9yOiBmb3JtIHZhbGlkYXRvciBjYWxsYmFjay4gUmV0dXJuIHRydWUgb24gdmFsaWQgb3Igc3RyaW5nIGZvciBlcnJvcnMuIElmIHJldHVybiBzdHJpbmcgdGhlbiBkaWFsb2cgd2lsbCBzaG93IGVycm9yIG9uIG1lc3NhZ2UgZGl2LlxyXG4gICAgIHwgICAgICBBcmd1bWVudHM6XHJcbiAgICAgfCAgICAgIC0gZm9ybSBET01cclxuICAgICB8ICAgICAgLSBidXR0b24gaW5zdGFuY2VcclxuICAgICB8ICAgICAgLSBkaWFsb2cgaW5zdGFuY2VcclxuICAgICB8XHJcbiAgICAgfFxyXG4gICAgIHwtIERpYWxvZyBkYXRhOlxyXG4gICAgIHwgICsgZm9ybV9zZWxlY3RvcjogZm9ybSBzZWxlY3RvclxyXG4gICAgIHwgICsgZm9ybV9tZXNzYWdlX3NlbGVjdG9yOiBmb3JtIG1lc3NhZ2UgZGl2IHNlbGVjdG9yXHJcbiAgICAgfCAgKyB1cGRhdGVfbWVzc2FnZTogdXBkYXRlIGZvcm0gbWVzc2FnZS4gQXJndW1lbnRzOiBtZXNzYWdlLiBJZiBhcmcgbWVzc2FnZSBmYWlsIHRoZW4gaGlkZSBtZXNzYWdlXHJcbiAgICAgfCAgKyBidG5faGFuZGxlcjogZGVmYXVsdCBidXR0b24gY2xpY2sgaGFuZGxlciwgdGhhdCB2YWxpZCBmb3JtLCBzaG93IG1lc3NhZ2Ugb24gZXJyb3IgYW5kIGNhbGwgY2FsbGJhY2suXHJcbiAgICAgfCAgICAgIElmIGJ1dHRvbiBpcyBjbG9zZSBidXR0b24gdGhlbiBjbG9zZSBkaWFsb2cgYmVmb3JlIGNhbGwgY2FsbGJhY2suIFVzZWZ1bCBmb3IgY3VzdG9tIGJ1dHRvblxyXG4gICAgIHwgICAgICBBcmd1bWVudHM6XHJcbiAgICAgfCAgICAgIC0gYnRuOiBidXR0b24gaW5zdGFuY2VcclxuICAgICB8XHJcbiAgICAgfC0gRm9ybSBjYWxsYmFjazpcclxuICAgICB8ICAgICAgQXJndW1lbnRzOlxyXG4gICAgIHwgICAgICAtIGJ1dHRvbiBuYW1lOlxyXG4gICAgIHwgICAgICAtIGZvcm0gRE9NOlxyXG4gICAgIHwgICAgICAtIGJ1dHRvbiBpbnN0YW5jZTpcclxuICAgICB8ICAgICAgLSBkaWFsb2cgaW5zdGFuY2U6XHJcbiAgICAgfFxyXG4gICAgIHxcclxuICAgICB8XHJcbiAgICAgfFxyXG4gICAgIHxcclxuICAgICAqL1xyXG4gICAgRGlhbG9nQnV0dG9uLmRlZmluZSgnc3VibWl0Jywge1xyXG4gICAgICAgIGxhYmVsOiAnU3VibWl0J1xyXG4gICAgfSk7XHJcblxyXG4gICAgS2hvYWkudXRpbC5kZWZpbmVDb25zdGFudChEaWFsb2dCdXR0b24sIHtcclxuICAgICAgICBTVUJNSVQ6ICdzdWJtaXQnLFxyXG4gICAgICAgIFNVQk1JVF9DQU5DRUw6IFsnc3VibWl0JywgJ2NhbmNlbCddXHJcbiAgICB9KTtcclxuXHJcbiAgICBLaG9haS51dGlsLmRlZmluZUNvbnN0YW50KERpYWxvZywge1xyXG4gICAgICAgIERJQUxPR19GT1JNX1BSRV9PUFRJT05TX05BTUU6ICdLaG9haS5EaWFsb2cuRm9ybSdcclxuICAgIH0pO1xyXG4gICAgUHJlT3B0aW9ucy5kZWZpbmUoRGlhbG9nLkRJQUxPR19GT1JNX1BSRV9PUFRJT05TX05BTUUsIHtcclxuICAgICAgICB0aXRsZTogJ0Zvcm0nLFxyXG4gICAgICAgIGZvcm1fY2xhc3NlczogJycsXHJcbiAgICAgICAgbWVzc2FnZV9jbGFzc2VzOiAnZGlhbG9nX2Zvcm1fbWVzc2FnZScsXHJcbiAgICAgICAgdmFsaWRhdG9yOiBudWxsLFxyXG4gICAgICAgIGF1dG9fZm9jdXM6IHRydWUsXHJcbiAgICAgICAgc3VibWl0X2J1dHRvbl9uYW1lOiAnc3VibWl0JyxcclxuICAgICAgICBjYW5jZWxfYnV0dG9uX25hbWU6ICdjYW5jZWwnLFxyXG4gICAgICAgIGJ1dHRvbnM6IFtdLFxyXG4gICAgICAgIGJ1dHRvbnNfZXh0ZW5kX29wdGlvbnM6IHt9LFxyXG4gICAgICAgIGRpc2FibGVhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24pfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBhcmd1bWVudHM6IGJ1dHRvbiBuYW1lLCBmb3JtIERPTSwgYnV0dG9uIGluc3RhbmNlLCBkaWFsb2cgaW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgKiBAcmV0dXJucyB7KnxEaWFsb2d9XHJcbiAgICAgKi9cclxuICAgIERpYWxvZy5mb3JtID0gZnVuY3Rpb24gKGNvbnRlbnQsIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGRpYWxvZyA9IG5ldyBEaWFsb2coKTtcclxuXHJcbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gXy5ub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvcHRpb25zID0gUHJlT3B0aW9ucy5nZXQoRGlhbG9nLkRJQUxPR19GT1JNX1BSRV9PUFRJT05TX05BTUUsIG9wdGlvbnMpO1xyXG4gICAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZChvcHRpb25zLCB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgIGNvbnRlbnRfaGFuZGxlcjogZGlhbG9nRm9ybUNvbnRlbnRIYW5kbGVyKG9wdGlvbnMpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChfLmlzRW1wdHkob3B0aW9ucy5idXR0b25zKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnMgPSBEaWFsb2dCdXR0b24uZmFjdG9yeShEaWFsb2dCdXR0b24uU1VCTUlUX0NBTkNFTCwge30sIHtcclxuICAgICAgICAgICAgICAgIGNhbmNlbDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IGNyZWF0ZUNhbmNlbEJ1dHRvbkhhbmRsZXIoY2FsbGJhY2spXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3VibWl0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogY3JlYXRlQnV0dG9uc0hhbmRsZXIoY2FsbGJhY2ssIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGlhbG9nLm9wdGlvbihcclxuICAgICAgICAgICAgXy5vbWl0KG9wdGlvbnMsIFsnZm9ybV9jbGFzc2VzJywgJ21lc3NhZ2VfY2xhc3NlcycsICd2YWxpZGF0b3InLCAnc3VibWl0X2J1dHRvbl9uYW1lJyxcclxuICAgICAgICAgICAgICAgICdjYW5jZWxfYnV0dG9uX25hbWUnLCAnYnV0dG9ucycsICdidXR0b25zX2V4dGVuZF9vcHRpb25zJywgJ2Rpc2FibGVhYmxlJ10pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgXy5lYWNoKG9wdGlvbnMuYnV0dG9ucywgZnVuY3Rpb24gKGJ1dHRvbikge1xyXG4gICAgICAgICAgICB2YXIgYXR0YWNoZWRfYnV0dG9uID0gZGlhbG9nLmF0dGFjaEJ1dHRvbihidXR0b24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYnV0dG9uc19leHRlbmRfb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShhdHRhY2hlZF9idXR0b24ub3B0aW9ucy5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgYXR0YWNoZWRfYnV0dG9uLm9wdGlvbihfLmNsb25lKG9wdGlvbnMuYnV0dG9uc19leHRlbmRfb3B0aW9uc1thdHRhY2hlZF9idXR0b24ub3B0aW9ucy5uYW1lXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFkZERpYWxvZ0RhdGEoZGlhbG9nLCBvcHRpb25zKTtcclxuICAgICAgICBhZGREaWFsb2dNZXRob2RzKGRpYWxvZywgb3B0aW9ucyk7XHJcbiAgICAgICAgYWRkRGlhbG9nRXZlbnRzKGRpYWxvZywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGRpYWxvZy5vcGVuKCk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLmF1dG9fZm9jdXMpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFsb2cuZ2V0RE9NKCkuZmluZCgnaW5wdXQ6dmlzaWJsZSwgdGV4dGFyZWE6dmlzaWJsZScpLmZpcnN0KCkuZm9jdXMoKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkaWFsb2c7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhbmNlbEJ1dHRvbkhhbmRsZXIoY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGJ1dHRvbikge1xyXG4gICAgICAgICAgICB2YXIgZGlhbG9nID0gYnV0dG9uLmdldERpYWxvZygpO1xyXG5cclxuICAgICAgICAgICAgYnV0dG9uLmNsb3NlRGlhbG9nKHRydWUpO1xyXG4gICAgICAgICAgICBLaG9haS51dGlsLmNhbGxGdW5jKGNhbGxiYWNrLCBbYnV0dG9uLm9wdGlvbnMubmFtZSwgbnVsbCwgYnV0dG9uLCBkaWFsb2ddLCBkaWFsb2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVCdXR0b25zSGFuZGxlcihjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHZhciBkaWFsb2dfaW5zdGFuY2UgPSB0aGlzLmdldERpYWxvZygpLFxyXG4gICAgICAgICAgICAgICAgZm9ybSA9IGpRdWVyeShkaWFsb2dfaW5zdGFuY2UuZGF0YVsnZm9ybV9zZWxlY3RvciddKSxcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlX3Jlc3VsdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB1cGRhdGVGb3JtTWVzc2FnZShkaWFsb2dfaW5zdGFuY2UsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnZhbGlkYXRvcikge1xyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVfcmVzdWx0ID0gb3B0aW9ucy52YWxpZGF0b3IoZm9ybSwgZGlhbG9nX2luc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHJ1ZSAhPT0gdmFsaWRhdGVfcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5pc1N0cmluZyh2YWxpZGF0ZV9yZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRm9ybU1lc3NhZ2UoZGlhbG9nX2luc3RhbmNlLCB2YWxpZGF0ZV9yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgS2hvYWkudXRpbC5jYWxsRnVuYyhjYWxsYmFjaywgW2J1dHRvbi5vcHRpb25zLm5hbWUsIGZvcm0sIGJ1dHRvbiwgZGlhbG9nX2luc3RhbmNlXSwgZGlhbG9nX2luc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlhbG9nRm9ybUNvbnRlbnRIYW5kbGVyKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgd3JhcF9iZWdpbiA9IFsnPGZvcm0+J107XHJcbiAgICAgICAgdmFyIHdyYXBfZW5kID0gWyc8L2Zvcm0+J107XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLmRpc2FibGVhYmxlKSB7XHJcbiAgICAgICAgICAgIHdyYXBfYmVnaW4ucHVzaCgnPGZpZWxkc2V0IGNsYXNzPVwiZm9ybV9maWVsZHNldFwiPicpO1xyXG4gICAgICAgICAgICB3cmFwX2VuZC51bnNoaWZ0KCc8L2ZpZWxkc2V0PicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd3JhcF9iZWdpbi5wdXNoKCc8ZGl2IGNsYXNzPVwiZGlhbG9nX2Zvcm1fbWVzc2FnZVwiPjwvZGl2PicpO1xyXG4gICAgICAgIHdyYXBfZW5kLnVuc2hpZnQoJzxpbnB1dCB0eXBlPVwic3VibWl0XCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiLz4nKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3cmFwX2JlZ2luLmpvaW4oXCJcXG5cIikgKyBjb250ZW50ICsgd3JhcF9lbmQuam9pbihcIlxcblwiKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsYXNzZXNUb1NlbGVjdG9yKGNsYXNzZXMpIHtcclxuICAgICAgICBpZiAoIV8uaXNBcnJheShjbGFzc2VzKSkge1xyXG4gICAgICAgICAgICAoY2xhc3NlcyArICcnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbGFzc2VzID0gXy5mbGF0dGVuKF8uY2FzdEFycmF5KGNsYXNzZXMpKTtcclxuXHJcbiAgICAgICAgaWYgKCFfLmlzRW1wdHkoY2xhc3NlcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8ubWFwKGNsYXNzZXMsIGZ1bmN0aW9uIChjbGFzc19uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3NfbmFtZS50cmltKCkgPyAnLicgKyBjbGFzc19uYW1lIDogJyc7XHJcbiAgICAgICAgICAgIH0pLmpvaW4oJycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUZvcm1NZXNzYWdlKGRpYWxvZywgbWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlX2RvbSA9IGpRdWVyeShkaWFsb2cuZGF0YVsnZm9ybV9zZWxlY3RvciddICsgJyAnICsgZGlhbG9nLmRhdGFbJ2Zvcm1fbWVzc2FnZV9zZWxlY3RvciddKTtcclxuXHJcbiAgICAgICAgaWYgKG1lc3NhZ2VfZG9tLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZV9kb20uaHRtbChtZXNzYWdlKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2RvbS5odG1sKCcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkRGlhbG9nRGF0YShkaWFsb2csIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGlhbG9nX2RvbV9pZCA9ICcjJyArIGRpYWxvZy5nZXRUZW1wbGF0ZSgpLmdldERPTUlEKCk7XHJcbiAgICAgICAgdmFyIGZvcm1fc2VsZWN0b3IgPSBkaWFsb2dfZG9tX2lkICsgJyBmb3JtJyArIGNsYXNzZXNUb1NlbGVjdG9yKG9wdGlvbnMuZm9ybV9jbGFzc2VzKTtcclxuICAgICAgICB2YXIgZm9ybV9tZXNzYWdlX3NlbGVjdG9yID0gZm9ybV9zZWxlY3RvciArICcgJyArIG9wdGlvbnMubWVzc2FnZV9jbGFzc2VzID8gY2xhc3Nlc1RvU2VsZWN0b3Iob3B0aW9ucy5tZXNzYWdlX2NsYXNzZXMpIDogJy5kaWFsb2dfZm9ybV9tZXNzYWdlJztcclxuXHJcbiAgICAgICAgZGlhbG9nLmRhdGFbJ2Zvcm1fc2VsZWN0b3InXSA9IGZvcm1fc2VsZWN0b3I7XHJcbiAgICAgICAgZGlhbG9nLmRhdGFbJ2Zvcm1fbWVzc2FnZV9zZWxlY3RvciddID0gZm9ybV9tZXNzYWdlX3NlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZERpYWxvZ01ldGhvZHMoZGlhbG9nKSB7XHJcbiAgICAgICAgZGlhbG9nLmdldEZvcm1ET00gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkoZGlhbG9nLmRhdGFbJ2Zvcm1fc2VsZWN0b3InXSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGlhbG9nLnVwZGF0ZUZvcm1NZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdXBkYXRlRm9ybU1lc3NhZ2UoZGlhbG9nLCBtZXNzYWdlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkaWFsb2cuY2xlYXJGb3JtTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdXBkYXRlRm9ybU1lc3NhZ2UoZGlhbG9nLCBmYWxzZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkaWFsb2cuZ2V0Rm9ybURhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAVE9ETzogRml4IEtob2FpLmpGb3JtXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAoIUtob2FpLmpGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01ldGhvZCBnZXRGb3JtRGF0YSByZXF1aXJlIG1vZHVsZSBqRm9ybScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gS2hvYWkuakZvcm0uZ2V0Rm9ybURhdGEodGhpcy5nZXRGb3JtRE9NKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGREaWFsb2dFdmVudHMoZGlhbG9nLCBvcHRpb25zKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZm9ybV9zdWJtaXRfZXZlbnRfbGlzdGVuZXIoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnN1Ym1pdF9idXR0b25fbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZGlhbG9nLmNsaWNrKG9wdGlvbnMuc3VibWl0X2J1dHRvbl9uYW1lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGlhbG9nLm9uKCdvcGVuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoJ2JvZHknKS5vbignc3VibWl0JywgdGhpcy5kYXRhWydmb3JtX3NlbGVjdG9yJ10sIGZvcm1fc3VibWl0X2V2ZW50X2xpc3RlbmVyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZGlhbG9nLm9uKCdjbG9zZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jbG9zZWRfYnkgJiYgb3B0aW9ucy5jYW5jZWxfYnV0dG9uX25hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNCdXR0b24ob3B0aW9ucy5jYW5jZWxfYnV0dG9uX25hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGRlZmF1bHQgYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5idXR0b25zW29wdGlvbnMuY2FuY2VsX2J1dHRvbl9uYW1lXS5jbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBrZXk6ICdkZWZhdWx0X2Nsb3NlX2J1dHRvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZGlhbG9nLm9uKCdjbG9zZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnYm9keScpLm9mZignc3VibWl0JywgdGhpcy5kYXRhWydmb3JtX3NlbGVjdG9yJ10sIGZvcm1fc3VibWl0X2V2ZW50X2xpc3RlbmVyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYob3B0aW9ucy5kaXNhYmxlYWJsZSl7XHJcbiAgICAgICAgICAgIGRpYWxvZy5vbigndG9nZ2xlX2VuYWJsZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IHRoaXMuZ2V0Rm9ybURPTSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnZmllbGRzZXQuZm9ybV9maWVsZHNldCcpLnByb3AoJ2Rpc2FibGVkJywgIXRoaXMuaXNFbmFibGUoKSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qXHJcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgfCBEaWFsb2cgUHJvbXB0XHJcbiAgICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgfCAtIG9wdGlvbnM6XHJcbiAgICAgfCAgICAgICsgdmFsdWU6IGN1cnJlbnQgdmFsdWVcclxuICAgICB8ICAgICAgKyBpbnB1dF90eXBlOiB0ZXh0LCBwYXNzd29yZCwuLi5cclxuICAgICB8ICAgICAgKyBpbnB1dF9jbGFzc2VzOiBjbGFzcyBvZiBpbnB1dFxyXG4gICAgIHxcclxuICAgICB8IC0gY2FsbGJhY2s6IGNhbGxiYWNrIGhhdmUgMSBhcmd1bWVudCBpcyB2YWx1ZSBvZiBwcm9tcHRcclxuICAgICB8XHJcbiAgICAgKi9cclxuICAgIEtob2FpLnV0aWwuZGVmaW5lQ29uc3RhbnQoRGlhbG9nLCB7XHJcbiAgICAgICAgRElBTE9HX1BST01QVF9QUkVfT1BUSU9OU19OQU1FOiAnS2hvYWkuRGlhbG9nLnByb21wdCdcclxuICAgIH0pO1xyXG4gICAgUHJlT3B0aW9ucy5kZWZpbmUoRGlhbG9nLkRJQUxPR19QUk9NUFRfUFJFX09QVElPTlNfTkFNRSwge1xyXG4gICAgICAgIHRpdGxlOiAnUHJvbXB0JyxcclxuICAgICAgICBkZWZhdWx0X3ZhbHVlOiAnJyxcclxuICAgICAgICBwbGFjZWhvbGRlcjogJycsXHJcbiAgICAgICAgaW5wdXRfdHlwZTogJ3RleHQnLFxyXG4gICAgICAgIGlucHV0X2NsYXNzZXM6ICdmb3JtLWNvbnRyb2wnLFxyXG4gICAgICAgIGNsb3NlX29uX3N1Ym1pdDogdHJ1ZSxcclxuICAgICAgICBidXR0b25zX2V4dGVuZF9vcHRpb25zOiB7XHJcbiAgICAgICAgICAgIHN1Ym1pdDoge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdPaydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgRGlhbG9nLnByb21wdCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gW10sXHJcbiAgICAgICAgICAgIGRpYWxvZztcclxuXHJcbiAgICAgICAgaWYgKCFfLmlzT2JqZWN0KG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogb3B0aW9ucyA/IG9wdGlvbnMgKyAnJyA6ICdQcm9tcHQnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IF8ubm9vcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBQcmVPcHRpb25zLmdldChEaWFsb2cuRElBTE9HX1BST01QVF9QUkVfT1BUSU9OU19OQU1FLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgY29udGVudC5wdXNoKCc8cD4nLCBtZXNzYWdlLCAnPC9wPicpO1xyXG4gICAgICAgIGNvbnRlbnQucHVzaCgnPGlucHV0IG5hbWU9XCJwcm9tcHRfZGF0YVwiIHR5cGU9XCInLCBvcHRpb25zLmlucHV0X3R5cGUgKyAnXCIgJyxcclxuICAgICAgICAgICAgJ2NsYXNzPVwiJywgb3B0aW9ucy5pbnB1dF9jbGFzc2VzICsgJ1wiICcsXHJcbiAgICAgICAgICAgICd2YWx1ZT1cIicsIG9wdGlvbnMuZGVmYXVsdF92YWx1ZSArICdcIicsXHJcbiAgICAgICAgICAgICdwbGFjZWhvbGRlcj1cIicsIG9wdGlvbnMucGxhY2Vob2xkZXIgKyAnXCInLFxyXG4gICAgICAgICAgICAnLz4nKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJvbXB0X2NiKGJ0bl9uYW1lLCBmb3JtLCBidG4pIHtcclxuICAgICAgICAgICAgaWYgKCFmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgZm9ybSwgYnRuKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gb3B0aW9ucy5kZWZhdWx0X3ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCdzdWJtaXQnID09PSBidG5fbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBmb3JtLmZpbmQoJ2lucHV0W25hbWU9XCJwcm9tcHRfZGF0YVwiXScpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsb3NlX29uX3N1Ym1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayh2YWx1ZSwgZm9ybSwgYnRuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRpYWxvZyA9IERpYWxvZy5mb3JtKGNvbnRlbnQuam9pbignJyksIHByb21wdF9jYiwgXy5vbWl0KG9wdGlvbnMsICdkZWZhdWx0X3ZhbHVlJywgJ3BsYWNlaG9sZGVyJywgJ2lucHV0X3R5cGUnLCAnaW5wdXRfY2xhc3NlcycsICdjbG9zZV9vbl9zdWJtaXQnKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkaWFsb2c7XHJcbiAgICB9O1xyXG59KSk7Il19
